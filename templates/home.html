<!doctype html>
<html lang="pt-br">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Sistema CRM</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!--CSS-->
    <link rel="stylesheet" href="../static/css/style.css">
    <!--BOOTSTRAP ICONS-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <!--CDN JQUERY-->
    <link rel="stylesheet" href="//code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="/resources/demos/style.css">
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <!--CDN MOMENT JS-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>
    <script src="https://momentjs.com/downloads/moment-with-locales.min.js"></script>
    <!--DATATABLE JQUERY-->
    <link href="https://cdn.datatables.net/1.13.7/css/jquery.dataTables.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.4.2/css/buttons.dataTables.min.css">
</head>

<body>

    <nav class="navbar bg-body-tertiary bg-dark" data-bs-theme="dark">
        <div class="container-fluid">
            <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar"
                aria-controls="offcanvasNavbar" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="m-1">
                <div class="input-group mb-3">
                    <input type="text" class="form-control search_box" id="tags" name="search_box" onkeyup="pega_nome()"
                        placeholder="Pesquisa..." aria-label="Recipient's username" aria-describedby="btn-pesquisa">
                    <button type="button" onclick="clear_input()" class="btn btn-outline-secondary" title="Limpar"
                        aria-expanded="false">
                        <span class="text-white">X</span>
                    </button>
                    <button class="btn btn-outline-secondary" onclick="pega_nome()" type="submit"
                        id="btn-pesquisa">Buscar</button>
                </div>
            </div>

            <button type="button" class="btn btn-primary m-1" data-bs-toggle="modal" onclick="limpa_campos()"
                data-bs-target="#modalAdicionaCadastro">
                + Adicionar Cadastro</button>



            <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasNavbar"
                aria-labelledby="offcanvasNavbarLabel">
                <div class="offcanvas-header">
                    <img src="../static/imagens/crm.png" width="50" height="50" alt="logo">
                    <a class="navbar-brand offcanvas-title" id="offcanvasNavbarLabel" href="#">Sistema CRM</a>
                    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                </div>

                <div class="row m-1">
                    {%if current_user.is_authenticated %}
                    <a class="text-white ">Seja bem-vindo(a) {{current_user.nome}}</a>
                    {%endif%}
                </div>
                <div class="offcanvas-body">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="{{url_for('home')}}"><i
                                    class="bi bi-house-door-fill"></i> Home</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                                aria-expanded="false"><i class="bi bi-file-earmark-bar-graph-fill"></i>
                                Relatórios
                            </a>
                            <ul class="dropdown-menu">
                                {%if current_user.is_authenticated%}
                                <li><a class="dropdown-item"
                                        href="{{url_for('graficos',token_acesso1=token_acesso1,gera_letra1=gera_letra1, usuario_id = current_user.id,gera_letra2=gera_letra2,token_acesso2=token_acesso2)}}"><i
                                            class="bi bi-bar-chart-line-fill"></i> Gráficos</a></li>
                                {%endif%}
                            </ul>
                        </li>
                        {%if current_user.is_authenticated%}
                        {%if current_user.acesso_id == 2%}
                        <li class="nav-item">
                            <a class="nav-link "
                                href="{{url_for('painel_configuracoes_usuario', id = current_user.id)}}"
                                aria-current="page">
                                <i class="bi bi-gear"></i> Painel de Configurações
                            </a>
                        </li>
                        {%endif%}
                        {%endif%}
                        {%if current_user.acesso_id == 1%}
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                                aria-expanded="false">
                                <i class="bi bi-speedometer2"></i> Painel do Administrador
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="{{url_for('painel_configuracoes')}}"><i
                                            class="bi bi-gear"></i> Configurações
                                        dos Usuários</a></li>
                                <li><a class="dropdown-item" href="{{url_for('inicio')}}"><i
                                            class="bi bi-chat-left-text"></i> Scripts</a></li>
                            </ul>
                        </li>
                        {%endif%}
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                                aria-expanded="false"><i class="bi bi-file-earmark-pdf"></i>
                                Manual do Usuário
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" target="_blank"
                                        href="../static/documento/manual_sistema_crm.pdf"><i class="bi bi-download"></i>
                                        Download Manual</a></li>

                            </ul>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-danger" aria-disabled="true" href="{{ url_for('logout') }}"><i
                                    class="bi bi-box-arrow-left"></i> Logoff</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>

    <div class="row m-1">
        <div class="col-md-3 mx-auto p-2" id="resultado"></div>
    </div>

    <div class="container">
        <div class="row divflex">

            <div class="col-md-auto card_deal m-3" style="cursor: pointer; background: rgb(17,16,16); 
            background: linear-gradient(0deg, rgba(17,16,16,1) 32%, rgba(36,33,33,1) 66%);" data-bs-toggle="modal"
                data-bs-target="#modalInadimplentes{{ano_atual.ano}}">
                <h5 class="text-center" style="margin-top: 5px;"><b style="color: #d62828;">Pagamentos Pendentes</b>
                </h5>
                {%if boletos_pendentes_anual == None%}
                <h5 class="fw-bold text-center" style="color: #d62828;">Total {{ano_atual.ano}}:
                    {{dados_boletos_pendentes_anual|count}} - Perda: R$ 0.00</h5>
                <h1 class="text-center fw-bold" style="color: #d62828;"></h1>
                {%else%}
                <h5 class="fw-bold text-center" style="color: #d62828;">Total {{ano_atual.ano}}:
                    {{dados_boletos_pendentes_anual|count}} - Perda: R$ {{boletos_pendentes_anual}}</h5>
                <h1 class="text-center fw-bold" style="color: #d62828;"></h1>
                {%endif%}

                {%if boletos_pendentes_mensal == None%}
                <h5 class="fw-bold text-center" style="color: #d62828;">Total {{mes_atual.mes}}:
                    {{dados_boletos_pendentes_mensal|count}} - Perda: R$ 0.00</h5>
                <h1 class="text-center fw-bold" style="color: #d62828;"></h1>
                {%else%}
                <h5 class="fw-bold text-center" style="color: #d62828;">Total {{mes_atual.mes}}:
                    {{dados_boletos_pendentes_mensal|count}} - Perda: R$ {{boletos_pendentes_mensal}}</h5>
                <h1 class="text-center fw-bold" style="color: #d62828;"></h1>
                {%endif%}
            </div>

            <!-- Modal Clientes Inadimplentes Ano Atual-->
            <div class="modal fade" id="modalInadimplentes{{ano_atual.ano}}" tabindex="-1"
                aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5" id="exampleModalLabel">Clientes Inadimplentes -
                                {{ano_atual.ano}} </h1>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <table id="tabelaAdimplentes"
                                class="table table-responsive-lg table-hover table-striped table-bordered">
                                <thead class="table-dark text-center">
                                    <tr>
                                        <th scope="col">Nome Cliente</th>
                                        <th scope="col">Data Vencimento</th>
                                        <th scope="col">Valor Boleto</th>
                                        <th scope="col">Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {%for dados in clientes_inadimplentes_anual%}
                                    <tr class="text-center fw-bold" style="cursor: pointer;" data-bs-toggle="modal"
                                        data-bs-target="#cliente{{dados.cliente_dados_cliente.id}}">
                                        <td class="text-danger">{{dados.cliente_dados_cliente.nome}}</td>
                                        <td class="text-danger"> {{dados.cliente_dados_boleto.data_vencimento}} </td>
                                        <td class="text-danger"> R$ {{dados.cliente_dados_boleto.valor}} </td>
                                        <td class="text-danger">{{dados.cliente_dados_status.status}} </td>
                                    </tr>
                                    {%endfor%}
                                </tbody>
                            </table>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Sair</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-auto card_deal m-3" style="cursor: pointer; background: rgb(17,16,16);
            background: linear-gradient(0deg, rgba(17,16,16,1) 32%, rgba(36,33,33,1) 66%);" data-bs-toggle="modal"
                data-bs-target="#modalAdimplentes{{ano_atual.ano}}">
                <h5 class="text-center " style="margin-top: 5px; color: #38b000;"><b>Pagamentos Confirmados</b>
                </h5>
                <!--DADOS ANUAIS-->
                {%if boletos_pagos_anual == None%}
                <h5 class="fw-bold text-center" style="color: #38b000;">Total {{ano_atual.ano}}:
                    {{dados_boletos_pagos_anual|count}} - Lucro: R$ 0.00</h5>
                {%else%}
                <h5 class="fw-bold text-center" style="color: #38b000;">Total {{ano_atual.ano}}:
                    {{dados_boletos_pagos_anual|count}} - Lucro: R$ {{boletos_pagos_anual}}</h5>
                {%endif%}

                <!--DADOS MENSAIS-->
                {%if boletos_pagos_mensal == None%}
                <h5 class="fw-bold text-center" style="color: #38b000;">Total {{mes_atual.mes}}:
                    {{dados_boletos_pagos_mensal|count}} - Lucro: R$ 0.00</h5>
                {%else%}
                <h5 class="fw-bold text-center" style="color: #38b000;">Total {{mes_atual.mes}}:
                    {{dados_boletos_pagos_mensal|count}} - Lucro: R$ {{boletos_pagos_mensal}}</h5>
                {%endif%}
            </div>

            <!-- Modal Clientes Adimplentes Ano Atual-->
            <div class="modal fade" id="modalAdimplentes{{ano_atual.ano}}" tabindex="-1"
                aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5" id="exampleModalLabel">Clientes Adimplentes -
                                {{ano_atual.ano}} </h1>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <table id="tabelaInadimplentes"
                                class="table table-responsive-lg table-hover table-striped table-bordered">
                                <thead class="table-dark text-center">
                                    <tr>
                                        <th scope="col">Nome Cliente</th>
                                        <th scope="col">Data Vencimento</th>
                                        <th scope="col">Data Pagamento</th>
                                        <th scope="col">Valor Pago</th>
                                        <th scope="col">Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {%for dados in clientes_adimplentes_anual%}
                                    <tr class="text-center fw-bold" style="cursor: pointer;" data-bs-toggle="modal"
                                        data-bs-target="#modalPagamentoConfirmado{{dados.cliente_dados_cliente.id}}">
                                        <td class="text-success">{{dados.cliente_dados_cliente.nome}}</td>
                                        <td class="text-success"> {{dados.cliente_dados_boleto.data_vencimento}} </td>
                                        <td class="text-success"> {{dados.cliente_dados_boleto.data_pagamento}} </td>
                                        <td class="text-success"> R$ {{dados.cliente_dados_boleto.valor_pago}} </td>
                                        <td class="text-success">{{dados.cliente_dados_status.status}} </td>
                                    </tr>
                                    {%endfor%}
                                </tbody>
                            </table>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Sair</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="container-fluid">

        {% with messages = get_flashed_messages() %}
        {% if messages %}
        <div class="row">
            <div class="col-10">
                <div class="alert alert-success" role="alert">
                    {% for message in messages %}
                    <p>{{ message }}</p>
                    <button type="button" class="btn-close position-absolute top-0 end-0" data-bs-dismiss="alert"
                        aria-label="Close"></button>
                    {% endfor %}
                </div>
            </div>
        </div>
        {% endif %}
        {% endwith %}



        <div class="card_deal">
            <div class="row m-1">
                <div class="col-md m-1" hidden>
                    <h6 class="text-center text-white fw-bold titulo">Leads de Entrada</h6>
                    <div class="row colunas-dados" style="border-top-color: #f77f00;"></div>
                    {%for cliente in cliente_nao_comprou_consulta%}
                    <div class="row linha-dados card_deal text-start" data-bs-toggle="modal"
                        data-bs-target="#cliente{{cliente.id}}">
                        <a href="{{cliente.id}}" data-bs-toggle="modal" data-bs-target="#cliente{{cliente.id}}"
                            class="text-uppercase text-white fw-bold texto-dados">{{cliente.nome}}</a>
                        <a href="{{cliente.id}}" class="texto-dados text-white" data-bs-toggle="modal"
                            data-bs-target="#cliente{{cliente.id}}">Canal de Captação: <span
                                class="data_ultimo_contato_leads_editado">{{cliente.cliente_canal_contato.canal_contato}}</span></a>
                        {%if cliente.cliente_mensagem == []%}
                        <a href="{{cliente.id}}" class="texto-dados text-white" data-bs-toggle="modal"
                            data-bs-target="#cliente{{cliente.id}}">Último
                            Contato: <span
                                class="data_ultimo_contato_leads_editado">{{cliente.cliente_datacontato.ultimo_contato}}</span></a>
                        <a href="{{cliente.id}}" class="texto-dados text-white" data-bs-toggle="modal"
                            data-bs-target="#cliente{{cliente.id}}">Meio de Contato: Não houve troca de mensagens</a>
                        {%else%}
                        <a href="{{cliente.id}}" class="texto-dados text-white" data-bs-toggle="modal"
                            data-bs-target="#cliente{{cliente.id}}">Último
                            Contato: <span
                                class="data_ultimo_contato_leads_editado">{{cliente.cliente_mensagem[-1].data_envio}}</span></a>
                        <a href="{{cliente.id}}" class="texto-dados text-white" data-bs-toggle="modal"
                            data-bs-target="#cliente{{cliente.id}}">Meio de Contato:
                            {{cliente.cliente_mensagem[-1].origem}}</a>
                        {%endif%}
                        <a href="{{cliente.id}}" class="texto-dados text-white" data-bs-toggle="modal"
                            data-bs-target="#cliente{{cliente.id}}">Próximo
                            Contato: {{cliente.cliente_datacontato.proximo_contato}}</a>
                    </div>

                    <!-- Modal -->
                    <div class="modal fade" id="cliente{{cliente.id}}" tabindex="-1" aria-labelledby="exampleModalLabel"
                        aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered modal-lg">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h1 class="modal-title fs-5" id="exampleModalLabel">Leads de Entrada</h1>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <!--INÍCIO CARD CLIENTE-->
                                    <div class=" card_dados m-1" id="dados_card{{cliente.id}}">
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col-md-8">
                                                    <h5 class="card-title nome_cliente" id="nome_cliente">
                                                        Cliente: <span
                                                            style="text-transform: capitalize;">{{cliente.nome}}</span>
                                                    </h5>
                                                </div>


                                                <div class="col-auto">
                                                    <a type="button" href="/home/historico/{{cliente.id}}"
                                                        data-bs-toggle="modal"
                                                        data-bs-target="#modalHistorico{{cliente.id}}"
                                                        style="cursor: pointer; background: rgb(217,82,42);
                                background: linear-gradient(0deg, rgba(217,82,42,1) 35%, rgba(235,117,38,1) 65%); color: white;" class="btn card_deal tooltip-test"
                                                        title="Histórico de Mensagens"><i
                                                            class="bi bi-clock-history"></i></a>

                                                </div>
                                                <div class="col-auto">
                                                    <a type="button" href="/home/edita_registro/{{cliente.id}}"
                                                        data-bs-toggle="modal"
                                                        data-bs-target="#modalEditar{{cliente.id}}"
                                                        style="cursor: pointer; rgb(61,92,240);
                                background: radial-gradient(circle, rgba(61,92,240,1) 26%, rgba(3,20,163,1) 100%); color:white;" class="btn card_deal tooltip-test"
                                                        title="Editar registro"><i class="bi bi-pencil-square"></i></a>

                                                </div>
                                                <div class="col-auto">
                                                    <a type="button" href="/home/apaga_registro/{{cliente.id}}"
                                                        data-bs-toggle="modal"
                                                        data-bs-target="#modalConfirma{{cliente.id}}"
                                                        style="cursor: pointer;rgb(214,50,70);
                                background: radial-gradient(circle, rgba(214,50,70,1) 26%, rgba(163,3,3,1) 100%); color: white;" class="btn card_deal tooltip-test"
                                                        title="Excluir registro"><i class="bi bi-trash3-fill"></i></a>

                                                </div>
                                            </div>

                                            <div class="row float-start">
                                                <input type="number" value="{{cliente.id}}" hidden class="cliente_id">

                                            </div>

                                            <div class='row'>
                                                <div class="col-md-3">Tel.: <span
                                                        class="tooltip-test">{{cliente.telefone}}</span>
                                                </div>

                                                <div class="col-md-6">Email: <span
                                                        class="tooltip-test">{{cliente.email}}</a>
                                                </div>
                                            </div>

                                            <div class='row'>
                                                <div class="col-md-6">
                                                    <div class="form-floating mb-3">
                                                        <input type="text" readonly
                                                            class="form-control primeiro_contato " id="primeiro_contato"
                                                            placeholder="Primeiro Contato"
                                                            value='{{cliente.cliente_datacontato.primeiro_contato}}'>
                                                        <label for="primeiro_contato">Primeiro Contato</label>
                                                    </div>
                                                </div>

                                                {%if cliente.cliente_datacontato.proximo_contato != null %}
                                                <div class='col-md-6'>

                                                    <div id="mais_cinco_dias{{cliente.id}}" class="row">
                                                        <form
                                                            action="{{url_for('update_proximocontato', id= cliente.id)}}"
                                                            method='post'>
                                                            <div class="input-group form-floating mb-3">
                                                                <input type="text" readonly
                                                                    class="form-control cliente_proximocontato "
                                                                    id="proximo_contato" placeholder="Próximo
                                                                Contato" name="adiciona_cinco_dias" readonly
                                                                    class="form-control cliente_proximocontato"
                                                                    value='{{cliente.cliente_datacontato.proximo_contato}}'>
                                                                <button type='submit' class='btn_salva btn btn-success'
                                                                    data-dias="5"
                                                                    onclick="contato_cinco_dias({{cliente.id}})"
                                                                    title='Adicionar Cinco Dias'>
                                                                    +5
                                                                </button>
                                                                <label for="proximo_contato">Próximo
                                                                    Contato</label>

                                                            </div>
                                                        </form>
                                                    </div>
                                                </div>
                                                {%endif%}
                                            </div>

                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="form-floating mb-3">
                                                        <input type="text"
                                                            class="form-control data_final data_ultimo_contato_leads"
                                                            readonly placeholder="Último Contato"
                                                            value='{{cliente.cliente_datacontato.ultimo_contato}}'>
                                                        <label for="ultimo_contato">Último
                                                            Contato</label>
                                                    </div>
                                                </div>

                                                <div id="input_date{{cliente.id}}" class="col-md-6">
                                                    <form action="{{url_for('update_ultimocontato',id = cliente.id)}}"
                                                        method='post'>

                                                        <div class="input-group form-floating mb-3">
                                                            <input type='date' placeholder="Alterar Último Contato"
                                                                class='form-control data_modificada div_data'
                                                                name='ultimo_contato'>
                                                            <button type='submit' class='btn_salva btn btn-success'
                                                                title='Alterar Data'>
                                                                <i class='bi bi-check-square'></i>
                                                            </button>

                                                            <label for="ultimo_contato">Alterar
                                                                Último
                                                                Contato</label>

                                                        </div>
                                                    </form>
                                                </div>
                                            </div>

                                            <div class='row btn_dias'>

                                            </div>

                                            <br>

                                            <div class='prox_contato'> </div>

                                            <div class="row">
                                                <div class="col-md-6">
                                                    <h6>Como ficou sabendo?:
                                                        {{cliente.cliente_canal_contato.canal_contato}}</h6>
                                                </div>
                                            </div>


                                            <div class='justificativa'> </div>

                                            {%if cliente.cliente_contratou_servico.nome == 'Contratou' %}
                                            <div class="row">
                                                {%if cliente.cliente_status.status == "Contratou"%}
                                                <p class="card-text">O cliente <b>contratou o serviço</b></p>
                                                <div class="row">
                                                    <div class="col-auto">
                                                        <h6 class="card-text status_cliente{{cliente.id}}"
                                                            style="color: green;">Status:
                                                            {{cliente.cliente_status.status}} </h6>
                                                    </div>
                                                    <div class="col-auto">
                                                        <h6 class="blob green"></h6>
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-md-auto m-1">
                                                        <button class="btn btn-danger"
                                                            onclick="pagamento_pendente({{cliente.id}})">Pagamento
                                                            Pendente</button>
                                                    </div>
                                                    <br>
                                                    <div class="col-md-auto m-1">
                                                        <button class="btn btn-success"
                                                            onclick="pagamento_confirmado({{cliente.id}})">Pagamento
                                                            Confirmado</button>
                                                    </div>
                                                </div>
                                                {%elif cliente.cliente_status.status == "Pagamento Confirmado"%}
                                                <p class="card-text"><b>Pagamento Confirmado com sucesso</b></p>
                                                <div class="col-auto">
                                                    <h6 class="card-text status_cliente{{cliente.id}}"
                                                        style="color: green;">Status:
                                                        {{cliente.cliente_status.status}} </h6>
                                                </div>
                                                <div class="col-auto">
                                                    <h6 class="blob green"></h6>
                                                </div>
                                                {%endif%}
                                            </div>

                                            {%elif cliente.cliente_contratou_servico.nome == 'Não Contratou'%}
                                            <div class="row">
                                                {%if cliente.cliente_status.status == "Interesse"%}
                                                <div class="col-md-6">
                                                    <h6 class="card-text">O cliente <b>possui interesse</b></h6>
                                                </div>
                                                <div class="col-md-6">
                                                    <h6 class="card-text">Motivo: <a data-bs-toggle="modal"
                                                            style="cursor: pointer;"
                                                            data-bs-target="#modalHistoricoTextos{{cliente.id}}">{{cliente.cliente_topico.topico}}</a>
                                                    </h6>
                                                </div>
                                                <br> <br>
                                                <div class="row">
                                                    <div class="col-auto">
                                                        <h6 class="card-text status_cliente{{cliente.id}}"
                                                            style="color: #f77f00;">Status:
                                                            {{cliente.cliente_status.status}} </h6>
                                                    </div>
                                                    <div class="col-auto">
                                                        <h6 class="blob yellow">
                                                        </h6>
                                                    </div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-auto">
                                                        <div class="form-check">
                                                            <input class="form-check-input"
                                                                onclick="libera_botao({{cliente.id}})"
                                                                name="checkContratou" type="checkbox"
                                                                value="checkContratou" id="checkContratou">
                                                            <label class="form-check-label" for="checkContratou">
                                                                Contratou Serviço
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-auto insere_formulario">
                                                        <form action="{{url_for('cliente_contratou', id = cliente.id)}}"
                                                            method="post" class="formulario_cadastro">

                                                        </form>
                                                    </div>
                                                </div>
                                                {%elif cliente.cliente_status.status == "Pagamento Pendente"%}
                                                <div class="col-md-6">
                                                    <h6 class="card-text">O cliente <b>encontra-se com o pagamento
                                                            pendente</b>
                                                    </h6>
                                                </div>
                                                <br><br>
                                                <div class="row">
                                                    <div class="col-auto">
                                                        <h6 class="card-text status_cliente{{cliente.id}}"
                                                            style="color: red;">Status:
                                                            {{cliente.cliente_status.status}}</h6>
                                                    </div>
                                                    <div class="col-auto">
                                                        <h6 class="blob red"></h6>
                                                    </div>
                                                </div>
                                                {%endif%}
                                            </div>
                                            {%endif%}

                                        </div>
                                        <!--FIM CARD CLIENTE-->
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary"
                                        data-bs-dismiss="modal">Sair</button>
                                </div>
                            </div>
                        </div>
                    </div>



                    <!-- MODAL HISTÓRICO DE TEXTOS -->
                    <div class="modal fade" id="modalHistoricoTextos{{cliente.id}}" tabindex="-1"
                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h1 class="modal-title fs-5" id="exampleModalLabel">Histórico de
                                        Textos - <span class="text-capitalize">{{cliente.cliente_topico.topico}}</span>
                                    </h1>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>

                                <div class="modal-body">
                                    <!--INÍCIO FORM EDITA CLIENTE-->
                                    {%for texto in textos%}
                                    <div class="row m-1">
                                        <div class="card_deal">

                                            <br>
                                            <div class="row">
                                                {%if texto.texto_topico.topico ==
                                                cliente.cliente_topico.topico%}
                                                <p class="text-capitalize lh-base"><b>Texto:</b>
                                                    {{texto.texto}}</p>
                                                {%endif%}
                                            </div>

                                        </div>
                                    </div>
                                    <br>
                                    {%endfor%}
                                    <!--FINAL FORM EDITA CLIENTE-->
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--FINAL MODAL HISTÓRICO DE MENSAGENS-->

                    <!-- Modal EMAIL -->
                    <div class="modal fade modal_msg" id="modalEmail{{cliente.id}}" tabindex="-1"
                        aria-labelledby="modalMensagem" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered modal-lg">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="modalMensagem"><i
                                            class="bi bi-envelope-arrow-up-fill"></i><strong> Enviar
                                            Email</strong></h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>
                                <div class="modal-body row g-3">

                                    <form action="{{url_for('envia_email',id=cliente.id)}}" method="POST">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-floating mb-3">
                                                    {%if current_user.is_authenticated %}
                                                    <input type="text" hidden name="email_usuario_logado"
                                                        value="{{current_user.email}}">
                                                    {%endif%}
                                                    <input type="text" readonly class="form-control" id="floatingName"
                                                        name="nome" placeholder="Nome"
                                                        style="text-transform: uppercase;" required
                                                        value="{{cliente.nome}}">
                                                    <label for="floatingName"><strong>Nome</strong></label>
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <div class="form-floating mb-3">
                                                    <input type="text" readonly id="enderecoEmail" style="width: 300px;"
                                                        class="form-control" id="email" name="email" required
                                                        value="{{cliente.email}}">
                                                    <label for="enderecoEmail"><strong>Email</strong></label>
                                                </div>
                                            </div>

                                        </div>

                                        <div class="row">
                                            <div class="col-md-10">
                                                <h6 class="fw-bold">Regras:</h6>
                                                <ol>
                                                    <li><b>Nunca</b> cobrar no grupo;</li>
                                                    <li>Atualizar a planilha sempre que enviar ou receber contato;</li>
                                                    <li>Sempre poderá tirar a multa para pagamento imediato;</li>
                                                    <li class="fw-bold">Sempre pegar comprovante do pagamento;</li>
                                                    <li><b>Após 07 dias:</b> Começar o protocolo de ligação (duas vezes
                                                        por
                                                        dia)</li>
                                                    <li><b>Após de 01 semana</b> tentando ligar e não conseguindo,
                                                        passar o
                                                        caso para mim.</li>

                                                </ol>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-10">
                                                <div class="form-floating mb-3">
                                                    <input type="text" id="assuntoEmail" style="width: 350px;"
                                                        class="form-control" id="assunto" name="assunto_email" required>
                                                    <label for="assuntoEmail"><strong>Assunto</strong></label>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-8">
                                                <select class="form-select titulo_script_gmail{{cliente.id}}"
                                                    aria-label="Seleciona Script"
                                                    onchange="seleciona_texto_gmail({{cliente.id}})">

                                                </select>
                                            </div>
                                        </div>

                                        <div class="form-floating">
                                            <textarea class="form-control script_pronto_gmail{{cliente.id}}"
                                                name="texto_mensagem" rows="3"></textarea>
                                            <label for="floatingSelect">Digite sua mensagem</label>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary"
                                                data-bs-dismiss="modal">Sair</button>
                                            <button type="submit" id="envia" data-bs-toggle="modal"
                                                data-bs-target="#loading" class="btn btn-success"><i
                                                    class="bi bi-envelope-arrow-up-fill"></i> Enviar
                                                Email</button>
                                        </div>
                                    </form>
                                </div>

                            </div>
                        </div>
                    </div>
                    <!--FIM MODAL EMAIL-->

                    <!-- Modal Messenger -->
                    <div class="modal fade modal_msg" id="modalMessenger{{cliente.id}}" tabindex="-1"
                        aria-labelledby="modalMensagem" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered modal-lg">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="modalMensagem"><i class="bi bi-whatsapp"></i><strong>
                                            Enviar
                                            Mensagem - WhatsApp</strong></h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>

                                <div class="modal-body row g-3">
                                    <form action="{{url_for('salva_mensagem', id= cliente.id)}}" method="post">
                                        <div class="row">
                                            <div class="col-md-8">
                                                <div class="form-floating mb-3">
                                                    <input type="text" readonly class="form-control" id="floatingName"
                                                        name="nome" placeholder="Nome"
                                                        style="text-transform: uppercase;" required
                                                        value="{{cliente.nome}}">
                                                    <label for="floatingName"><strong>Nome</strong></label>
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <div class="form-floating mb-3">
                                                    <input type="tel" readonly id="floatingTelefone"
                                                        style="width: 200px;" class="form-control" id="tel"
                                                        name="telefone" placeholder="Somente Números" required
                                                        value="+55{{cliente.telefone}}">
                                                    <label for="floatingTelefone"><strong>Tel. de
                                                            Contato</strong></label>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-10">
                                                <h6 class="fw-bold">Regras:</h6>
                                                <ol>
                                                    <li><b>Nunca</b> cobrar no grupo;</li>
                                                    <li>Atualizar a planilha sempre que enviar ou receber contato;</li>
                                                    <li>Sempre poderá tirar a multa para pagamento imediato;</li>
                                                    <li class="fw-bold">Sempre pegar comprovante do pagamento;</li>
                                                    <li><b>Após 07 dias:</b> Começar o protocolo de ligação (duas vezes
                                                        por
                                                        dia)</li>
                                                    <li><b>Após de 01 semana</b> tentando ligar e não conseguindo,
                                                        passar o
                                                        caso para mim.</li>

                                                </ol>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="form-floating mb-3">
                                                    <input type="text" class="form-control" id="assuntoMensagem"
                                                        name="assuntoMensagem" placeholder="Assunto"
                                                        style="text-transform: uppercase;" required>
                                                    <label for="assuntoMensagem">Digite o assunto</label>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-8">
                                                <select class="form-select titulo_script_whatsapp{{cliente.id}}"
                                                    aria-label="Seleciona Script"
                                                    onchange="seleciona_texto_whatsapp({{cliente.id}})">
                                                </select>
                                            </div>
                                        </div>

                                        <div class="form-floating">
                                            <textarea class="form-control script_pronto_whatsapp{{cliente.id}}" required
                                                name="texto_mensagem" rows="3"></textarea>
                                            <label for="floatingSelect">Digite sua mensagem</label>
                                        </div>

                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary"
                                                data-bs-dismiss="modal">Sair</button>
                                            <button type="submit" id="envia"
                                                onclick="envia_zap({{cliente.telefone}},{{cliente.id}})"
                                                class="btn btn-success"><i class="bi bi-whatsapp"></i> Enviar
                                                WhatsApp</button>
                                        </div>

                                    </form>
                                </div>

                            </div>
                        </div>
                    </div>
                    <!--FIM MODAL-->

                    <!-- MODAL HISTÓRICO DE MENSAGENS -->
                    <div class="modal fade" id="modalHistorico{{cliente.id}}" tabindex="-1"
                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h1 class="modal-title fs-5" id="exampleModalLabel">Histórico de
                                        Mensagens</h1>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>

                                <div class="modal-body">
                                    <div class="row">
                                        <div class="col-auto"><button title="Enviar mensagem via WhatsApp"
                                                data-bs-toggle="modal" data-bs-target="#modalMessenger{{cliente.id}}"
                                                style="background: rgb(61,240,73);
                    background: radial-gradient(circle, rgba(61,240,73,1) 26%, rgba(33,101,19,1) 100%);"
                                                onclick="dados_scripts_whatsapp({{cliente.id}})"
                                                class="btn card_deal text-white"><i class="bi bi-whatsapp"></i>
                                                Enviar WhatsApp</button></div>

                                        <div class="col-auto"><button href="/sendemail/{{cliente.id}}"
                                                data-bs-toggle="modal" data-bs-target="#modalEmail{{cliente.id}}"
                                                onclick="dados_scripts_email({{cliente.id}})" style="background: rgb(61,92,240);
                    background: radial-gradient(circle, rgba(61,92,240,1) 26%, rgba(3,20,163,1) 100%);"
                                                title="Enviar Email para o Cliente {{cliente.nome}}"
                                                class="btn card_deal text-white"><i
                                                    class="bi bi-envelope-arrow-up-fill"></i> Enviar
                                                Email</button></div>
                                    </div>
                                    <br>
                                    <!--INÍCIO HISTÓRICO DE MENSAGENS/EMAIL-->
                                    {%for mensagens in cliente.cliente_mensagem%}
                                    <div class="row m-1">
                                        <div class="card_deal">
                                            <div class="col-auto">
                                                <span class="text-capitalize"><b>Enviado Via:</b>
                                                    {{mensagens.origem}}</span>
                                            </div>
                                            <div class="col-auto">
                                                <span><b>Tel. Contato:
                                                    </b>{{cliente.telefone}}</span>
                                            </div>
                                            <div class="col-auto">
                                                <span><b>E-mail: </b>{{cliente.email}}</span>
                                            </div>
                                            <div class="col-auto">
                                                <span><b>Data de envio:</b>
                                                    {{mensagens.data_envio}}</span>
                                            </div>
                                            <p class="text-capitalize"><b>Assunto:</b>
                                                {{mensagens.assunto}}</p>
                                            <p class="text-capitalize"><b>Texto:</b>
                                                {{mensagens.texto}}</p>
                                        </div>
                                    </div>
                                    <br>
                                    {%endfor%}
                                    <!--FINAL  HISTÓRICO DE MENSAGENS/EMAIL-->
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--FINAL MODAL HISTÓRICO DE MENSAGENS-->

                    <!-- Modal confirma exclusão -->
                    <div class="modal fade" id="modalConfirma{{cliente.id}}" tabindex="-1" aria-labelledby="confirma"
                        aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="confirma">Excluir Registro</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    Deseja realmente excluir o registro referente ao(a) Sr.(a) <b
                                        style="text-transform: capitalize;">{{cliente.nome}}</b>?
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"><i
                                            class="bi bi-x"></i>
                                        Não</button>
                                    <a type="button" href="{{url_for('delete',id =cliente.id)}}"
                                        class="btn btn-success"><i class="bi bi-check2"></i> Sim</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--FIM MODAL CONFIRMA EXCLUSÃO-->

                    <!-- MODAL EDITA CLIENTE -->
                    <div class="modal fade" id="modalEditar{{cliente.id}}" tabindex="-1"
                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h1 class="modal-title fs-5" id="exampleModalLabel">Editar
                                        Cadastro Cliente</h1>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>

                                <div class="modal-body">
                                    <!--INÍCIO FORM EDITA CLIENTE-->
                                    <form action="{{url_for('update_cliente', id= cliente.id)}}" method="post">
                                        <div class="row">
                                            <div class="col-md-4">
                                                <div class="form-floating mb-3">
                                                    <input type="text" class="form-control primeiro_contato_editado"
                                                        iname="primeiro_contato_editado" readonly
                                                        value="{{cliente.cliente_datacontato.primeiro_contato}}"
                                                        id="primeiro_contato" placeholder="Data Cadastro">
                                                    <label for="primeiro_contato">Data Cadastro</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="form-floating mb-3">
                                                <input type="text" class="form-control text-uppercase" id="nome"
                                                    name="nome_editado" value="{{cliente.nome}}" placeholder="Nome">
                                                <label for="nome">Nome</label>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-4">
                                                <div class="form-floating mb-3">
                                                    <input type="text" class="form-control" id="telefone"
                                                        value="{{cliente.telefone}}" name="telefone_editado"
                                                        placeholder="Telefone">
                                                    <label for="telefone">Telefone</label>
                                                </div>
                                            </div>

                                            <div class="col-md-8">
                                                <div class="form-floating mb-3">
                                                    <input type="email" class="form-control" id="email"
                                                        value="{{cliente.email}}" name="email_editado"
                                                        placeholder="Email">
                                                    <label for="floatingInput">Email</label>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-danger"
                                                data-bs-dismiss="modal">Sair</button>
                                            <button type="submit" class="btn btn-success">Salvar</button>
                                        </div>
                                    </form>
                                    <!--FINAL FORM EDITA CLIENTE-->
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--FINAL MODAL EDITA CLIENTE-->
                    {%endfor%}
                </div>

                <div class="col-md  m-1" hidden>
                    <h6 class="text-center text-white fw-bold  titulo">Contratou Serviço</h6>
                    <div class="row colunas-dados" style="border-top-color: #003049;"></div>
                    {%for cliente in cliente_comprou_consulta%}
                    <div class="row  linha-dados card_deal  text-start" data-bs-toggle="modal"
                        data-bs-target="#cliente{{cliente.id}}">
                        <a href="{{cliente.id}}" data-bs-toggle="modal" data-bs-target="#cliente{{cliente.id}}"
                            class="text-uppercase texto-dados text-white">{{cliente.nome}}</a>
                        {%if cliente.cliente_mensagem == []%}
                        <a href="{{cliente.id}}" class="texto-dados text-white" data-bs-toggle="modal"
                            data-bs-target="#cliente{{cliente.id}}">Último
                            Contato: <span
                                class="data_ultimo_contato_leads_editado">{{cliente.cliente_datacontato.ultimo_contato}}</span></a>
                        <a href="{{cliente.id}}" class="texto-dados text-white" data-bs-toggle="modal"
                            data-bs-target="#cliente{{cliente.id}}">Meio de Contato: Não houve troca de mensagens</a>
                        {%else%}
                        <a href="{{cliente.id}}" class="texto-dados text-white" data-bs-toggle="modal"
                            data-bs-target="#cliente{{cliente.id}}">Último
                            Contato: <span
                                class="data_ultimo_contato_leads_editado">{{cliente.cliente_mensagem[-1].data_envio}}</span></a>
                        <a href="{{cliente.id}}" class="texto-dados text-white" data-bs-toggle="modal"
                            data-bs-target="#cliente{{cliente.id}}">Meio de Contato:
                            {{cliente.cliente_mensagem[-1].origem}}</a>
                        {%endif%}
                        <a href="{{cliente.id}}" class="texto-dados text-white" data-bs-toggle="modal"
                            data-bs-target="#cliente{{cliente.id}}">Próximo
                            Contato: {{cliente.cliente_datacontato.proximo_contato}}</a>
                        <a href="{{cliente.id}}" class="texto-dados text-white" data-bs-toggle="modal"
                            data-bs-target="#cliente{{cliente.id}}">Data
                            Vencimento: {{cliente.cliente_datacontato.data_vencimento}}</a>
                    </div>


                    <!-- Modal -->
                    <div class="modal fade" id="cliente{{cliente.id}}" tabindex="-1" aria-labelledby="exampleModalLabel"
                        aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered modal-lg">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h1 class="modal-title fs-5" id="exampleModalLabel">Contratou Serviço</h1>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <!--INÍCIO CARD CLIENTE-->
                                    <div class=" card_dados m-1" id="dados_card{{cliente.id}}">
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col-md-8">
                                                    <h5 class="card-title nome_cliente" id="nome_cliente">
                                                        Cliente: <span
                                                            style="text-transform: capitalize;">{{cliente.nome}}</span>
                                                    </h5>
                                                </div>


                                                <div class="col-auto">
                                                    <a type="button" href="/home/historico/{{cliente.id}}"
                                                        data-bs-toggle="modal"
                                                        data-bs-target="#modalHistorico{{cliente.id}}"
                                                        style="cursor: pointer; background: rgb(217,82,42);
                                background: linear-gradient(0deg, rgba(217,82,42,1) 35%, rgba(235,117,38,1) 65%); color: white;" class="btn card_deal tooltip-test"
                                                        title="Histórico de Mensagens"><i
                                                            class="bi bi-clock-history"></i></a>

                                                </div>
                                                <div class="col-auto">
                                                    <a type="button" href="/home/edita_registro/{{cliente.id}}"
                                                        data-bs-toggle="modal"
                                                        data-bs-target="#modalEditar{{cliente.id}}"
                                                        style="cursor: pointer; rgb(61,92,240);
                                background: radial-gradient(circle, rgba(61,92,240,1) 26%, rgba(3,20,163,1) 100%); color:white;" class="btn card_deal tooltip-test"
                                                        title="Editar registro"><i class="bi bi-pencil-square"></i></a>

                                                </div>
                                                <div class="col-auto">
                                                    <a type="button" href="/home/apaga_registro/{{cliente.id}}"
                                                        data-bs-toggle="modal"
                                                        data-bs-target="#modalConfirma{{cliente.id}}"
                                                        style="cursor: pointer;rgb(214,50,70);
                                background: radial-gradient(circle, rgba(214,50,70,1) 26%, rgba(163,3,3,1) 100%); color: white;" class="btn card_deal tooltip-test"
                                                        title="Excluir registro"><i class="bi bi-trash3-fill"></i></a>

                                                </div>
                                            </div>

                                            <div class="row float-start">
                                                <input type="number" value="{{cliente.id}}" hidden class="cliente_id">

                                            </div>

                                            <div class='row'>
                                                <div class="col-md-3">Tel.: <span
                                                        class="tooltip-test">{{cliente.telefone}}</span>
                                                </div>

                                                <div class="col-md-6">Email: <span
                                                        class="tooltip-test">{{cliente.email}}</a>
                                                </div>
                                            </div>

                                            <div class='row'>
                                                <div class="col-md-6">
                                                    <div class="form-floating mb-3">
                                                        <input type="text" readonly
                                                            class="form-control primeiro_contato " id="primeiro_contato"
                                                            placeholder="Primeiro Contato"
                                                            value='{{cliente.cliente_datacontato.primeiro_contato}}'>
                                                        <label for="primeiro_contato">Primeiro Contato</label>
                                                    </div>
                                                </div>

                                                {%if cliente.cliente_datacontato.proximo_contato != null %}
                                                <div class='col-md-6'>

                                                    <div id="mais_cinco_dias{{cliente.id}}" class="row">
                                                        <form
                                                            action="{{url_for('update_proximocontato', id= cliente.id)}}"
                                                            method='post'>
                                                            <div class="input-group form-floating mb-3">
                                                                <input type="text" readonly
                                                                    class="form-control cliente_proximocontato "
                                                                    id="proximo_contato" placeholder="Próximo
                                                                Contato" name="adiciona_cinco_dias" readonly
                                                                    class="form-control cliente_proximocontato"
                                                                    value='{{cliente.cliente_datacontato.proximo_contato}}'>
                                                                <button type='submit' class='btn_salva btn btn-success'
                                                                    data-dias="5"
                                                                    onclick="contato_cinco_dias({{cliente.id}})"
                                                                    title='Adicionar Cinco Dias'>
                                                                    +5
                                                                </button>
                                                                <label for="proximo_contato">Próximo
                                                                    Contato</label>

                                                            </div>
                                                        </form>
                                                    </div>
                                                </div>
                                                {%endif%}
                                            </div>

                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="form-floating mb-3">
                                                        <input type="text"
                                                            class="form-control data_final data_ultimo_contato_leads"
                                                            readonly placeholder="Último Contato"
                                                            value='{{cliente.cliente_datacontato.ultimo_contato}}'>
                                                        <label for="ultimo_contato">Último
                                                            Contato</label>
                                                    </div>
                                                </div>

                                                <div id="input_date{{cliente.id}}" class="col-md-6">
                                                    <form action="{{url_for('update_ultimocontato',id = cliente.id)}}"
                                                        method='post'>

                                                        <div class="input-group form-floating mb-3">
                                                            <input type='date' placeholder="Alterar Último Contato"
                                                                class='form-control data_modificada div_data'
                                                                name='ultimo_contato'>
                                                            <button type='submit' class='btn_salva btn btn-success'
                                                                title='Alterar Data'>
                                                                <i class='bi bi-check-square'></i>
                                                            </button>

                                                            <label for="ultimo_contato">Alterar
                                                                Último
                                                                Contato</label>

                                                        </div>
                                                    </form>
                                                </div>
                                            </div>

                                            <div class='row btn_dias'>

                                            </div>

                                            <br>

                                            <div class='prox_contato'> </div>

                                            <div class="row">
                                                <div class="col-md-6">
                                                    <h6>Como ficou sabendo?:
                                                        {{cliente.cliente_canal_contato.canal_contato}}</h6>
                                                </div>
                                            </div>


                                            <div class='justificativa'> </div>

                                            {%if cliente.cliente_contratou_servico.nome == 'Contratou' %}
                                            <div class="row">
                                                {%if cliente.cliente_status.status == "Contratou"%}
                                                <p class="card-text">O cliente <b>contratou o serviço</b></p>
                                                <div class="row">
                                                    <div class="col-auto">
                                                        <h6 class="card-text status_cliente{{cliente.id}}"
                                                            style="color: green;">Status:
                                                            {{cliente.cliente_status.status}} </h6>
                                                    </div>
                                                    <div class="col-auto">
                                                        <h6 class="blob green"></h6>
                                                    </div>
                                                </div>

                                                <div class="row div-btn{{cliente.id}}">
                                                    <div class="col-md-auto m-1">
                                                        <button class="btn btn-danger"
                                                            onclick="pagamento_pendente({{cliente.id}})">Pagamento
                                                            Pendente</button>
                                                    </div>
                                                    <br>
                                                    <div class="col-md-auto m-1">
                                                        <button class="btn btn-success"
                                                            onclick="confirmar_pagamento({{cliente.id}})">Pagamento
                                                            Confirmado</button>
                                                    </div>
                                                </div>
                                                {%elif cliente.cliente_status.status == "Pagamento Confirmado"%}
                                                <p class="card-text"><b>Pagamento Confirmado com sucesso</b></p>
                                                <div class="col-auto">
                                                    <h6 class="card-text status_cliente{{cliente.id}}"
                                                        style="color: green;">Status:
                                                        {{cliente.cliente_status.status}} </h6>
                                                </div>
                                                <div class="col-auto">
                                                    <h6 class="blob green"></h6>
                                                </div>
                                                {%endif%}
                                            </div>

                                            {%elif cliente.cliente_contratou_servico.nome == 'Não Contratou'%}
                                            <div class="row">
                                                {%if cliente.cliente_status.status == "Interesse"%}
                                                <div class="col-md-6">
                                                    <h6 class="card-text">O cliente <b>possui interesse</b></h6>
                                                </div>
                                                <div class="col-md-6">
                                                    <h6 class="card-text">Motivo: <a data-bs-toggle="modal"
                                                            style="cursor: pointer;"
                                                            data-bs-target="#modalHistoricoTextos{{cliente.id}}">{{cliente.cliente_topico.topico}}</a>
                                                    </h6>
                                                </div>
                                                <br> <br>
                                                <div class="row">
                                                    <div class="col-md-8">
                                                        <h6 class="card-text status_cliente{{cliente.id}}"
                                                            style="color: #f77f00;">Status:
                                                            {{cliente.cliente_status.status}} <h6 class="blob yellow">
                                                            </h6>
                                                        </h6>

                                                    </div>

                                                    <div class="col-md-4">
                                                        <form action="{{url_for('cliente_contratou', id = cliente.id)}}"
                                                            method="post">
                                                            <button type="submit"
                                                                class="btn btn-primary card_deal">Contratou</button>
                                                        </form>
                                                    </div>

                                                </div>
                                                {%elif cliente.cliente_status.status == "Pagamento Pendente"%}
                                                <div class="col-md-6">
                                                    <h6 class="card-text">O cliente <b>encontra-se com o pagamento
                                                            pendente</b>
                                                    </h6>
                                                </div>
                                                <br><br>
                                                <div class="row">
                                                    <div class="col-auto">
                                                        <h6 class="card-text status_cliente{{cliente.id}}"
                                                            style="color: red;">Status:
                                                            {{cliente.cliente_status.status}}</h6>
                                                    </div>
                                                    <div class="col-auto">
                                                        <h6 class="blob red"></h6>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-auto m-1">
                                                        <button class="btn btn-success btn_contratou{{cliente.id}}"
                                                            onclick="pagamento_confirmado({{cliente.id}})">Pagamento
                                                            Confirmado</button>
                                                    </div>
                                                </div>
                                                {%endif%}
                                            </div>
                                            {%endif%}

                                        </div>
                                        <!--FIM CARD CLIENTE-->
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary"
                                        data-bs-dismiss="modal">Sair</button>
                                </div>
                            </div>
                        </div>
                    </div>



                    <!-- MODAL HISTÓRICO DE TEXTOS -->
                    <div class="modal fade" id="modalHistoricoTextos{{cliente.id}}" tabindex="-1"
                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h1 class="modal-title fs-5" id="exampleModalLabel">Histórico de
                                        Textos - <span class="text-capitalize">{{cliente.cliente_topico.topico}}</span>
                                    </h1>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>

                                <div class="modal-body">
                                    <!--INÍCIO FORM EDITA CLIENTE-->
                                    {%for texto in textos%}
                                    <div class="row m-1">
                                        <div class="card_deal">

                                            <br>
                                            <div class="row">
                                                {%if texto.texto_topico.topico ==
                                                cliente.cliente_topico.topico%}
                                                <p class="text-capitalize lh-base"><b>Texto:</b>
                                                    {{texto.texto}}</p>
                                                {%endif%}
                                            </div>

                                        </div>
                                    </div>
                                    <br>
                                    {%endfor%}
                                    <!--FINAL FORM EDITA CLIENTE-->
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--FINAL MODAL HISTÓRICO DE MENSAGENS-->

                    <!-- Modal EMAIL -->
                    <div class="modal fade modal_msg" id="modalEmail{{cliente.id}}" tabindex="-1"
                        aria-labelledby="modalMensagem" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered modal-lg">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="modalMensagem"><i
                                            class="bi bi-envelope-arrow-up-fill"></i><strong> Enviar
                                            Email</strong></h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>
                                <div class="modal-body row g-3">

                                    <form action="{{url_for('envia_email',id=cliente.id)}}" method="POST">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-floating mb-3">
                                                    {%if current_user.is_authenticated %}
                                                    <input type="text" hidden name="email_usuario_logado"
                                                        value="{{current_user.email}}">
                                                    {%endif%}
                                                    <input type="text" readonly class="form-control" id="floatingName"
                                                        name="nome" placeholder="Nome"
                                                        style="text-transform: uppercase;" required
                                                        value="{{cliente.nome}}">
                                                    <label for="floatingName"><strong>Nome</strong></label>
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <div class="form-floating mb-3">
                                                    <input type="text" readonly id="enderecoEmail" style="width: 300px;"
                                                        class="form-control" id="email" name="email" required
                                                        value="{{cliente.email}}">
                                                    <label for="enderecoEmail"><strong>Email</strong></label>
                                                </div>
                                            </div>

                                        </div>

                                        <div class="row">
                                            <div class="col-md-10">
                                                <h6 class="fw-bold">Regras:</h6>
                                                <ol>
                                                    <li><b>Nunca</b> cobrar no grupo;</li>
                                                    <li>Atualizar a planilha sempre que enviar ou receber contato;</li>
                                                    <li>Sempre poderá tirar a multa para pagamento imediato;</li>
                                                    <li class="fw-bold">Sempre pegar comprovante do pagamento;</li>
                                                    <li><b>Após 07 dias:</b> Começar o protocolo de ligação (duas vezes
                                                        por
                                                        dia)</li>
                                                    <li><b>Após de 01 semana</b> tentando ligar e não conseguindo,
                                                        passar o
                                                        caso para mim.</li>

                                                </ol>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-10">
                                                <div class="form-floating mb-3">
                                                    <input type="text" id="assuntoEmail" style="width: 350px;"
                                                        class="form-control" id="assunto" name="assunto_email" required>
                                                    <label for="assuntoEmail"><strong>Assunto</strong></label>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-8">
                                                <select class="form-select titulo_script_gmail{{cliente.id}}"
                                                    aria-label="Seleciona Script"
                                                    onchange="seleciona_texto_gmail({{cliente.id}})">

                                                </select>
                                            </div>
                                        </div>

                                        <div class="form-floating">
                                            <textarea class="form-control script_pronto_gmail{{cliente.id}}"
                                                name="texto_mensagem" rows="3"></textarea>
                                            <label for="floatingSelect">Digite sua mensagem</label>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary"
                                                data-bs-dismiss="modal">Sair</button>
                                            <button type="submit" id="envia" data-bs-toggle="modal"
                                                data-bs-target="#loading" class="btn btn-success"><i
                                                    class="bi bi-envelope-arrow-up-fill"></i> Enviar
                                                Email</button>
                                        </div>
                                    </form>
                                </div>

                            </div>
                        </div>
                    </div>
                    <!--FIM MODAL EMAIL-->

                    <!-- Modal Messenger -->
                    <div class="modal fade modal_msg" id="modalMessenger{{cliente.id}}" tabindex="-1"
                        aria-labelledby="modalMensagem" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered modal-lg">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="modalMensagem"><i class="bi bi-whatsapp"></i><strong>
                                            Enviar
                                            Mensagem - WhatsApp</strong></h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>

                                <div class="modal-body row g-3">
                                    <form action="{{url_for('salva_mensagem', id= cliente.id)}}" method="post">
                                        <div class="row">
                                            <div class="col-md-8">
                                                <div class="form-floating mb-3">
                                                    <input type="text" readonly class="form-control" id="floatingName"
                                                        name="nome" placeholder="Nome"
                                                        style="text-transform: uppercase;" required
                                                        value="{{cliente.nome}}">
                                                    <label for="floatingName"><strong>Nome</strong></label>
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <div class="form-floating mb-3">
                                                    <input type="tel" readonly id="floatingTelefone"
                                                        style="width: 200px;" class="form-control" id="tel"
                                                        name="telefone" placeholder="Somente Números" required
                                                        value="+55{{cliente.telefone}}">
                                                    <label for="floatingTelefone"><strong>Tel. de
                                                            Contato</strong></label>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-10">
                                                <h6 class="fw-bold">Regras:</h6>
                                                <ol>
                                                    <li><b>Nunca</b> cobrar no grupo;</li>
                                                    <li>Atualizar a planilha sempre que enviar ou receber contato;</li>
                                                    <li>Sempre poderá tirar a multa para pagamento imediato;</li>
                                                    <li class="fw-bold">Sempre pegar comprovante do pagamento;</li>
                                                    <li><b>Após 07 dias:</b> Começar o protocolo de ligação (duas vezes
                                                        por
                                                        dia)</li>
                                                    <li><b>Após de 01 semana</b> tentando ligar e não conseguindo,
                                                        passar o
                                                        caso para mim.</li>

                                                </ol>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="form-floating mb-3">
                                                    <input type="text" class="form-control" id="assuntoMensagem"
                                                        name="assuntoMensagem" placeholder="Assunto"
                                                        style="text-transform: uppercase;" required>
                                                    <label for="assuntoMensagem">Digite o assunto</label>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-8">
                                                <select class="form-select titulo_script_whatsapp{{cliente.id}}"
                                                    aria-label="Seleciona Script"
                                                    onchange="seleciona_texto_whatsapp({{cliente.id}})">
                                                </select>
                                            </div>
                                        </div>

                                        <div class="form-floating">
                                            <textarea class="form-control script_pronto_whatsapp{{cliente.id}}" required
                                                name="texto_mensagem" rows="3"></textarea>
                                            <label for="floatingSelect">Digite sua mensagem</label>
                                        </div>

                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary"
                                                data-bs-dismiss="modal">Sair</button>
                                            <button type="submit" id="envia"
                                                onclick="envia_zap({{cliente.telefone}},{{cliente.id}})"
                                                class="btn btn-success"><i class="bi bi-whatsapp"></i> Enviar
                                                WhatsApp</button>
                                        </div>

                                    </form>
                                </div>

                            </div>
                        </div>
                    </div>
                    <!--FIM MODAL-->

                    <!-- MODAL HISTÓRICO DE MENSAGENS -->
                    <div class="modal fade" id="modalHistorico{{cliente.id}}" tabindex="-1"
                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h1 class="modal-title fs-5" id="exampleModalLabel">Histórico de
                                        Mensagens</h1>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>

                                <div class="modal-body">
                                    <div class="row">
                                        <div class="col-auto"><button title="Enviar mensagem via WhatsApp"
                                                data-bs-toggle="modal" data-bs-target="#modalMessenger{{cliente.id}}"
                                                style="background: rgb(61,240,73);
                    background: radial-gradient(circle, rgba(61,240,73,1) 26%, rgba(33,101,19,1) 100%);"
                                                onclick="dados_scripts_whatsapp({{cliente.id}})"
                                                class="btn card_deal text-white"><i class="bi bi-whatsapp"></i>
                                                Enviar WhatsApp</button></div>

                                        <div class="col-auto"><button href="/sendemail/{{cliente.id}}"
                                                data-bs-toggle="modal" data-bs-target="#modalEmail{{cliente.id}}"
                                                onclick="dados_scripts_email({{cliente.id}})" style="background: rgb(61,92,240);
                    background: radial-gradient(circle, rgba(61,92,240,1) 26%, rgba(3,20,163,1) 100%);"
                                                title="Enviar Email para o Cliente {{cliente.nome}}"
                                                class="btn card_deal text-white"><i
                                                    class="bi bi-envelope-arrow-up-fill"></i> Enviar
                                                Email</button></div>
                                    </div>
                                    <br>
                                    <!--INÍCIO HISTÓRICO DE MENSAGENS/EMAIL-->
                                    {%for mensagens in cliente.cliente_mensagem%}
                                    <div class="row m-1">
                                        <div class="card_deal">
                                            <div class="col-auto">
                                                <span class="text-capitalize"><b>Enviado Via:</b>
                                                    {{mensagens.origem}}</span>
                                            </div>
                                            <div class="col-auto">
                                                <span><b>Tel. Contato:
                                                    </b>{{cliente.telefone}}</span>
                                            </div>
                                            <div class="col-auto">
                                                <span><b>E-mail: </b>{{cliente.email}}</span>
                                            </div>
                                            <div class="col-auto">
                                                <span><b>Data de envio:</b>
                                                    {{mensagens.data_envio}}</span>
                                            </div>
                                            <p class="text-capitalize"><b>Assunto:</b>
                                                {{mensagens.assunto}}</p>
                                            <p class="text-capitalize"><b>Texto:</b>
                                                {{mensagens.texto}}</p>
                                        </div>
                                    </div>
                                    <br>
                                    {%endfor%}
                                    <!--FINAL  HISTÓRICO DE MENSAGENS/EMAIL-->
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--FINAL MODAL HISTÓRICO DE MENSAGENS-->

                    <!-- Modal confirma exclusão -->
                    <div class="modal fade" id="modalConfirma{{cliente.id}}" tabindex="-1" aria-labelledby="confirma"
                        aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="confirma">Excluir Registro</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    Deseja realmente excluir o registro referente ao(a) Sr.(a) <b
                                        style="text-transform: capitalize;">{{cliente.nome}}</b>?
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"><i
                                            class="bi bi-x"></i>
                                        Não</button>
                                    <a type="button" href="{{url_for('delete',id =cliente.id)}}"
                                        class="btn btn-success"><i class="bi bi-check2"></i> Sim</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--FIM MODAL CONFIRMA EXCLUSÃO-->

                    <!-- MODAL EDITA CLIENTE -->
                    <div class="modal fade" id="modalEditar{{cliente.id}}" tabindex="-1"
                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h1 class="modal-title fs-5" id="exampleModalLabel">Editar
                                        Cadastro Cliente</h1>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>

                                <div class="modal-body">
                                    <!--INÍCIO FORM EDITA CLIENTE-->
                                    <form action="{{url_for('update_cliente', id= cliente.id)}}" method="post">
                                        <div class="row">
                                            <div class="col-md-4">
                                                <div class="form-floating mb-3">
                                                    <input type="text" class="form-control primeiro_contato_editado"
                                                        iname="primeiro_contato_editado" readonly
                                                        value="{{cliente.cliente_datacontato.primeiro_contato}}"
                                                        id="primeiro_contato" placeholder="Data Cadastro">
                                                    <label for="primeiro_contato">Data Cadastro</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="form-floating mb-3">
                                                <input type="text" class="form-control text-uppercase" id="nome"
                                                    name="nome_editado" value="{{cliente.nome}}" placeholder="Nome">
                                                <label for="nome">Nome</label>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-4">
                                                <div class="form-floating mb-3">
                                                    <input type="text" class="form-control" id="telefone"
                                                        value="{{cliente.telefone}}" name="telefone_editado"
                                                        placeholder="Telefone">
                                                    <label for="telefone">Telefone</label>
                                                </div>
                                            </div>

                                            <div class="col-md-8">
                                                <div class="form-floating mb-3">
                                                    <input type="email" class="form-control" id="email"
                                                        value="{{cliente.email}}" name="email_editado"
                                                        placeholder="Email">
                                                    <label for="floatingInput">Email</label>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-danger"
                                                data-bs-dismiss="modal">Sair</button>
                                            <button type="submit" class="btn btn-success">Salvar</button>
                                        </div>
                                    </form>
                                    <!--FINAL FORM EDITA CLIENTE-->
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--FINAL MODAL EDITA CLIENTE-->
                    {%endfor%}
                </div>

                <div class="col-md  m-1 pagamentos_pendentes" style="color: white!important;">
                    <!--TABELA PAGAMENTOS PENDENTES-->
                    <table class="table table-responsive" id="tabela_pagamentos_pendentes">
                        <thead>
                            <tr>
                                <th scope="col" style="background-color: #013a63!important;">
                                    <h6 class="text-center text-white fw-bold  titulo">Pagamento Pendente</h6>
                                    <div class="row colunas-dados" style="border-top-color: #d62828;"></div>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            {%for cliente in clientes_inadimplentes_anual%}
                            <tr>
                                <td style="background-color: #013a63!important;">
                                    <input type="text" hidden class="valor_multa{{cliente.cliente_dados_boleto.id}}"
                                        value="{{cliente.cliente_dados_boleto.valor_multa}}">
                                    <div class="col-md-4 dados_dias_vencido{{cliente.cliente_dados_boleto.id}}">

                                    </div>
                                    <div class="row linha-dados{{cliente.cliente_dados_boleto.id}} text-white card_deal text-start"
                                        data-bs-toggle="modal"
                                        data-bs-target="#modalPagamentoPendente{{cliente.cliente_dados_boleto.id}}"
                                        onclick="converte_data({{cliente.cliente_dados_boleto.id}})">
                                        <a href="{{cliente.cliente_dados_boleto.id}}" data-bs-toggle="modal"
                                            data-bs-target="#modalPagamentoPendente{{cliente.cliente_dados_boleto.id}}"
                                            class="texto-dados">Cliente:
                                            <span
                                                class="text-uppercase">{{cliente.cliente_dados_cliente.nome}}</span></a>
                                        {%if cliente.cliente_dados_mensagem == []%}
                                        <div class="col-md-4">
                                            <a href="{{cliente.cliente_dados_cliente.id}}" class="texto-dados"
                                                data-bs-toggle="modal"
                                                data-bs-target="#modalPagamentoPendente{{cliente.cliente_dados_boleto.id}}">Primeiro
                                                Contato: <span
                                                    class="data_ultimo_contato_leads_editado">{{cliente.cliente_dados_contato.primeiro_contato}}</span></a>
                                        </div>
                                        <div class="col-md-4">
                                            <a href="{{cliente.cliente_dados_boleto.id}}" class="texto-dados"
                                                data-bs-toggle="modal"
                                                data-bs-target="#modalPagamentoPendente{{cliente.cliente_dados_boleto.id}}">Último
                                                Contato: <span
                                                    class="data_ultimo_contato_leads_editado">{{cliente.cliente_dados_contato.ultimo_contato}}</span></a>
                                        </div>
                                        <div class="col-md-4">
                                            <a href="{{cliente.cliente_dados_boleto.id}}" class="texto-dados"
                                                data-bs-toggle="modal"
                                                data-bs-target="#modalPagamentoPendente{{cliente.cliente_dados_boleto.id}}">Próximo
                                                Contato: {{cliente.cliente_dados_contato.proximo_contato}}</a>
                                        </div>

                                        <div class="col-md-auto">
                                            <a href="{{cliente.cliente_dados_boleto.id}}" class="texto-dados"
                                                data-bs-toggle="modal"
                                                data-bs-target="#modalPagamentoPendente{{cliente.cliente_dados_boleto.id}}">Boleto
                                                N.:
                                                {{cliente.cliente_dados_boleto.numero_boleto}}
                                            </a>
                                        </div>
                                        <div class="col-md-auto">
                                            <a href="{{cliente.cliente_dados_boleto.id}}" class="texto-dados"
                                                data-bs-toggle="modal"
                                                data-bs-target="#modalPagamentoPendente{{cliente.cliente_dados_boleto.id}}">Valor
                                                Boleto: R$
                                                {{cliente.cliente_dados_boleto.valor}}
                                            </a>
                                        </div>
                                        <div class="col-md-auto">
                                            <a href="{{cliente.cliente_dados_boleto.id}}"
                                                class="texto-dados valor_multa{{cliente.cliente_dados_boleto.id}}"
                                                data-bs-toggle="modal"
                                                data-bs-target="#modalPagamentoPendente{{cliente.cliente_dados_boleto.id}}">Valor
                                                Multa: R$
                                                {{cliente.cliente_dados_boleto.valor_multa}}
                                            </a>


                                        </div>

                                        <div class="col-md-auto dados_dias_vencido{{cliente.cliente_dados_boleto.id}}">

                                        </div>

                                        <a href="{{cliente.cliente_dados_boleto.id}}" class="texto-dados"
                                            data-bs-toggle="modal"
                                            data-bs-target="#modalPagamentoPendente{{cliente.cliente_dados_boleto.id}}">Meio
                                            de
                                            Contato: Não houve
                                            troca de mensagens</a>

                                        {%else%}

                                        <div class="col-md-4">
                                            <a href="{{cliente.cliente_dados_boleto.id}}" class="texto-dados"
                                                data-bs-toggle="modal"
                                                data-bs-target="#modalPagamentoPendente{{cliente.cliente_dados_boleto.id}}">Primeiro
                                                Contato: <span
                                                    class="data_ultimo_contato_leads_editado">{{cliente.cliente_dados_contato.primeiro_contato}}</span></a>
                                        </div>
                                        <div class="col-md-4">
                                            <a href="{{cliente.cliente_dados_boleto.id}}" class="texto-dados"
                                                data-bs-toggle="modal"
                                                data-bs-target="#modalPagamentoPendente{{cliente.cliente_dados_boleto.id}}">Último
                                                Contato: <span
                                                    class="data_ultimo_contato_leads_editado">{{cliente.cliente_dados_mensagem[-1].data_envio}}</span></a>
                                        </div>
                                        <div class="col-md-4">
                                            <a href="{{cliente.cliente_dados_boleto.id}}" class="texto-dados"
                                                data-bs-toggle="modal"
                                                data-bs-target="#modalPagamentoPendente{{cliente.cliente_dados_boleto.id}}">Próximo
                                                Contato: {{cliente.cliente_dados_contato.proximo_contato}}</a>
                                        </div>
                                        <div class="col-md-auto">
                                            <a href="{{cliente.cliente_dados_boleto.id}}" class="texto-dados"
                                                data-bs-toggle="modal"
                                                data-bs-target="#modalPagamentoPendente{{cliente.cliente_dados_boleto.id}}">Boleto
                                                N.:
                                                {{cliente.cliente_dados_boleto.numero_boleto}}
                                            </a>
                                        </div>
                                        <div class="col-md-auto">
                                            <a href="{{cliente.cliente_dados_boleto.id}}" class="texto-dados"
                                                data-bs-toggle="modal"
                                                data-bs-target="#modalPagamentoPendente{{cliente.cliente_dados_boleto.id}}">Valor
                                                Boleto: R$
                                                {{cliente.cliente_dados_boleto.valor}}
                                            </a>
                                        </div>
                                        <div class="col-md-auto dados_multa">
                                            <a href="{{cliente.cliente_dados_boleto.id}}" class="texto-dados"
                                                data-bs-toggle="modal"
                                                data-bs-target="#modalPagamentoPendente{{cliente.cliente_dados_boleto.id}}">Valor
                                                Multa: R$
                                                {{cliente.cliente_dados_boleto.valor_multa}}
                                            </a>

                                            <input type="text" class="valor_multa{{cliente.cliente_dados_boleto.id}}"
                                                hidden value="{{cliente.cliente_dados_boleto.valor_multa}}">
                                        </div>
                                        <a href="{{cliente.cliente_dados_boleto.id}}" class="texto-dados"
                                            data-bs-toggle="modal"
                                            data-bs-target="#modalPagamentoPendente{{cliente.cliente_dados_boleto.id}}">Meio
                                            de
                                            Contato:
                                            {{cliente.cliente_dados_mensagem[-1].origem}}</a>
                                        {%endif%}

                                        <a href="{{cliente.cliente_dados_boleto.id}}" class="fw-bold"
                                            style="color:#d62828;" data-bs-toggle="modal"
                                            data-bs-target="#modalPagamentoPendente{{cliente.cliente_dados_boleto.id}}">Data
                                            Vencimento:
                                            {{cliente.cliente_dados_boleto.data_vencimento}}</a>


                                        <input type="text" hidden
                                            class="juros_diarios{{cliente.cliente_dados_boleto.id}}"
                                            value="{{cliente.cliente_dados_boleto.juros_diarios}}">

                                    </div>

                                    <!-- Modal -->
                                    <div class="modal fade"
                                        id="modalAlteraVencimento{{cliente.cliente_dados_boleto.id}}" tabindex="-1"
                                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-centered">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h1 class="modal-title fs-5" id="exampleModalLabel">Alterar Data
                                                        Vencimento - Boleto
                                                        {{cliente.cliente_dados_boleto.numero_boleto}} </h1>
                                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                        aria-label="Close"></button>
                                                </div>
                                                <div class="modal-body">
                                                    <div class="row">
                                                        <div class='col-md-12'>
                                                            <form
                                                                action="{{url_for('alterar_data_vencimento', boleto_id = cliente.cliente_dados_boleto.id)}}"
                                                                method='post'>
                                                                <div class="input-group mb-3">
                                                                    <input type="date" class="form-control"
                                                                        name="data_vencimento_atualizada"
                                                                        placeholder="Data Vencimento"
                                                                        aria-label="Recipient's username"
                                                                        aria-describedby="button-addon2">
                                                                    <button class="btn btn-success" type="submit"
                                                                        id="button-addon2">Salvar</button>
                                                                </div>
                                                            </form>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-secondary"
                                                        data-bs-dismiss="modal">Sair</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Modal da Tabela Pagamentos Pendentes -->
                                    <div class="modal fade"
                                        id="modalPagamentoPendente{{cliente.cliente_dados_boleto.id}}" tabindex="-1"
                                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-centered modal-xl">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h1 class="modal-title fs-5 text-danger fw-bold"
                                                        id="exampleModalLabel">Pagamento
                                                        Pendente <i class="bi bi-hourglass-split"></i></h1>
                                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                        aria-label="Close"></button>
                                                </div>
                                                <div class="modal-body" style="color:black!important">
                                                    <!--INÍCIO CARD CLIENTE-->
                                                    <div class=" card_dados m-1"
                                                        id="dados_card{{cliente.cliente_dados_cliente.id}}">
                                                        <div class="card-body">
                                                            <div class="row">
                                                                <div class="col-md-8">
                                                                    <h5 class="card-title nome_cliente"
                                                                        id="nome_cliente">
                                                                        Cliente: <span
                                                                            style="text-transform: capitalize;">{{cliente.cliente_dados_cliente.nome}}</span>
                                                                    </h5>
                                                                </div>


                                                                <div class="col-auto">
                                                                    <a type="button"
                                                                        href="/home/historico/{{cliente.cliente_dados_cliente.id}}"
                                                                        data-bs-toggle="modal"
                                                                        data-bs-target="#modalHistorico{{cliente.cliente_dados_boleto.id}}"
                                                                        style="cursor: pointer; background: rgb(217,82,42);
                             background: linear-gradient(0deg, rgba(217,82,42,1) 35%, rgba(235,117,38,1) 65%); color: white;"
                                                                        class="btn card_deal tooltip-test"
                                                                        title="Histórico de Mensagens"><i
                                                                            class="bi bi-clock-history"></i></a>

                                                                </div>
                                                                <div class="col-auto">
                                                                    <a type="button"
                                                                        href="/home/edita_registro/{{cliente.cliente_dados_cliente.id}}"
                                                                        data-bs-toggle="modal"
                                                                        data-bs-target="#modalEditar{{cliente.cliente_dados_cliente.id}}"
                                                                        style="cursor: pointer; rgb(61,92,240);
                             background: radial-gradient(circle, rgba(61,92,240,1) 26%, rgba(3,20,163,1) 100%); color:white;"
                                                                        class="btn card_deal tooltip-test"
                                                                        title="Editar registro do Cliente"><i
                                                                            class="bi bi-pencil-square"></i></a>

                                                                </div>
                                                                <div class="col-auto">
                                                                    <a type="button"
                                                                        href="/home/apaga_registro/{{cliente.cliente_dados_cliente.id}}"
                                                                        data-bs-toggle="modal"
                                                                        data-bs-target="#modalConfirma{{cliente.cliente_dados_boleto.id}}"
                                                                        style="cursor: pointer;rgb(214,50,70);
                             background: radial-gradient(circle, rgba(214,50,70,1) 26%, rgba(163,3,3,1) 100%); color: white;"
                                                                        class="btn card_deal tooltip-test"
                                                                        title="Excluir registro"><i
                                                                            class="bi bi-trash3-fill"></i></a>

                                                                </div>
                                                            </div>

                                                            <div class="row float-start">
                                                                <input type="number"
                                                                    value="{{cliente.cliente_dados_cliente.id}}" hidden
                                                                    class="cliente_id">

                                                            </div>

                                                            <div class='row'>
                                                                <div class="col-md-3">Tel.: <span
                                                                        class="tooltip-test">{{cliente.cliente_dados_cliente.telefone}}</span>
                                                                </div>

                                                                <div class="col-md-6">Email: <span
                                                                        class="tooltip-test">{{cliente.cliente_dados_cliente.email}}</a>
                                                                </div>
                                                            </div>

                                                            <div class='row'>
                                                                <div class="col-md-6">
                                                                    <div class="form-floating mb-3">
                                                                        <input type="text" readonly
                                                                            class="form-control primeiro_contato "
                                                                            id="primeiro_contato"
                                                                            placeholder="Primeiro Contato"
                                                                            value='{{cliente.cliente_dados_contato.primeiro_contato}}'>
                                                                        <label for="primeiro_contato">Primeiro
                                                                            Contato</label>
                                                                    </div>
                                                                </div>

                                                                {%if cliente.cliente_dados_contato.proximo_contato !=
                                                                null %}
                                                                <div class='col-md-6'>

                                                                    <div id="mais_cinco_dias{{cliente.cliente_dados_cliente.id}}"
                                                                        class="row">
                                                                        <form
                                                                            action="{{url_for('update_proximocontato', cliente_id= cliente.cliente_dados_cliente.id, boleto_id = cliente.cliente_dados_boleto.id)}}"
                                                                            method='post'>
                                                                            <div class="input-group form-floating mb-3">
                                                                                <input type="text" readonly
                                                                                    class="form-control cliente_proximocontato "
                                                                                    id="proximo_contato" placeholder="Próximo
                                                             Contato" name="adiciona_cinco_dias" readonly
                                                                                    class="form-control cliente_proximocontato"
                                                                                    value='{{cliente.cliente_dados_contato.proximo_contato}}'>
                                                                                <button type='submit'
                                                                                    class='btn_salva btn btn-success'
                                                                                    data-dias="5"
                                                                                    onclick="contato_cinco_dias({{cliente.cliente_dados_cliente.id}})"
                                                                                    title='Adicionar Cinco Dias'>
                                                                                    +5
                                                                                </button>
                                                                                <label for="proximo_contato">Próximo
                                                                                    Contato</label>

                                                                            </div>
                                                                        </form>
                                                                    </div>
                                                                </div>
                                                                {%endif%}
                                                            </div>

                                                            <div class="row">
                                                                <div class="col-md-6">
                                                                    <div class="form-floating mb-3">
                                                                        <input type="text"
                                                                            class="form-control data_final data_ultimo_contato_leads"
                                                                            readonly placeholder="Último Contato"
                                                                            value='{{cliente.cliente_dados_contato.ultimo_contato}}'>
                                                                        <label for="ultimo_contato">Último
                                                                            Contato</label>
                                                                    </div>
                                                                </div>

                                                                <div id="input_date{{cliente.cliente_dados_cliente.id}}"
                                                                    class="col-md-6">
                                                                    <form
                                                                        action="{{url_for('update_ultimocontato',cliente_id = cliente.cliente_dados_cliente.id, boleto_id = cliente.cliente_dados_boleto.id)}}"
                                                                        method='post'>

                                                                        <div class="input-group form-floating mb-3">
                                                                            <input type='date'
                                                                                placeholder="Alterar Último Contato"
                                                                                class='form-control data_modificada div_data'
                                                                                required name='ultimo_contato'>
                                                                            <button type='submit'
                                                                                class='btn_salva btn btn-success'
                                                                                title='Alterar Data'>
                                                                                <i class='bi bi-check-square'></i>
                                                                            </button>

                                                                            <label for="ultimo_contato">Alterar
                                                                                Último
                                                                                Contato</label>

                                                                        </div>
                                                                    </form>
                                                                </div>
                                                            </div>

                                                            <div class='row btn_dias'>

                                                            </div>

                                                            <br>

                                                            <div class='prox_contato'> </div>

                                                            <div class="row">
                                                                <div class="col-md-4">
                                                                    <h6>Número Boleto:
                                                                        {{cliente.cliente_dados_boleto.numero_boleto}}
                                                                    </h6>
                                                                </div>

                                                                <div class="col-md-4">
                                                                    <h6>Valor Boleto: R$
                                                                        {{cliente.cliente_dados_boleto.valor}}</h6>
                                                                </div>

                                                                <div
                                                                    class="col-md-4 div_data_vencimento{{cliente.cliente_dados_boleto.id}}">
                                                                    <h6 style="cursor: pointer;"
                                                                        title="Dê dois click`s para alterar a data de vencimento"
                                                                        ondblclick="alterar_data_vencimento({{cliente.cliente_dados_boleto.id}})"
                                                                        class="data_vencimento_boleto{{cliente.cliente_dados_boleto.id}}">
                                                                        Data Vencimento:
                                                                        <span>{{cliente.cliente_dados_boleto.data_vencimento}}</span>
                                                                    </h6>
                                                                </div>

                                                                <div
                                                                    class="div_input{{cliente.cliente_dados_boleto.id}}">
                                                                    <input type="text" hidden
                                                                        class="data_vencimento{{cliente.cliente_dados_boleto.id}}"
                                                                        value="{{cliente.cliente_dados_boleto.data_vencimento}}">
                                                                </div>


                                                            </div>

                                                            <div class="row">
                                                                <div class="col-md-4">
                                                                    <h6>Valor Multa: R$
                                                                        {{cliente.cliente_dados_boleto.valor_multa}}
                                                                    </h6>

                                                                </div>

                                                                <div class="col-md-4">
                                                                    <h6>Valor Juros 1%: R$
                                                                        {{cliente.cliente_dados_boleto.juros_diarios}}
                                                                    </h6>

                                                                </div>

                                                                <input type="text"
                                                                    value="{{cliente.cliente_dados_boleto.valor}}"
                                                                    hidden
                                                                    class="valor_boleto{{cliente.cliente_dados_boleto.id}}">

                                                            </div>

                                                            <div class="row">

                                                                <div
                                                                    class="col-md-4 dados_dias_vencido{{cliente.cliente_dados_boleto.id}}">

                                                                </div>

                                                                <div class="col-md-4">
                                                                    <h6
                                                                        class="valor_multa_atualizada{{cliente.cliente_dados_boleto.id}}">
                                                                    </h6>
                                                                </div>

                                                                <div
                                                                    class="col-md-4 valor_atualizado{{cliente.cliente_dados_boleto.id}}">

                                                                </div>
                                                            </div>

                                                            <br>

                                                            <div class='row justificativa'>
                                                                <div
                                                                    class="col-md-6 div_justificativa{{cliente.cliente_dados_boleto.id}}">
                                                                    {%if cliente.cliente_dados_topico.topico == '' %}
                                                                    <div class="col-md-4">
                                                                        <h6>Motivo do não pagamento:
                                                                            <div class="input-group">
                                                                                <input type="text"
                                                                                    placeholder="Digite o motivo do não pagamento..."
                                                                                    onkeyup="get_motivos({{cliente.cliente_dados_boleto.id}})"
                                                                                    class="form-control seleciona_motivo{{cliente.cliente_dados_boleto.id}}">

                                                                                <button
                                                                                    onclick="atualizar_motivo({{cliente.cliente_dados_boleto.id}})"
                                                                                    class="btn btn-success"
                                                                                    type="submit">Salvar</button>
                                                                            </div>
                                                                        </h6>

                                                                    </div>
                                                                    {%else%}
                                                                    <h6>Motivo do não pagamento:
                                                                        <span style="cursor: pointer;"
                                                                            title="Dê dois click`s para inserir ou alterar o motivo"
                                                                            ondblclick="exibir_input({{cliente.cliente_dados_boleto.id}})"
                                                                            class="fw-bold muda_motivo{{cliente.cliente_dados_boleto.id}}">{{cliente.cliente_dados_topico.topico}}</span>
                                                                    </h6>
                                                                    {%endif%}
                                                                </div>

                                                                <div
                                                                    class="col-md-6 div_observacao{{cliente.cliente_dados_boleto.id}}">
                                                                    {%if cliente.cliente_dados_boleto.observacoes ==
                                                                    None%}
                                                                    <h6 style="cursor: pointer;"
                                                                        title="Dê dois click`s para inserir uma observação"
                                                                        ondblclick="inserir_observacao({{cliente.cliente_dados_boleto.id}})"
                                                                        class="insere_obs{{cliente.cliente_dados_boleto.id}}">
                                                                        Observações: Não possui observação</h6>
                                                                    {%else%}
                                                                    <h6>Observações:
                                                                        {{cliente.cliente_dados_boleto.observacoes}}
                                                                    </h6>
                                                                    {%endif%}
                                                                </div>
                                                            </div>


                                                            <div class="row">
                                                                <div class="col-auto">
                                                                    <h6 class="card-text status_cliente{{cliente.id}}"
                                                                        style="color: red;">Status:
                                                                        {{cliente.cliente_dados_status.status}}</h6>
                                                                </div>
                                                                <div class="col-auto">
                                                                    <h6 class="blob red"></h6>
                                                                </div>
                                                            </div>
                                                            <div
                                                                class="row div-btn{{cliente.cliente_dados_cliente.id}}">
                                                                <div class="col-md-auto m-1">
                                                                    <button
                                                                        class="btn btn-success btn_contratou{{cliente.id}}"
                                                                        onclick="confirmar_pagamento({{cliente.cliente_dados_cliente.id}},{{cliente.cliente_dados_boleto.id}},{{cliente.cliente_dados_boleto.valor}})">Pagamento
                                                                        Confirmado</button>
                                                                </div>
                                                            </div>

                                                        </div>
                                                        <!--FIM CARD CLIENTE-->
                                                    </div>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-secondary"
                                                        data-bs-dismiss="modal">Sair</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>



                                    <!-- MODAL HISTÓRICO DE TEXTOS -->
                                    <div class="modal fade"
                                        id="modalHistoricoTextos{{cliente.cliente_dados_cliente.id}}" tabindex="-1"
                                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h1 class="modal-title fs-5" id="exampleModalLabel">Histórico de
                                                        Textos - <span
                                                            class="text-capitalize">{{cliente.cliente_dados_topico.topico}}</span>
                                                    </h1>
                                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                        aria-label="Close"></button>
                                                </div>

                                                <div class="modal-body">
                                                    <!--INÍCIO FORM EDITA CLIENTE-->
                                                    {%for texto in textos%}
                                                    <div class="row m-1">
                                                        <div class="card_deal">

                                                            <br>
                                                            <div class="row">
                                                                {%if texto.texto_topico.topico ==
                                                                cliente.cliente_topico.topico%}
                                                                <p class="text-capitalize lh-base"><b>Texto:</b>
                                                                    {{texto.texto}}</p>
                                                                {%endif%}
                                                            </div>

                                                        </div>
                                                    </div>
                                                    <br>
                                                    {%endfor%}
                                                    <!--FINAL FORM EDITA CLIENTE-->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!--FINAL MODAL HISTÓRICO DE MENSAGENS-->

                                    <!-- Modal EMAIL -->
                                    <div class="modal fade modal_msg"
                                        id="modalEmail{{cliente.cliente_dados_cliente.id}}" tabindex="-1"
                                        aria-labelledby="modalMensagem" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-centered modal-lg">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title" id="modalMensagem"><i
                                                            class="bi bi-envelope-arrow-up-fill"></i><strong> Enviar
                                                            Email</strong></h5>
                                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                        aria-label="Close"></button>
                                                </div>
                                                <div class="modal-body row g-3">

                                                    <form
                                                        action="{{url_for('envia_email',cliente_id=cliente.cliente_dados_cliente.id, boleto_id = cliente.cliente_dados_boleto.id)}}"
                                                        method="POST">
                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <div class="form-floating mb-3">
                                                                    {%if current_user.is_authenticated %}
                                                                    <input type="text" hidden
                                                                        name="email_usuario_logado"
                                                                        value="{{current_user.email}}">
                                                                    {%endif%}
                                                                    <input type="text" readonly class="form-control"
                                                                        id="floatingName" name="nome" placeholder="Nome"
                                                                        style="text-transform: uppercase;" required
                                                                        value="{{cliente.nome}}">
                                                                    <label
                                                                        for="floatingName"><strong>Nome</strong></label>
                                                                </div>
                                                            </div>

                                                            <div class="col-md-4">
                                                                <div class="form-floating mb-3">
                                                                    <input type="text" readonly id="enderecoEmail"
                                                                        style="width: 300px;" class="form-control"
                                                                        id="email" name="email" required
                                                                        value="{{cliente.email}}">
                                                                    <label
                                                                        for="enderecoEmail"><strong>Email</strong></label>
                                                                </div>
                                                            </div>

                                                        </div>

                                                        <div class="row">
                                                            <div class="col-md-10">
                                                                <h6 class="fw-bold">Regras:</h6>
                                                                <ol>
                                                                    <li><b>Nunca</b> cobrar no grupo;</li>
                                                                    <li>Atualizar a planilha sempre que enviar ou
                                                                        receber contato;</li>
                                                                    <li>Sempre poderá tirar a multa para pagamento
                                                                        imediato;</li>
                                                                    <li class="fw-bold">Sempre pegar comprovante do
                                                                        pagamento;</li>
                                                                    <li><b>Após 07 dias:</b> Começar o protocolo de
                                                                        ligação (duas vezes
                                                                        por
                                                                        dia)</li>
                                                                    <li><b>Após de 01 semana</b> tentando ligar e não
                                                                        conseguindo,
                                                                        passar o
                                                                        caso para mim.</li>

                                                                </ol>
                                                            </div>
                                                        </div>

                                                        <div class="row">
                                                            <div class="col-md-10">
                                                                <div class="form-floating mb-3">
                                                                    <input type="text" id="assuntoEmail"
                                                                        style="width: 350px;" class="form-control"
                                                                        id="assunto" name="assunto_email" required>
                                                                    <label
                                                                        for="assuntoEmail"><strong>Assunto</strong></label>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="row">
                                                            <div class="col-md-8">
                                                                <select
                                                                    class="form-select titulo_script_gmail{{cliente.id}}"
                                                                    aria-label="Seleciona Script"
                                                                    onchange="seleciona_texto_gmail({{cliente.id}})">

                                                                </select>
                                                            </div>
                                                        </div>

                                                        <div class="form-floating">
                                                            <textarea
                                                                class="form-control script_pronto_gmail{{cliente.id}}"
                                                                name="texto_mensagem" rows="3"></textarea>
                                                            <label for="floatingSelect">Digite sua mensagem</label>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <button type="button" class="btn btn-secondary"
                                                                data-bs-dismiss="modal">Sair</button>
                                                            <button type="submit" id="envia" data-bs-toggle="modal"
                                                                data-bs-target="#loading" class="btn btn-success"><i
                                                                    class="bi bi-envelope-arrow-up-fill"></i> Enviar
                                                                Email</button>
                                                        </div>
                                                    </form>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                    <!--FIM MODAL EMAIL-->

                                    <!-- Modal Messenger -->
                                    <div class="modal fade modal_msg"
                                        id="modalMessenger{{cliente.cliente_dados_cliente.id}}" tabindex="-1"
                                        aria-labelledby="modalMensagem" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-centered modal-lg">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title" id="modalMensagem"><i
                                                            class="bi bi-whatsapp"></i><strong>
                                                            Enviar
                                                            Mensagem - WhatsApp</strong></h5>
                                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                        aria-label="Close"></button>
                                                </div>

                                                <div class="modal-body row g-3">
                                                    <form
                                                        action="{{url_for('salva_mensagem', cliente_id= cliente.cliente_dados_cliente.id, boleto_id = cliente.cliente_dados_boleto.id)}}"
                                                        method="post">
                                                        <div class="row">
                                                            <div class="col-md-8">
                                                                <div class="form-floating mb-3">
                                                                    <input type="text" readonly class="form-control"
                                                                        id="floatingName" name="nome" placeholder="Nome"
                                                                        style="text-transform: uppercase;" required
                                                                        value="{{cliente.cliente_dados_cliente.nome}}">
                                                                    <label
                                                                        for="floatingName"><strong>Nome</strong></label>
                                                                </div>
                                                            </div>

                                                            <div class="col-md-4">
                                                                <div class="form-floating mb-3">
                                                                    <input type="tel" readonly id="floatingTelefone"
                                                                        style="width: 200px;" class="form-control"
                                                                        id="tel" name="telefone"
                                                                        placeholder="Somente Números" required
                                                                        value="+55{{cliente.cliente_dados_cliente.telefone}}">
                                                                    <label for="floatingTelefone"><strong>Tel. de
                                                                            Contato</strong></label>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="row">
                                                            <div class="col-md-10">
                                                                <h6 class="fw-bold">Regras:</h6>
                                                                <ol>
                                                                    <li><b>Nunca</b> cobrar no grupo;</li>
                                                                    <li>Atualizar a planilha sempre que enviar ou
                                                                        receber contato;</li>
                                                                    <li>Sempre poderá tirar a multa para pagamento
                                                                        imediato;</li>
                                                                    <li class="fw-bold">Sempre pegar comprovante do
                                                                        pagamento;</li>
                                                                    <li><b>Após 07 dias:</b> Começar o protocolo de
                                                                        ligação (duas vezes
                                                                        por
                                                                        dia)</li>
                                                                    <li><b>Após de 01 semana</b> tentando ligar e não
                                                                        conseguindo,
                                                                        passar o
                                                                        caso para mim.</li>

                                                                </ol>
                                                            </div>
                                                        </div>

                                                        <div class="row">
                                                            <div class="col-md-12">
                                                                <div class="form-floating mb-3">
                                                                    <input type="text" class="form-control"
                                                                        id="assuntoMensagem" name="assuntoMensagem"
                                                                        placeholder="Assunto"
                                                                        style="text-transform: uppercase;" required>
                                                                    <label for="assuntoMensagem">Digite o
                                                                        assunto</label>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="row">
                                                            <div class="col-md-8">
                                                                <select
                                                                    class="form-select titulo_script_whatsapp{{cliente.cliente_dados_cliente.id}}"
                                                                    aria-label="Seleciona Script"
                                                                    onchange="seleciona_texto_whatsapp({{cliente.cliente_dados_cliente.id}})">
                                                                </select>
                                                            </div>
                                                        </div>

                                                        <div class="form-floating">
                                                            <textarea
                                                                class="form-control script_pronto_whatsapp{{cliente.cliente_dados_cliente.id}}"
                                                                required name="texto_mensagem" rows="3"></textarea>
                                                            <label for="floatingSelect">Digite sua mensagem</label>
                                                        </div>

                                                        <div class="modal-footer">
                                                            <button type="button" class="btn btn-secondary"
                                                                data-bs-dismiss="modal">Sair</button>
                                                            <button type="submit" id="envia"
                                                                onclick="envia_zap({{cliente.cliente_dados_cliente.telefone}},{{cliente.cliente_dados_cliente.id}})"
                                                                class="btn btn-success"><i class="bi bi-whatsapp"></i>
                                                                Enviar
                                                                WhatsApp</button>
                                                        </div>

                                                    </form>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                    <!--FIM MODAL-->

                                    <!-- MODAL HISTÓRICO DE MENSAGENS -->
                                    <div class="modal fade" id="modalHistorico{{cliente.cliente_dados_boleto.id}}"
                                        tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h1 class="modal-title fs-5" id="exampleModalLabel">Histórico de
                                                        Mensagens - <span
                                                            class="text-uppercase">{{cliente.cliente_dados_cliente.nome}}</span>
                                                    </h1>
                                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                        aria-label="Close"></button>
                                                </div>

                                                <div class="modal-body">
                                                    <div class="row">
                                                        <div class="col-auto"><button
                                                                title="Enviar mensagem via WhatsApp"
                                                                data-bs-toggle="modal"
                                                                data-bs-target="#modalMessenger{{cliente.cliente_dados_cliente.id}}"
                                                                style="background: rgb(61,240,73);
                    background: radial-gradient(circle, rgba(61,240,73,1) 26%, rgba(33,101,19,1) 100%);"
                                                                onclick="dados_scripts_whatsapp({{cliente.cliente_dados_cliente.id}})"
                                                                class="btn card_deal text-white"><i
                                                                    class="bi bi-whatsapp"></i>
                                                                Enviar WhatsApp</button></div>

                                                        <div class="col-auto"><button
                                                                href="/sendemail/{{cliente.cliente_dados_cliente.id}}"
                                                                data-bs-toggle="modal"
                                                                data-bs-target="#modalEmail{{cliente.cliente_dados_cliente.id}}"
                                                                onclick="dados_scripts_email({{cliente.cliente_dados_cliente.id}})"
                                                                style="background: rgb(61,92,240);
                    background: radial-gradient(circle, rgba(61,92,240,1) 26%, rgba(3,20,163,1) 100%);"
                                                                title="Enviar Email para o Cliente {{cliente.cliente_dados_cliente.nome}}"
                                                                class="btn card_deal text-white"><i
                                                                    class="bi bi-envelope-arrow-up-fill"></i> Enviar
                                                                Email</button></div>
                                                    </div>
                                                    <br>
                                                    <!--INÍCIO HISTÓRICO DE MENSAGENS/EMAIL-->
                                                    {%for mensagens in cliente.cliente_dados_mensagem%}
                                                    <div class="row m-1">
                                                        <div class="card_deal">
                                                            <div class="col-auto">
                                                                <span class="text-capitalize"><b>Enviado Via:</b>
                                                                    {{mensagens.origem}}</span>
                                                            </div>
                                                            <div class="col-auto">
                                                                <span><b>Tel. Contato:
                                                                    </b>{{cliente.cliente_dados_cliente.telefone}}</span>
                                                            </div>
                                                            <div class="col-auto">
                                                                <span><b>E-mail:
                                                                    </b>{{cliente.cliente_dados_cliente.email}}</span>
                                                            </div>
                                                            <div class="col-auto">
                                                                <span><b>Data de envio:</b>
                                                                    {{mensagens.data_envio}}</span>
                                                            </div>
                                                            <p class="text-capitalize"><b>Assunto:</b>
                                                                {{mensagens.assunto}}</p>
                                                            <p class="text-capitalize"><b>Texto:</b>
                                                                {{mensagens.texto}}</p>
                                                        </div>
                                                    </div>
                                                    <br>
                                                    {%endfor%}
                                                    <!--FINAL  HISTÓRICO DE MENSAGENS/EMAIL-->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!--FINAL MODAL HISTÓRICO DE MENSAGENS-->

                                    <!-- Modal confirma exclusão -->
                                    <div class="modal fade" id="modalConfirma{{cliente.cliente_dados_boleto.id}}"
                                        tabindex="-1" aria-labelledby="confirma" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-centered">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title" id="confirma">Excluir Registro</h5>
                                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                        aria-label="Close"></button>
                                                </div>
                                                <div class="modal-body">
                                                    Deseja realmente excluir o registro referente ao(a) Sr.(a) <b
                                                        style="text-transform: capitalize;">{{cliente.cliente_dados_cliente.nome}}</b>?
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-secondary"
                                                        data-bs-dismiss="modal"><i class="bi bi-x"></i>
                                                        Não</button>

                                                    <form
                                                        action="{{url_for('delete', cliente_id =cliente.cliente_dados_cliente.id, boleto_id = cliente.cliente_dados_boleto.id)}}"
                                                        method="post">
                                                        <button type="submit" data-bs-toggle="modal"
                                                            data-bs-target="#modalAguardaExclusaoCliente{{cliente.cliente_dados_cliente.id}}"
                                                            class="btn btn-success"><i class="bi bi-check2"></i>
                                                            Sim</button>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!--FIM MODAL CONFIRMA EXCLUSÃO-->




                                    <!-- Modal AGUARDA exclusão Cliente -->
                                    <div class="modal fade"
                                        id="modalAguardaExclusaoCliente{{cliente.cliente_dados_cliente.id}}"
                                        data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
                                        aria-labelledby="staticBackdropLabel" aria-hidden="true">
                                        <div class="modal-dialog modal-sm modal-dialog-centered">
                                            <div class="modal-content bg-danger">
                                                <div class="modal-body">
                                                    <span class="spinner-border spinner-border-sm text-light"
                                                        aria-hidden="true"></span>
                                                    <span role="status" class="text-white">Aguarde! Excluindo registro
                                                        do cliente
                                                        {{cliente.cliente_dados_cliente.nome}}...</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Fim Modal AGUARDA exclusão Cliente -->


                                    <!-- MODAL EDITA CLIENTE -->
                                    <div class="modal fade" id="modalEditar{{cliente.cliente_dados_cliente.id}}"
                                        tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-centered">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h1 class="modal-title fs-5" id="exampleModalLabel">Editar
                                                        Cadastro Cliente - {{cliente.cliente_dados_cliente.nome}} </h1>
                                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                        aria-label="Close"></button>
                                                </div>

                                                <div class="modal-body">
                                                    <!--INÍCIO FORM EDITA CLIENTE-->
                                                    <form
                                                        action="{{url_for('update_cliente', id= cliente.cliente_dados_cliente.id)}}"
                                                        method="post">
                                                        <div class="row">
                                                            <div class="col-md-4">
                                                                <div class="form-floating mb-3">
                                                                    <input type="text"
                                                                        class="form-control primeiro_contato_editado"
                                                                        iname="primeiro_contato_editado" readonly
                                                                        value="{{cliente.cliente_dados_contato.primeiro_contato}}"
                                                                        id="primeiro_contato"
                                                                        placeholder="Data Cadastro">
                                                                    <label for="primeiro_contato">Data Cadastro</label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="form-floating mb-3">
                                                                <input type="text" class="form-control text-uppercase"
                                                                    id="nome" name="nome_editado"
                                                                    value="{{cliente.cliente_dados_cliente.nome}}"
                                                                    placeholder="Nome">
                                                                <label for="nome">Nome</label>
                                                            </div>
                                                        </div>

                                                        <div class="row">
                                                            <div class="col-md-4">
                                                                <div class="form-floating mb-3">
                                                                    <input type="text" class="form-control"
                                                                        id="telefone"
                                                                        value="{{cliente.cliente_dados_cliente.telefone}}"
                                                                        name="telefone_editado" placeholder="Telefone">
                                                                    <label for="telefone">Telefone</label>
                                                                </div>
                                                            </div>

                                                            <div class="col-md-8">
                                                                <div class="form-floating mb-3">
                                                                    <input type="email" class="form-control" id="email"
                                                                        value="{{cliente.cliente_dados_cliente.email}}"
                                                                        name="email_editado" placeholder="Email">
                                                                    <label for="floatingInput">Email</label>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="modal-footer">
                                                            <button type="button" class="btn btn-danger"
                                                                data-bs-dismiss="modal">Sair</button>
                                                            <button type="submit" data-bs-toggle="modal"
                                                                data-bs-target="#modalAguardaAtualiza{{cliente.cliente_dados_cliente.id}}"
                                                                class="btn btn-success">Salvar</button>
                                                        </div>
                                                    </form>
                                                    <!--FINAL FORM EDITA CLIENTE-->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!--FINAL MODAL EDITA CLIENTE-->


                                    <!-- Modal AGUARDA ATUALIZAÇÃO CLIENTE -->
                                    <div class="modal fade"
                                        id="modalAguardaAtualiza{{cliente.cliente_dados_cliente.id}}"
                                        data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
                                        aria-labelledby="staticBackdropLabel" aria-hidden="true">
                                        <div class="modal-dialog modal-sm modal-dialog-centered">
                                            <div class="modal-content bg-primary">
                                                <div class="modal-body">
                                                    <span class="spinner-border spinner-border-sm text-light"
                                                        aria-hidden="true"></span>
                                                    <span role="status" class="text-white">Aguarde! Atualizando
                                                        registro...</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Fim Modal AGUARDA ATUALIZAÇÃO CLIENTE -->


                                    <!-- Modal AGUARDA Confirmação de Pagamento -->
                                    <div class="modal fade"
                                        id="modalConfirmaPagamento{{cliente.cliente_dados_cliente.id}}"
                                        data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
                                        aria-labelledby="staticBackdropLabel" aria-hidden="true">
                                        <div class="modal-dialog modal-sm modal-dialog-centered">
                                            <div class="modal-content bg-success">
                                                <div class="modal-body">
                                                    <span class="spinner-border spinner-border-sm text-light"
                                                        aria-hidden="true"></span>
                                                    <span role="status" class="text-white">Aguarde! Confirmando o
                                                        pagamento do boleto de
                                                        número
                                                        {{cliente.cliente_dados_boleto.numero_boleto}} de valor R$
                                                        {{cliente.cliente_dados_boleto.valor_pago}}...</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Fim Modal AGUARDA Confirmação de Pagamento -->
                                </td>
                            </tr>
                            {%endfor%}
                        </tbody>
                    </table>

                    <h6 hidden class="text-center text-white fw-bold  titulo">Pagamento Pendente</h6>
                    <div hidden class="row colunas-dados" style="border-top-color: #d62828;"></div>
                    {%for cliente in clientes_inadimplentes_anual%}
                    <input type="text" hidden class="valor_multa{{cliente.cliente_dados_boleto.id}}"
                        value="{{cliente.cliente_dados_boleto.valor_multa}}">
                    <div hidden class="col-md-4 dados_dias_vencido{{cliente.cliente_dados_boleto.id}}">

                    </div>
                    <div hidden
                        class="row linha-dados{{cliente.cliente_dados_boleto.id}} text-white card_deal text-start"
                        data-bs-toggle="modal"
                        data-bs-target="#modalPagamentoPendente{{cliente.cliente_dados_boleto.id}}"
                        onclick="converte_data({{cliente.cliente_dados_boleto.id}})">
                        <a href="{{cliente.cliente_dados_boleto.id}}" data-bs-toggle="modal"
                            data-bs-target="#modalPagamentoPendente{{cliente.cliente_dados_boleto.id}}"
                            class="texto-dados">Cliente:
                            <span class="text-uppercase">{{cliente.cliente_dados_cliente.nome}}</span></a>
                        {%if cliente.cliente_dados_mensagem == []%}
                        <div class="col-md-4">
                            <a href="{{cliente.cliente_dados_cliente.id}}" class="texto-dados" data-bs-toggle="modal"
                                data-bs-target="#modalPagamentoPendente{{cliente.cliente_dados_boleto.id}}">Primeiro
                                Contato: <span
                                    class="data_ultimo_contato_leads_editado">{{cliente.cliente_dados_contato.primeiro_contato}}</span></a>
                        </div>
                        <div class="col-md-4">
                            <a href="{{cliente.cliente_dados_boleto.id}}" class="texto-dados" data-bs-toggle="modal"
                                data-bs-target="#modalPagamentoPendente{{cliente.cliente_dados_boleto.id}}">Último
                                Contato: <span
                                    class="data_ultimo_contato_leads_editado">{{cliente.cliente_dados_contato.ultimo_contato}}</span></a>
                        </div>
                        <div class="col-md-4">
                            <a href="{{cliente.cliente_dados_boleto.id}}" class="texto-dados" data-bs-toggle="modal"
                                data-bs-target="#modalPagamentoPendente{{cliente.cliente_dados_boleto.id}}">Próximo
                                Contato: {{cliente.cliente_dados_contato.proximo_contato}}</a>
                        </div>

                        <div class="col-md-auto">
                            <a href="{{cliente.cliente_dados_boleto.id}}" class="texto-dados" data-bs-toggle="modal"
                                data-bs-target="#modalPagamentoPendente{{cliente.cliente_dados_boleto.id}}">Boleto N.:
                                {{cliente.cliente_dados_boleto.numero_boleto}}
                            </a>
                        </div>
                        <div class="col-md-auto">
                            <a href="{{cliente.cliente_dados_boleto.id}}" class="texto-dados" data-bs-toggle="modal"
                                data-bs-target="#modalPagamentoPendente{{cliente.cliente_dados_boleto.id}}">Valor
                                Boleto: R$
                                {{cliente.cliente_dados_boleto.valor}}
                            </a>
                        </div>
                        <div class="col-md-auto">
                            <a href="{{cliente.cliente_dados_boleto.id}}"
                                class="texto-dados valor_multa{{cliente.cliente_dados_boleto.id}}"
                                data-bs-toggle="modal"
                                data-bs-target="#modalPagamentoPendente{{cliente.cliente_dados_boleto.id}}">Valor
                                Multa: R$
                                {{cliente.cliente_dados_boleto.valor_multa}}
                            </a>


                        </div>

                        <div class="col-md-auto dados_dias_vencido{{cliente.cliente_dados_boleto.id}}">

                        </div>

                        <a href="{{cliente.cliente_dados_boleto.id}}" class="texto-dados" data-bs-toggle="modal"
                            data-bs-target="#modalPagamentoPendente{{cliente.cliente_dados_boleto.id}}">Meio de
                            Contato: Não houve
                            troca de mensagens</a>

                        {%else%}

                        <div class="col-md-4">
                            <a href="{{cliente.cliente_dados_boleto.id}}" class="texto-dados" data-bs-toggle="modal"
                                data-bs-target="#modalPagamentoPendente{{cliente.cliente_dados_boleto.id}}">Primeiro
                                Contato: <span
                                    class="data_ultimo_contato_leads_editado">{{cliente.cliente_dados_contato.primeiro_contato}}</span></a>
                        </div>
                        <div class="col-md-4">
                            <a href="{{cliente.cliente_dados_boleto.id}}" class="texto-dados" data-bs-toggle="modal"
                                data-bs-target="#modalPagamentoPendente{{cliente.cliente_dados_boleto.id}}">Último
                                Contato: <span
                                    class="data_ultimo_contato_leads_editado">{{cliente.cliente_dados_mensagem[-1].data_envio}}</span></a>
                        </div>
                        <div class="col-md-4">
                            <a href="{{cliente.cliente_dados_boleto.id}}" class="texto-dados" data-bs-toggle="modal"
                                data-bs-target="#modalPagamentoPendente{{cliente.cliente_dados_boleto.id}}">Próximo
                                Contato: {{cliente.cliente_dados_contato.proximo_contato}}</a>
                        </div>
                        <div class="col-md-auto">
                            <a href="{{cliente.cliente_dados_boleto.id}}" class="texto-dados" data-bs-toggle="modal"
                                data-bs-target="#modalPagamentoPendente{{cliente.cliente_dados_boleto.id}}">Boleto N.:
                                {{cliente.cliente_dados_boleto.numero_boleto}}
                            </a>
                        </div>
                        <div class="col-md-auto">
                            <a href="{{cliente.cliente_dados_boleto.id}}" class="texto-dados" data-bs-toggle="modal"
                                data-bs-target="#modalPagamentoPendente{{cliente.cliente_dados_boleto.id}}">Valor
                                Boleto: R$
                                {{cliente.cliente_dados_boleto.valor}}
                            </a>
                        </div>
                        <div class="col-md-auto dados_multa">
                            <a href="{{cliente.cliente_dados_boleto.id}}" class="texto-dados" data-bs-toggle="modal"
                                data-bs-target="#modalPagamentoPendente{{cliente.cliente_dados_boleto.id}}">Valor
                                Multa: R$
                                {{cliente.cliente_dados_boleto.valor_multa}}
                            </a>

                            <input type="text" class="valor_multa{{cliente.cliente_dados_boleto.id}}" hidden
                                value="{{cliente.cliente_dados_boleto.valor_multa}}">
                        </div>
                        <a href="{{cliente.cliente_dados_boleto.id}}" class="texto-dados" data-bs-toggle="modal"
                            data-bs-target="#modalPagamentoPendente{{cliente.cliente_dados_boleto.id}}">Meio de
                            Contato:
                            {{cliente.cliente_dados_mensagem[-1].origem}}</a>
                        {%endif%}

                        <a href="{{cliente.cliente_dados_boleto.id}}" class="fw-bold" style="color:#d62828;"
                            data-bs-toggle="modal"
                            data-bs-target="#modalPagamentoPendente{{cliente.cliente_dados_boleto.id}}">Data
                            Vencimento:
                            {{cliente.cliente_dados_boleto.data_vencimento}}</a>


                        <input type="text" hidden class="juros_diarios{{cliente.cliente_dados_boleto.id}}"
                            value="{{cliente.cliente_dados_boleto.juros_diarios}}">

                    </div>

                    <!-- Modal -->
                    <div class="modal fade" id="modalAlteraVencimento{{cliente.cliente_dados_boleto.id}}" tabindex="-1"
                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h1 class="modal-title fs-5" id="exampleModalLabel">Alterar Data Vencimento - Boleto
                                        {{cliente.cliente_dados_boleto.numero_boleto}} </h1>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <div class="row">
                                        <div class='col-md-12'>
                                            <form
                                                action="{{url_for('alterar_data_vencimento', boleto_id = cliente.cliente_dados_boleto.id)}}"
                                                method='post'>
                                                <div class="input-group mb-3">
                                                    <input type="date" class="form-control"
                                                        name="data_vencimento_atualizada" placeholder="Data Vencimento"
                                                        aria-label="Recipient's username"
                                                        aria-describedby="button-addon2">
                                                    <button class="btn btn-success" type="submit"
                                                        id="button-addon2">Salvar</button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary"
                                        data-bs-dismiss="modal">Sair</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Modal -->
                    <div class="modal fade" id="modalPagamentoPendente{{cliente.cliente_dados_boleto.id}}" tabindex="-1"
                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered modal-xl">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h1 class="modal-title fs-5 text-danger fw-bold" id="exampleModalLabel">Pagamento
                                        Pendente <i class="bi bi-hourglass-split"></i></h1>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <!--INÍCIO CARD CLIENTE-->
                                    <div class=" card_dados m-1" id="dados_card{{cliente.cliente_dados_cliente.id}}">
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col-md-8">
                                                    <h5 class="card-title nome_cliente" id="nome_cliente">
                                                        Cliente: <span
                                                            style="text-transform: capitalize;">{{cliente.cliente_dados_cliente.nome}}</span>
                                                    </h5>
                                                </div>


                                                <div class="col-auto">
                                                    <a type="button"
                                                        href="/home/historico/{{cliente.cliente_dados_cliente.id}}"
                                                        data-bs-toggle="modal"
                                                        data-bs-target="#modalHistorico{{cliente.cliente_dados_boleto.id}}"
                                                        style="cursor: pointer; background: rgb(217,82,42);
                             background: linear-gradient(0deg, rgba(217,82,42,1) 35%, rgba(235,117,38,1) 65%); color: white;"
                                                        class="btn card_deal tooltip-test"
                                                        title="Histórico de Mensagens"><i
                                                            class="bi bi-clock-history"></i></a>

                                                </div>
                                                <div class="col-auto">
                                                    <a type="button"
                                                        href="/home/edita_registro/{{cliente.cliente_dados_cliente.id}}"
                                                        data-bs-toggle="modal"
                                                        data-bs-target="#modalEditar{{cliente.cliente_dados_cliente.id}}"
                                                        style="cursor: pointer; rgb(61,92,240);
                             background: radial-gradient(circle, rgba(61,92,240,1) 26%, rgba(3,20,163,1) 100%); color:white;"
                                                        class="btn card_deal tooltip-test"
                                                        title="Editar registro do Cliente"><i
                                                            class="bi bi-pencil-square"></i></a>

                                                </div>
                                                <div class="col-auto">
                                                    <a type="button"
                                                        href="/home/apaga_registro/{{cliente.cliente_dados_cliente.id}}"
                                                        data-bs-toggle="modal"
                                                        data-bs-target="#modalConfirma{{cliente.cliente_dados_boleto.id}}"
                                                        style="cursor: pointer;rgb(214,50,70);
                             background: radial-gradient(circle, rgba(214,50,70,1) 26%, rgba(163,3,3,1) 100%); color: white;"
                                                        class="btn card_deal tooltip-test" title="Excluir registro"><i
                                                            class="bi bi-trash3-fill"></i></a>

                                                </div>
                                            </div>

                                            <div class="row float-start">
                                                <input type="number" value="{{cliente.cliente_dados_cliente.id}}" hidden
                                                    class="cliente_id">

                                            </div>

                                            <div class='row'>
                                                <div class="col-md-3">Tel.: <span
                                                        class="tooltip-test">{{cliente.cliente_dados_cliente.telefone}}</span>
                                                </div>

                                                <div class="col-md-6">Email: <span
                                                        class="tooltip-test">{{cliente.cliente_dados_cliente.email}}</a>
                                                </div>
                                            </div>

                                            <div class='row'>
                                                <div class="col-md-6">
                                                    <div class="form-floating mb-3">
                                                        <input type="text" readonly
                                                            class="form-control primeiro_contato " id="primeiro_contato"
                                                            placeholder="Primeiro Contato"
                                                            value='{{cliente.cliente_dados_contato.primeiro_contato}}'>
                                                        <label for="primeiro_contato">Primeiro Contato</label>
                                                    </div>
                                                </div>

                                                {%if cliente.cliente_dados_contato.proximo_contato != null %}
                                                <div class='col-md-6'>

                                                    <div id="mais_cinco_dias{{cliente.cliente_dados_cliente.id}}"
                                                        class="row">
                                                        <form
                                                            action="{{url_for('update_proximocontato', cliente_id= cliente.cliente_dados_cliente.id, boleto_id = cliente.cliente_dados_boleto.id)}}"
                                                            method='post'>
                                                            <div class="input-group form-floating mb-3">
                                                                <input type="text" readonly
                                                                    class="form-control cliente_proximocontato "
                                                                    id="proximo_contato" placeholder="Próximo
                                                             Contato" name="adiciona_cinco_dias" readonly
                                                                    class="form-control cliente_proximocontato"
                                                                    value='{{cliente.cliente_dados_contato.proximo_contato}}'>
                                                                <button type='submit' class='btn_salva btn btn-success'
                                                                    data-dias="5"
                                                                    onclick="contato_cinco_dias({{cliente.cliente_dados_cliente.id}})"
                                                                    title='Adicionar Cinco Dias'>
                                                                    +5
                                                                </button>
                                                                <label for="proximo_contato">Próximo
                                                                    Contato</label>

                                                            </div>
                                                        </form>
                                                    </div>
                                                </div>
                                                {%endif%}
                                            </div>

                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="form-floating mb-3">
                                                        <input type="text"
                                                            class="form-control data_final data_ultimo_contato_leads"
                                                            readonly placeholder="Último Contato"
                                                            value='{{cliente.cliente_dados_contato.ultimo_contato}}'>
                                                        <label for="ultimo_contato">Último
                                                            Contato</label>
                                                    </div>
                                                </div>

                                                <div id="input_date{{cliente.cliente_dados_cliente.id}}"
                                                    class="col-md-6">
                                                    <form
                                                        action="{{url_for('update_ultimocontato',cliente_id = cliente.cliente_dados_cliente.id, boleto_id = cliente.cliente_dados_boleto.id)}}"
                                                        method='post'>

                                                        <div class="input-group form-floating mb-3">
                                                            <input type='date' placeholder="Alterar Último Contato"
                                                                class='form-control data_modificada div_data' required
                                                                name='ultimo_contato'>
                                                            <button type='submit' class='btn_salva btn btn-success'
                                                                title='Alterar Data'>
                                                                <i class='bi bi-check-square'></i>
                                                            </button>

                                                            <label for="ultimo_contato">Alterar
                                                                Último
                                                                Contato</label>

                                                        </div>
                                                    </form>
                                                </div>
                                            </div>

                                            <div class='row btn_dias'>

                                            </div>

                                            <br>

                                            <div class='prox_contato'> </div>

                                            <div class="row">
                                                <div class="col-md-4">
                                                    <h6>Número Boleto: {{cliente.cliente_dados_boleto.numero_boleto}}
                                                    </h6>
                                                </div>

                                                <div class="col-md-4">
                                                    <h6>Valor Boleto: R$ {{cliente.cliente_dados_boleto.valor}}</h6>
                                                </div>

                                                <div
                                                    class="col-md-4 div_data_vencimento{{cliente.cliente_dados_boleto.id}}">
                                                    <h6 style="cursor: pointer;" title="Alterar Data de Vencimento"
                                                        onclick="alterar_data_vencimento({{cliente.cliente_dados_boleto.id}})"
                                                        class="data_vencimento_boleto{{cliente.cliente_dados_boleto.id}}">
                                                        Data Vencimento:
                                                        <span>{{cliente.cliente_dados_boleto.data_vencimento}}</span>
                                                    </h6>
                                                </div>

                                                <div class="div_input{{cliente.cliente_dados_boleto.id}}">
                                                    <input type="text" hidden
                                                        class="data_vencimento{{cliente.cliente_dados_boleto.id}}"
                                                        value="{{cliente.cliente_dados_boleto.data_vencimento}}">
                                                </div>


                                            </div>

                                            <div class="row">
                                                <div class="col-md-4">
                                                    <h6>Valor Multa: R$
                                                        {{cliente.cliente_dados_boleto.valor_multa}}</h6>

                                                </div>

                                                <div class="col-md-4">
                                                    <h6>Valor Juros 1%: R$
                                                        {{cliente.cliente_dados_boleto.juros_diarios}}</h6>

                                                </div>

                                                <input type="text" value="{{cliente.cliente_dados_boleto.valor}}" hidden
                                                    class="valor_boleto{{cliente.cliente_dados_boleto.id}}">

                                            </div>

                                            <div class="row">

                                                <div
                                                    class="col-md-4 dados_dias_vencido{{cliente.cliente_dados_boleto.id}}">

                                                </div>

                                                <div class="col-md-4">
                                                    <h6
                                                        class="valor_multa_atualizada{{cliente.cliente_dados_boleto.id}}">
                                                    </h6>
                                                </div>

                                                <div
                                                    class="col-md-4 valor_atualizado{{cliente.cliente_dados_boleto.id}}">

                                                </div>
                                            </div>

                                            <br>

                                            <div class='row justificativa'>
                                                <div
                                                    class="col-md-6 div_justificativa{{cliente.cliente_dados_boleto.id}}">
                                                    {%if cliente.cliente_dados_topico.topico == '' %}
                                                    <div class="col-md-4">
                                                        <h6>Motivo do não pagamento:
                                                            <div class="input-group">
                                                                <input type="text"
                                                                    placeholder="Digite o motivo do não pagamento..."
                                                                    onkeyup="get_motivos({{cliente.cliente_dados_boleto.id}})"
                                                                    class="form-control seleciona_motivo{{cliente.cliente_dados_boleto.id}}">

                                                                <button
                                                                    onclick="atualizar_motivo({{cliente.cliente_dados_boleto.id}})"
                                                                    class="btn btn-success"
                                                                    type="submit">Salvar</button>
                                                            </div>
                                                        </h6>

                                                    </div>
                                                    {%else%}
                                                    <h6>Motivo do não pagamento:
                                                        <span
                                                            ondblclick="exibir_input({{cliente.cliente_dados_boleto.id}})"
                                                            class="fw-bold muda_motivo{{cliente.cliente_dados_boleto.id}}">{{cliente.cliente_dados_topico.topico}}</span>
                                                    </h6>
                                                    {%endif%}
                                                </div>

                                                <div class="col-md-6 div_observacao{{cliente.cliente_dados_boleto.id}}">
                                                    {%if cliente.cliente_dados_boleto.observacoes == None%}
                                                    <h6 ondblclick="inserir_observacao({{cliente.cliente_dados_boleto.id}})"
                                                        class="insere_obs{{cliente.cliente_dados_boleto.id}}">
                                                        Observações: Não possui observação</h6>
                                                    {%else%}
                                                    <h6>Observações:
                                                        {{cliente.cliente_dados_boleto.observacoes}}
                                                    </h6>
                                                    {%endif%}
                                                </div>
                                            </div>

                                            {%if cliente.cliente_dados_status.status == "Pagamento Pendente"%}
                                            <div class="row">
                                                <div class="col-auto">
                                                    <h6 class="card-text status_cliente{{cliente.id}}"
                                                        style="color: red;">Status:
                                                        {{cliente.cliente_dados_status.status}}</h6>
                                                </div>
                                                <div class="col-auto">
                                                    <h6 class="blob red"></h6>
                                                </div>
                                            </div>
                                            <div class="row div-btn{{cliente.cliente_dados_cliente.id}}">
                                                <div class="col-md-auto m-1">
                                                    <button class="btn btn-success btn_contratou{{cliente.id}}"
                                                        onclick="confirmar_pagamento({{cliente.cliente_dados_cliente.id}},{{cliente.cliente_dados_boleto.id}},{{cliente.cliente_dados_boleto.valor}})">Pagamento
                                                        Confirmado</button>
                                                </div>
                                            </div>
                                            {%endif%}

                                        </div>
                                        <!--FIM CARD CLIENTE-->
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary"
                                        data-bs-dismiss="modal">Sair</button>
                                </div>
                            </div>
                        </div>
                    </div>



                    <!-- MODAL HISTÓRICO DE TEXTOS -->
                    <div class="modal fade" id="modalHistoricoTextos{{cliente.cliente_dados_cliente.id}}" tabindex="-1"
                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h1 class="modal-title fs-5" id="exampleModalLabel">Histórico de
                                        Textos - <span
                                            class="text-capitalize">{{cliente.cliente_dados_topico.topico}}</span>
                                    </h1>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>

                                <div class="modal-body">
                                    <!--INÍCIO FORM EDITA CLIENTE-->
                                    {%for texto in textos%}
                                    <div class="row m-1">
                                        <div class="card_deal">

                                            <br>
                                            <div class="row">
                                                {%if texto.texto_topico.topico ==
                                                cliente.cliente_topico.topico%}
                                                <p class="text-capitalize lh-base"><b>Texto:</b>
                                                    {{texto.texto}}</p>
                                                {%endif%}
                                            </div>

                                        </div>
                                    </div>
                                    <br>
                                    {%endfor%}
                                    <!--FINAL FORM EDITA CLIENTE-->
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--FINAL MODAL HISTÓRICO DE MENSAGENS-->

                    <!-- Modal EMAIL -->
                    <div class="modal fade modal_msg" id="modalEmail{{cliente.cliente_dados_cliente.id}}" tabindex="-1"
                        aria-labelledby="modalMensagem" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered modal-lg">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="modalMensagem"><i
                                            class="bi bi-envelope-arrow-up-fill"></i><strong> Enviar
                                            Email</strong></h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>
                                <div class="modal-body row g-3">

                                    <form
                                        action="{{url_for('envia_email',cliente_id=cliente.cliente_dados_cliente.id, boleto_id = cliente.cliente_dados_boleto.id)}}"
                                        method="POST">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-floating mb-3">
                                                    {%if current_user.is_authenticated %}
                                                    <input type="text" hidden name="email_usuario_logado"
                                                        value="{{current_user.email}}">
                                                    {%endif%}
                                                    <input type="text" readonly class="form-control" id="floatingName"
                                                        name="nome" placeholder="Nome"
                                                        style="text-transform: uppercase;" required
                                                        value="{{cliente.nome}}">
                                                    <label for="floatingName"><strong>Nome</strong></label>
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <div class="form-floating mb-3">
                                                    <input type="text" readonly id="enderecoEmail" style="width: 300px;"
                                                        class="form-control" id="email" name="email" required
                                                        value="{{cliente.email}}">
                                                    <label for="enderecoEmail"><strong>Email</strong></label>
                                                </div>
                                            </div>

                                        </div>

                                        <div class="row">
                                            <div class="col-md-10">
                                                <h6 class="fw-bold">Regras:</h6>
                                                <ol>
                                                    <li><b>Nunca</b> cobrar no grupo;</li>
                                                    <li>Atualizar a planilha sempre que enviar ou receber contato;</li>
                                                    <li>Sempre poderá tirar a multa para pagamento imediato;</li>
                                                    <li class="fw-bold">Sempre pegar comprovante do pagamento;</li>
                                                    <li><b>Após 07 dias:</b> Começar o protocolo de ligação (duas vezes
                                                        por
                                                        dia)</li>
                                                    <li><b>Após de 01 semana</b> tentando ligar e não conseguindo,
                                                        passar o
                                                        caso para mim.</li>

                                                </ol>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-10">
                                                <div class="form-floating mb-3">
                                                    <input type="text" id="assuntoEmail" style="width: 350px;"
                                                        class="form-control" id="assunto" name="assunto_email" required>
                                                    <label for="assuntoEmail"><strong>Assunto</strong></label>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-8">
                                                <select class="form-select titulo_script_gmail{{cliente.id}}"
                                                    aria-label="Seleciona Script"
                                                    onchange="seleciona_texto_gmail({{cliente.id}})">

                                                </select>
                                            </div>
                                        </div>

                                        <div class="form-floating">
                                            <textarea class="form-control script_pronto_gmail{{cliente.id}}"
                                                name="texto_mensagem" rows="3"></textarea>
                                            <label for="floatingSelect">Digite sua mensagem</label>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary"
                                                data-bs-dismiss="modal">Sair</button>
                                            <button type="submit" id="envia" data-bs-toggle="modal"
                                                data-bs-target="#loading" class="btn btn-success"><i
                                                    class="bi bi-envelope-arrow-up-fill"></i> Enviar
                                                Email</button>
                                        </div>
                                    </form>
                                </div>

                            </div>
                        </div>
                    </div>
                    <!--FIM MODAL EMAIL-->

                    <!-- Modal Messenger -->
                    <div class="modal fade modal_msg" id="modalMessenger{{cliente.cliente_dados_cliente.id}}"
                        tabindex="-1" aria-labelledby="modalMensagem" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered modal-lg">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="modalMensagem"><i class="bi bi-whatsapp"></i><strong>
                                            Enviar
                                            Mensagem - WhatsApp</strong></h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>

                                <div class="modal-body row g-3">
                                    <form
                                        action="{{url_for('salva_mensagem', cliente_id= cliente.cliente_dados_cliente.id, boleto_id = cliente.cliente_dados_boleto.id)}}"
                                        method="post">
                                        <div class="row">
                                            <div class="col-md-8">
                                                <div class="form-floating mb-3">
                                                    <input type="text" readonly class="form-control" id="floatingName"
                                                        name="nome" placeholder="Nome"
                                                        style="text-transform: uppercase;" required
                                                        value="{{cliente.cliente_dados_cliente.nome}}">
                                                    <label for="floatingName"><strong>Nome</strong></label>
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <div class="form-floating mb-3">
                                                    <input type="tel" readonly id="floatingTelefone"
                                                        style="width: 200px;" class="form-control" id="tel"
                                                        name="telefone" placeholder="Somente Números" required
                                                        value="+55{{cliente.cliente_dados_cliente.telefone}}">
                                                    <label for="floatingTelefone"><strong>Tel. de
                                                            Contato</strong></label>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-10">
                                                <h6 class="fw-bold">Regras:</h6>
                                                <ol>
                                                    <li><b>Nunca</b> cobrar no grupo;</li>
                                                    <li>Atualizar a planilha sempre que enviar ou receber contato;</li>
                                                    <li>Sempre poderá tirar a multa para pagamento imediato;</li>
                                                    <li class="fw-bold">Sempre pegar comprovante do pagamento;</li>
                                                    <li><b>Após 07 dias:</b> Começar o protocolo de ligação (duas vezes
                                                        por
                                                        dia)</li>
                                                    <li><b>Após de 01 semana</b> tentando ligar e não conseguindo,
                                                        passar o
                                                        caso para mim.</li>

                                                </ol>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="form-floating mb-3">
                                                    <input type="text" class="form-control" id="assuntoMensagem"
                                                        name="assuntoMensagem" placeholder="Assunto"
                                                        style="text-transform: uppercase;" required>
                                                    <label for="assuntoMensagem">Digite o assunto</label>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-8">
                                                <select
                                                    class="form-select titulo_script_whatsapp{{cliente.cliente_dados_cliente.id}}"
                                                    aria-label="Seleciona Script"
                                                    onchange="seleciona_texto_whatsapp({{cliente.cliente_dados_cliente.id}})">
                                                </select>
                                            </div>
                                        </div>

                                        <div class="form-floating">
                                            <textarea
                                                class="form-control script_pronto_whatsapp{{cliente.cliente_dados_cliente.id}}"
                                                required name="texto_mensagem" rows="3"></textarea>
                                            <label for="floatingSelect">Digite sua mensagem</label>
                                        </div>

                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary"
                                                data-bs-dismiss="modal">Sair</button>
                                            <button type="submit" id="envia"
                                                onclick="envia_zap({{cliente.cliente_dados_cliente.telefone}},{{cliente.cliente_dados_cliente.id}})"
                                                class="btn btn-success"><i class="bi bi-whatsapp"></i> Enviar
                                                WhatsApp</button>
                                        </div>

                                    </form>
                                </div>

                            </div>
                        </div>
                    </div>
                    <!--FIM MODAL-->

                    <!-- MODAL HISTÓRICO DE MENSAGENS -->
                    <div class="modal fade" id="modalHistorico{{cliente.cliente_dados_boleto.id}}" tabindex="-1"
                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h1 class="modal-title fs-5" id="exampleModalLabel">Histórico de
                                        Mensagens - <span
                                            class="text-uppercase">{{cliente.cliente_dados_cliente.nome}}</span></h1>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>

                                <div class="modal-body">
                                    <div class="row">
                                        <div class="col-auto"><button title="Enviar mensagem via WhatsApp"
                                                data-bs-toggle="modal"
                                                data-bs-target="#modalMessenger{{cliente.cliente_dados_cliente.id}}"
                                                style="background: rgb(61,240,73);
                    background: radial-gradient(circle, rgba(61,240,73,1) 26%, rgba(33,101,19,1) 100%);"
                                                onclick="dados_scripts_whatsapp({{cliente.cliente_dados_cliente.id}})"
                                                class="btn card_deal text-white"><i class="bi bi-whatsapp"></i>
                                                Enviar WhatsApp</button></div>

                                        <div class="col-auto"><button
                                                href="/sendemail/{{cliente.cliente_dados_cliente.id}}"
                                                data-bs-toggle="modal"
                                                data-bs-target="#modalEmail{{cliente.cliente_dados_cliente.id}}"
                                                onclick="dados_scripts_email({{cliente.cliente_dados_cliente.id}})"
                                                style="background: rgb(61,92,240);
                    background: radial-gradient(circle, rgba(61,92,240,1) 26%, rgba(3,20,163,1) 100%);"
                                                title="Enviar Email para o Cliente {{cliente.cliente_dados_cliente.nome}}"
                                                class="btn card_deal text-white"><i
                                                    class="bi bi-envelope-arrow-up-fill"></i> Enviar
                                                Email</button></div>
                                    </div>
                                    <br>
                                    <!--INÍCIO HISTÓRICO DE MENSAGENS/EMAIL-->
                                    {%for mensagens in cliente.cliente_dados_mensagem%}
                                    <div class="row m-1">
                                        <div class="card_deal">
                                            <div class="col-auto">
                                                <span class="text-capitalize"><b>Enviado Via:</b>
                                                    {{mensagens.origem}}</span>
                                            </div>
                                            <div class="col-auto">
                                                <span><b>Tel. Contato:
                                                    </b>{{cliente.cliente_dados_cliente.telefone}}</span>
                                            </div>
                                            <div class="col-auto">
                                                <span><b>E-mail: </b>{{cliente.cliente_dados_cliente.email}}</span>
                                            </div>
                                            <div class="col-auto">
                                                <span><b>Data de envio:</b>
                                                    {{mensagens.data_envio}}</span>
                                            </div>
                                            <p class="text-capitalize"><b>Assunto:</b>
                                                {{mensagens.assunto}}</p>
                                            <p class="text-capitalize"><b>Texto:</b>
                                                {{mensagens.texto}}</p>
                                        </div>
                                    </div>
                                    <br>
                                    {%endfor%}
                                    <!--FINAL  HISTÓRICO DE MENSAGENS/EMAIL-->
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--FINAL MODAL HISTÓRICO DE MENSAGENS-->

                    <!-- Modal confirma exclusão -->
                    <div class="modal fade" id="modalConfirma{{cliente.cliente_dados_boleto.id}}" tabindex="-1"
                        aria-labelledby="confirma" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="confirma">Excluir Registro</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    Deseja realmente excluir o registro referente ao(a) Sr.(a) <b
                                        style="text-transform: capitalize;">{{cliente.cliente_dados_cliente.nome}}</b>?
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"><i
                                            class="bi bi-x"></i>
                                        Não</button>

                                    <form
                                        action="{{url_for('delete', cliente_id =cliente.cliente_dados_cliente.id, boleto_id = cliente.cliente_dados_boleto.id)}}"
                                        method="post">
                                        <button type="submit" data-bs-toggle="modal"
                                            data-bs-target="#modalAguardaExclusaoCliente{{cliente.cliente_dados_cliente.id}}"
                                            class="btn btn-success"><i class="bi bi-check2"></i> Sim</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--FIM MODAL CONFIRMA EXCLUSÃO-->




                    <!-- Modal AGUARDA exclusão Cliente -->
                    <div class="modal fade" id="modalAguardaExclusaoCliente{{cliente.cliente_dados_cliente.id}}"
                        data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
                        aria-labelledby="staticBackdropLabel" aria-hidden="true">
                        <div class="modal-dialog modal-sm modal-dialog-centered">
                            <div class="modal-content bg-danger">
                                <div class="modal-body">
                                    <span class="spinner-border spinner-border-sm text-light" aria-hidden="true"></span>
                                    <span role="status" class="text-white">Aguarde! Excluindo registro do cliente
                                        {{cliente.cliente_dados_cliente.nome}}...</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Fim Modal AGUARDA exclusão Cliente -->


                    <!-- MODAL EDITA CLIENTE -->
                    <div class="modal fade" id="modalEditar{{cliente.cliente_dados_cliente.id}}" tabindex="-1"
                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h1 class="modal-title fs-5" id="exampleModalLabel">Editar
                                        Cadastro Cliente - {{cliente.cliente_dados_cliente.nome}} </h1>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>

                                <div class="modal-body">
                                    <!--INÍCIO FORM EDITA CLIENTE-->
                                    <form action="{{url_for('update_cliente', id= cliente.cliente_dados_cliente.id)}}"
                                        method="post">
                                        <div class="row">
                                            <div class="col-md-4">
                                                <div class="form-floating mb-3">
                                                    <input type="text" class="form-control primeiro_contato_editado"
                                                        iname="primeiro_contato_editado" readonly
                                                        value="{{cliente.cliente_dados_contato.primeiro_contato}}"
                                                        id="primeiro_contato" placeholder="Data Cadastro">
                                                    <label for="primeiro_contato">Data Cadastro</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="form-floating mb-3">
                                                <input type="text" class="form-control text-uppercase" id="nome"
                                                    name="nome_editado" value="{{cliente.cliente_dados_cliente.nome}}"
                                                    placeholder="Nome">
                                                <label for="nome">Nome</label>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-4">
                                                <div class="form-floating mb-3">
                                                    <input type="text" class="form-control" id="telefone"
                                                        value="{{cliente.cliente_dados_cliente.telefone}}"
                                                        name="telefone_editado" placeholder="Telefone">
                                                    <label for="telefone">Telefone</label>
                                                </div>
                                            </div>

                                            <div class="col-md-8">
                                                <div class="form-floating mb-3">
                                                    <input type="email" class="form-control" id="email"
                                                        value="{{cliente.cliente_dados_cliente.email}}"
                                                        name="email_editado" placeholder="Email">
                                                    <label for="floatingInput">Email</label>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-danger"
                                                data-bs-dismiss="modal">Sair</button>
                                            <button type="submit" data-bs-toggle="modal"
                                                data-bs-target="#modalAguardaAtualiza{{cliente.cliente_dados_cliente.id}}"
                                                class="btn btn-success">Salvar</button>
                                        </div>
                                    </form>
                                    <!--FINAL FORM EDITA CLIENTE-->
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--FINAL MODAL EDITA CLIENTE-->


                    <!-- Modal AGUARDA ATUALIZAÇÃO CLIENTE -->
                    <div class="modal fade" id="modalAguardaAtualiza{{cliente.cliente_dados_cliente.id}}"
                        data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
                        aria-labelledby="staticBackdropLabel" aria-hidden="true">
                        <div class="modal-dialog modal-sm modal-dialog-centered">
                            <div class="modal-content bg-primary">
                                <div class="modal-body">
                                    <span class="spinner-border spinner-border-sm text-light" aria-hidden="true"></span>
                                    <span role="status" class="text-white">Aguarde! Atualizando registro...</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Fim Modal AGUARDA ATUALIZAÇÃO CLIENTE -->


                    <!-- Modal AGUARDA Confirmação de Pagamento -->
                    <div class="modal fade" id="modalConfirmaPagamento{{cliente.cliente_dados_cliente.id}}"
                        data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
                        aria-labelledby="staticBackdropLabel" aria-hidden="true">
                        <div class="modal-dialog modal-sm modal-dialog-centered">
                            <div class="modal-content bg-success">
                                <div class="modal-body">
                                    <span class="spinner-border spinner-border-sm text-light" aria-hidden="true"></span>
                                    <span role="status" class="text-white">Aguarde! Confirmando o pagamento do boleto de
                                        número
                                        {{cliente.cliente_dados_boleto.numero_boleto}} de valor R$
                                        {{cliente.cliente_dados_boleto.valor_pago}}...</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Fim Modal AGUARDA Confirmação de Pagamento -->
                    {%endfor%}
                </div>

                <div class="col-md m-1 pagamento_confirmado " style="color: white;">
                    <!--TABELA PAGAMENTOS CONFIRMADOS-->
                    <table class="table table-responsive" id="tabela_pagamento_confirmado">
                        <thead>
                            <tr style="background-color: #013a63!important;">
                                <th scope="col" style="background-color: #013a63!important;">
                                    <h6 class="text-center text-white fw-bold  titulo">Pagamento Confirmado</h6>
                                    <div class="row colunas-dados" style="border-top-color: #38b000;"></div>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            {%for cliente in clientes_adimplentes_mensal%}
                            <tr style="background-color: #013a63!important;">
                                <td style="background-color: #013a63!important;">
                                    <div class="row text-white  linha-dados card_deal text-start"
                                        onclick="converte_data_adimplente({{cliente.cliente_dados_boleto.id}})">
                                        <a href="{{cliente.cliente_dados_cliente.id}}" data-bs-toggle="modal"
                                            data-bs-target="#modalPagamentoConfirmado{{cliente.cliente_dados_boleto.id}}"
                                            class="texto-dados">Cliente:
                                            {{cliente.cliente_dados_cliente.nome|upper}}</a>
                                        {%if cliente.cliente_dados_mensagem == []%}
                                        <div class="col-md-4">
                                            <a href="{{cliente.cliente_dados_cliente.id}}" class="texto-dados"
                                                data-bs-toggle="modal"
                                                data-bs-target="#modalPagamentoConfirmado{{cliente.cliente_dados_boleto.id}}">Primeiro
                                                Contato: <span
                                                    class="data_ultimo_contato_leads_editado">{{cliente.cliente_dados_contato.primeiro_contato}}</span></a>
                                        </div>
                                        <div class="col-md-4">
                                            <a href="{{cliente.cliente_dados_cliente.id}}" class="texto-dados"
                                                data-bs-toggle="modal"
                                                data-bs-target="#modalPagamentoConfirmado{{cliente.cliente_dados_boleto.id}}">Último
                                                Contato: <span
                                                    class="data_ultimo_contato_leads_editado">{{cliente.cliente_dados_contato.ultimo_contato}}</span></a>
                                        </div>
                                        <div class="col-md-4">
                                            <a href="{{cliente.cliente_dados_cliente.id}}" class="texto-dados"
                                                data-bs-toggle="modal"
                                                data-bs-target="#modalPagamentoConfirmado{{cliente.cliente_dados_boleto.id}}">Próximo
                                                Contato: <span
                                                    class="data_primeiro_contato_editado">{{cliente.cliente_dados_contato.proximo_contato}}</span></a>
                                        </div>
                                        <div class="col-md-auto">
                                            <a href="{{cliente.cliente_dados_cliente.id}}" class="texto-dados"
                                                data-bs-toggle="modal"
                                                data-bs-target="#modalPagamentoConfirmado{{cliente.cliente_dados_boleto.id}}">Boleto
                                                N.:
                                                {{cliente.cliente_dados_boleto.numero_boleto}}
                                            </a>
                                        </div>
                                        <div class="col-md-auto">
                                            <a href="{{cliente.cliente_dados_cliente.id}}" class="texto-dados"
                                                data-bs-toggle="modal"
                                                data-bs-target="#modalPagamentoConfirmado{{cliente.cliente_dados_boleto.id}}">Valor
                                                Boleto: R$
                                                {{cliente.cliente_dados_boleto.valor}}
                                            </a>
                                            <input type="text" class="valor_boleto{{cliente.cliente_dados_boleto.id}}"
                                                hidden value="{{cliente.cliente_dados_boleto.valor}}">
                                        </div>
                                        <div class="col-md-auto">
                                            <a href="{{cliente.cliente_dados_cliente.id}}" class="texto-dados"
                                                data-bs-toggle="modal"
                                                data-bs-target="#modalPagamentoConfirmado{{cliente.cliente_dados_boleto.id}}">Valor
                                                Multa Diária: R$
                                                {{cliente.cliente_dados_boleto.valor_multa}}
                                            </a>
                                            <input type="text" class="valor_multa{{cliente.cliente_dados_boleto.id}}"
                                                hidden value="{{cliente.cliente_dados_boleto.valor_multa}}">
                                        </div>

                                        <a href="{{cliente.cliente_dados_cliente.id}}" class="texto-dados"
                                            data-bs-toggle="modal"
                                            data-bs-target="#modalPagamentoConfirmado{{cliente.cliente_dados_boleto.id}}">Meio
                                            de
                                            Contato: Não houve
                                            troca de mensagens</a>

                                        {%else%}

                                        <div class="col-md-4">
                                            <a href="{{cliente.cliente_dados_cliente.id}}" class="texto-dados"
                                                data-bs-toggle="modal"
                                                data-bs-target="#modalPagamentoConfirmado{{cliente.cliente_dados_boleto.id}}">Primeiro
                                                Contato: <span
                                                    class="data_ultimo_contato_leads_editado">{{cliente.cliente_dados_contato.primeiro_contato}}</span></a>
                                        </div>
                                        <div class="col-md-4">
                                            <a href="{{cliente.cliente_dados_cliente.id}}" class="texto-dados"
                                                data-bs-toggle="modal"
                                                data-bs-target="#modalPagamentoConfirmado{{cliente.cliente_dados_boleto.id}}">Último
                                                Contato: <span
                                                    class="data_ultimo_contato_leads_editado">{{cliente.cliente_dados_mensagem[-1].data_envio}}</span></a>
                                        </div>
                                        <div class="col-md-4">
                                            <a href="{{cliente.cliente_dados_cliente.id}}" class="texto-dados"
                                                data-bs-toggle="modal"
                                                data-bs-target="#modalPagamentoConfirmado{{cliente.cliente_dados_boleto.id}}">Próximo
                                                Contato: <span
                                                    class="data_primeiro_contato_editado">{{cliente.cliente_dados_contato.proximo_contato}}</span></a>
                                        </div>
                                        <div class="col-md-auto">
                                            <a href="{{cliente.cliente_dados_cliente.id}}" class="texto-dados"
                                                data-bs-toggle="modal"
                                                data-bs-target="#modalPagamentoConfirmado{{cliente.cliente_dados_boleto.id}}">Boleto
                                                N.:
                                                {{cliente.cliente_dados_boleto.numero_boleto}}
                                            </a>
                                        </div>
                                        <div class="col-md-auto">
                                            <a href="{{cliente.cliente_dados_cliente.id}}" class="texto-dados"
                                                data-bs-toggle="modal"
                                                data-bs-target="#modalPagamentoConfirmado{{cliente.cliente_dados_boleto.id}}">Valor
                                                Boleto: R$
                                                {{cliente.cliente_dados_boleto.valor}}
                                            </a>
                                            <input type="text" class="valor_boleto{{cliente.cliente_dados_boleto.id}}"
                                                hidden value="{{cliente.cliente_dados_boleto.valor}}">
                                        </div>
                                        <div class="col-md-auto">
                                            <a href="{{cliente.cliente_dados_cliente.id}}" class="texto-dados"
                                                data-bs-toggle="modal"
                                                data-bs-target="#modalPagamentoConfirmado{{cliente.cliente_dados_boleto.id}}">Valor
                                                Multa Diária: R$
                                                {{cliente.cliente_dados_boleto.valor_multa}}
                                            </a>
                                            <input type="text" class="valor_multa{{cliente.cliente_dados_boleto.id}}"
                                                hidden value="{{cliente.cliente_dados_boleto.valor_multa}}">
                                        </div>

                                        <a href="{{cliente.cliente_dados_cliente.id}}" class="texto-dados"
                                            data-bs-toggle="modal"
                                            data-bs-target="#modalPagamentoConfirmado{{cliente.cliente_dados_boleto.id}}">Meio
                                            de
                                            Contato:
                                            {{cliente.cliente_dados_mensagem[-1].origem}}</a>

                                        {%endif%}

                                        <div class="col-md-auto">
                                            <a href="{{cliente.cliente_dados_cliente.id}}" class="fw-bold texto-dados"
                                                data-bs-toggle="modal"
                                                data-bs-target="#modalPagamentoConfirmado{{cliente.cliente_dados_boleto.id}}">Data
                                                Vencimento: {{cliente.cliente_dados_boleto.data_vencimento}}</a>

                                            <input type="text" hidden
                                                class="data_vencimento{{cliente.cliente_dados_boleto.id}}"
                                                value="{{cliente.cliente_dados_boleto.data_vencimento}}">
                                        </div>

                                        <div class="col-md-auto">
                                            <a href="{{cliente.cliente_dados_cliente.id}}" class="fw-bold"
                                                style="color: #38b000;" data-bs-toggle="modal"
                                                data-bs-target="#modalPagamentoConfirmado{{cliente.cliente_dados_boleto.id}}">Data
                                                Pagamento: {{cliente.cliente_dados_boleto.data_pagamento}}</a>

                                            <input type="text" hidden
                                                class="data_pagamento{{cliente.cliente_dados_boleto.id}}"
                                                value="{{cliente.cliente_dados_boleto.data_pagamento}}">
                                            <input type="text" hidden
                                                class="juros_diarios{{cliente.cliente_dados_boleto.id}}"
                                                value="{{cliente.cliente_dados_boleto.juros_diarios}}">
                                        </div>

                                        {%if cliente.cliente_dados_boleto.valor_pago != None %}
                                        <div class="col-md-auto">
                                            <a href="{{cliente.cliente_dados_cliente.id}}" class="fw-bold"
                                                style="color: #38b000;" data-bs-toggle="modal"
                                                data-bs-target="#modalPagamentoConfirmado{{cliente.cliente_dados_boleto.id}}">Valor
                                                Pago: R$
                                                {{cliente.cliente_dados_boleto.valor_pago}}</a>
                                        </div>
                                        {%endif%}

                                    </div>
                                    {%endfor%}
                </div>

                {%for cliente in clientes_adimplentes_mensal%}
                <!-- Modal Pagamento Confirmado-->
                <div class="modal fade" id="modalPagamentoConfirmado{{cliente.cliente_dados_boleto.id}}" tabindex="-1"
                    aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered modal-xl">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h1 class="modal-title fs-5 fw-bold text-success" id="exampleModalLabel">Pagamento
                                    Confirmado <i class="bi bi-cash-stack"></i></h1>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                            </div>
                            <div class="modal-body" style="color:black!important">
                                <!--INÍCIO CARD CLIENTE-->
                                <div class=" card_dados m-1" id="dados_card{{cliente.cliente_dados_cliente.id}}">
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-md-8">
                                                <h5 class="card-title nome_cliente" id="nome_cliente">
                                                    Cliente: <span
                                                        style="text-transform: capitalize;">{{cliente.cliente_dados_cliente.nome}}</span>
                                                </h5>
                                            </div>


                                            <div class="col-auto">
                                                <a type="button"
                                                    href="/home/historico/{{cliente.cliente_dados_cliente.id}}"
                                                    data-bs-toggle="modal"
                                                    data-bs-target="#modalHistorico{{cliente.cliente_dados_boleto.id}}"
                                                    style="cursor: pointer; background: rgb(217,82,42);
                                background: linear-gradient(0deg, rgba(217,82,42,1) 35%, rgba(235,117,38,1) 65%); color: white;"
                                                    class="btn card_deal tooltip-test" title="Histórico de Mensagens"><i
                                                        class="bi bi-clock-history"></i></a>

                                            </div>
                                            <div class="col-auto">
                                                <a type="button"
                                                    href="/home/edita_registro/{{cliente.cliente_dados_cliente.id}}"
                                                    data-bs-toggle="modal"
                                                    data-bs-target="#modalEditar{{cliente.cliente_dados_cliente.id}}"
                                                    style="cursor: pointer; rgb(61,92,240);
                                background: radial-gradient(circle, rgba(61,92,240,1) 26%, rgba(3,20,163,1) 100%); color:white;"
                                                    class="btn card_deal tooltip-test" title="Editar registro"><i
                                                        class="bi bi-pencil-square"></i></a>

                                            </div>
                                            <div class="col-auto">
                                                <a type="button"
                                                    href="/home/apaga_registro/{{cliente.cliente_dados_cliente.id}}"
                                                    data-bs-toggle="modal"
                                                    data-bs-target="#modalConfirma{{cliente.cliente_dados_boleto.id}}"
                                                    style="cursor: pointer;rgb(214,50,70);
                                background: radial-gradient(circle, rgba(214,50,70,1) 26%, rgba(163,3,3,1) 100%); color: white;"
                                                    class="btn card_deal tooltip-test" title="Excluir registro"><i
                                                        class="bi bi-trash3-fill"></i></a>

                                            </div>
                                        </div>

                                        <div class="row float-start">
                                            <input type="number" value="{{cliente.cliente_dados_cliente.id}}" hidden
                                                class="cliente_id">

                                        </div>

                                        <div class='row'>
                                            <div class="col-md-3">Tel.: <span
                                                    class="tooltip-test">{{cliente.cliente_dados_cliente.telefone}}</span>
                                            </div>

                                            <div class="col-md-6">Email: <span
                                                    class="tooltip-test">{{cliente.cliente_dados_cliente.email}}</a>
                                            </div>
                                        </div>

                                        <div class='row'>
                                            <div class="col-md-6">
                                                <div class="form-floating mb-3">
                                                    <input type="text" readonly class="form-control primeiro_contato "
                                                        id="primeiro_contato" placeholder="Primeiro Contato"
                                                        value='{{cliente.cliente_dados_contato.primeiro_contato}}'>
                                                    <label for="primeiro_contato">Primeiro Contato</label>
                                                </div>
                                            </div>

                                            {%if cliente.cliente_dados_contato.proximo_contato != null %}
                                            <div class='col-md-6'>

                                                <div id="mais_cinco_dias{{cliente.cliente_dados_cliente.id}}"
                                                    class="row">
                                                    <form
                                                        action="{{url_for('update_proximocontato', cliente_id= cliente.cliente_dados_cliente.id, boleto_id = cliente.cliente_dados_boleto.id)}}"
                                                        method='post'>
                                                        <div class="input-group form-floating mb-3">
                                                            <input type="text" readonly
                                                                class="form-control cliente_proximocontato "
                                                                id="proximo_contato" placeholder="Próximo
                                                                Contato" name="adiciona_cinco_dias" readonly
                                                                class="form-control cliente_proximocontato"
                                                                value='{{cliente.cliente_dados_contato.proximo_contato}}'>
                                                            <button type='submit' class='btn_salva btn btn-success'
                                                                data-dias="5"
                                                                onclick="contato_cinco_dias({{cliente.cliente_dados_cliente.id}})"
                                                                title='Adicionar Cinco Dias'>
                                                                +5
                                                            </button>
                                                            <label for="proximo_contato">Próximo
                                                                Contato</label>

                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                            {%endif%}
                                        </div>

                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-floating mb-3">
                                                    <input type="text"
                                                        class="form-control data_final data_ultimo_contato_leads"
                                                        readonly placeholder="Último Contato"
                                                        value='{{cliente.cliente_dados_contato.ultimo_contato}}'>
                                                    <label for="ultimo_contato">Último
                                                        Contato</label>
                                                </div>
                                            </div>

                                            <div id="input_date{{cliente.cliente_dados_cliente.id}}" class="col-md-6">
                                                <form
                                                    action="{{url_for('update_ultimocontato', cliente_id = cliente.cliente_dados_cliente.id, boleto_id = cliente.cliente_dados_boleto.id)}}"
                                                    method='post'>

                                                    <div class="input-group form-floating mb-3">
                                                        <input type='date' placeholder="Alterar Último Contato"
                                                            class='form-control data_modificada div_data'
                                                            name='ultimo_contato'>
                                                        <button type='submit' class='btn_salva btn btn-success'
                                                            title='Alterar Data'>
                                                            <i class='bi bi-check-square'></i>
                                                        </button>

                                                        <label for="ultimo_contato">Alterar
                                                            Último
                                                            Contato</label>

                                                    </div>
                                                </form>
                                            </div>
                                        </div>

                                        <div class='row btn_dias'>

                                        </div>

                                        <br>

                                        <div class='prox_contato'> </div>

                                        <div class="row">
                                            <div class="col-md-3">
                                                <h6>Número Boleto: {{cliente.cliente_dados_boleto.numero_boleto}}
                                                </h6>
                                            </div>

                                            <div class="col-md-3">
                                                <h6>Data Vencimento: <span
                                                        class="data_vencimento{{cliente.cliente_dados_cliente.id}}">{{cliente.cliente_dados_boleto.data_vencimento}}</span>
                                                </h6>
                                            </div>

                                            <div class="col-md-3">
                                                <h6>Valor Boleto: R$ {{cliente.cliente_dados_boleto.valor}}</h6>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-3">
                                                <h6>Valor Multa: R$
                                                    {{cliente.cliente_dados_boleto.valor_multa}}</h6>
                                            </div>

                                            <div class="col-md-3">
                                                <h6>Valor Juros 1%: R$
                                                    {{cliente.cliente_dados_boleto.juros_diarios}}</h6>
                                            </div>
                                        </div>

                                        <div class="row">

                                            <div class="col-md-4 dados_dias_vencido{{cliente.cliente_dados_boleto.id}}">

                                            </div>

                                            <div
                                                class="col-md-4 valor_multa_atualizada{{cliente.cliente_dados_boleto.id}}">

                                            </div>

                                            <div class="col-md-4 valor_atualizado{{cliente.cliente_dados_boleto.id}}">

                                            </div>
                                        </div>

                                        <div class="row">

                                            <div class="col-md-4">
                                                <h6 class="fw-bold" style="color: #38b000;">Data de Pagamento:
                                                    {{cliente.cliente_dados_boleto.data_pagamento}}</h6>
                                            </div>

                                            <div class="col-md-4">
                                                <h6 class="fw-bold" style="color: #38b000;">Valor Pago: R$
                                                    {{cliente.cliente_dados_boleto.valor_pago}}</h6>
                                            </div>
                                        </div>

                                        <div class='row justificativa'>
                                            <div class="col-md-6 div_justificativa{{cliente.cliente_dados_boleto.id}}">
                                                {%if cliente.cliente_dados_topico.topico == '' %}
                                                <div class="col-md-4">
                                                    <h6>Motivo do não pagamento:
                                                        <div class="input-group">
                                                            <input type="text"
                                                                placeholder="Digite o motivo do não pagamento..."
                                                                onkeyup="get_motivos({{cliente.cliente_dados_boleto.id}})"
                                                                class="form-control seleciona_motivo{{cliente.cliente_dados_boleto.id}}">

                                                            <button
                                                                onclick="atualizar_motivo({{cliente.cliente_dados_boleto.id}})"
                                                                class="btn btn-success" type="submit">Salvar</button>
                                                        </div>
                                                    </h6>

                                                </div>
                                                {%else%}
                                                <h6>Motivo do não pagamento:
                                                    <span ondblclick="exibir_input({{cliente.cliente_dados_boleto.id}})"
                                                        class="fw-bold muda_motivo{{cliente.cliente_dados_boleto.id}}">{{cliente.cliente_dados_topico.topico}}</span>
                                                </h6>
                                                {%endif%}
                                            </div>

                                            <div class="col-md-6 div_observacao{{cliente.cliente_dados_boleto.id}}">
                                                {%if cliente.cliente_dados_boleto.observacoes == None%}
                                                <h6 ondblclick="inserir_observacao_paga({{cliente.cliente_dados_boleto.id}})"
                                                    class="insere_obs{{cliente.cliente_dados_boleto.id}}">Observações:
                                                    Não possui observação</h6>
                                                {%else%}
                                                <h6>Observações:
                                                    {{cliente.cliente_dados_boleto.observacoes}}
                                                </h6>
                                                {%endif%}
                                            </div>
                                        </div>

                                        <div class="row">
                                            {%if cliente.cliente_dados_status.status == "Pagamento Confirmado"%}
                                            <div class="row">
                                                <div class="col-auto">
                                                    <h6 class="card-text status_cliente{{cliente.cliente_dados_cliente.id}}"
                                                        style="color: green;">Status:
                                                        {{cliente.cliente_dados_status.status}} </h6>
                                                </div>
                                                <div class="col-auto">
                                                    <h6 class="blob green"></h6>
                                                </div>
                                            </div>
                                            {%endif%}

                                        </div>

                                    </div>

                                </div>
                                <!--FIM CARD CLIENTE-->
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Sair</button>
                            </div>
                        </div>

                    </div>
                </div>
            </div>



            <!-- MODAL HISTÓRICO DE TEXTOS -->
            <div class="modal fade" id="modalHistoricoTextos{{cliente.cliente_dados_cliente.id}}" tabindex="-1"
                aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5" id="exampleModalLabel">Histórico de
                                Textos - <span class="text-capitalize">{{cliente.cliente_dados_topico.topico}}</span>
                            </h1>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>

                        <div class="modal-body">
                            <!--INÍCIO FORM EDITA CLIENTE-->
                            {%for texto in textos%}
                            <div class="row m-1">
                                <div class="card_deal">

                                    <br>
                                    <div class="row">
                                        {%if texto.texto_topico.topico ==
                                        cliente.cliente_dados_topico.topico%}
                                        <p class="text-capitalize lh-base"><b>Texto:</b>
                                            {{texto.texto}}</p>
                                        {%endif%}
                                    </div>

                                </div>
                            </div>
                            <br>
                            {%endfor%}
                            <!--FINAL FORM EDITA CLIENTE-->
                        </div>
                    </div>
                </div>
            </div>
            <!--FINAL MODAL HISTÓRICO DE MENSAGENS-->

            <!-- Modal EMAIL -->
            <div class="modal fade modal_msg" id="modalEmail{{cliente.cliente_dados_cliente.id}}" tabindex="-1"
                aria-labelledby="modalMensagem" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="modalMensagem"><i
                                    class="bi bi-envelope-arrow-up-fill"></i><strong> Enviar
                                    Email</strong></h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body row g-3">

                            <form
                                action="{{url_for('envia_email',cliente_id=cliente.cliente_dados_cliente.id, boleto_id = cliente.cliente_dados_boleto.id)}}"
                                method="POST">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-floating mb-3">
                                            {%if current_user.is_authenticated %}
                                            <input type="text" hidden name="email_usuario_logado"
                                                value="{{current_user.email}}">
                                            {%endif%}
                                            <input type="text" readonly class="form-control" id="floatingName"
                                                name="nome" placeholder="Nome" style="text-transform: uppercase;"
                                                required value="{{cliente.cliente_dados_cliente.nome}}">
                                            <label for="floatingName"><strong>Nome</strong></label>
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <div class="form-floating mb-3">
                                            <input type="text" readonly id="enderecoEmail" style="width: 300px;"
                                                class="form-control" id="email" name="email" required
                                                value="{{cliente.cliente_dados_cliente.email}}">
                                            <label for="enderecoEmail"><strong>Email</strong></label>
                                        </div>
                                    </div>

                                </div>

                                <div class="row">
                                    <div class="col-md-10">
                                        <h6 class="fw-bold">Regras:</h6>
                                        <ol>
                                            <li><b>Nunca</b> cobrar no grupo;</li>
                                            <li>Atualizar a planilha sempre que enviar ou receber contato;</li>
                                            <li>Sempre poderá tirar a multa para pagamento imediato;</li>
                                            <li class="fw-bold">Sempre pegar comprovante do pagamento;</li>
                                            <li><b>Após 07 dias:</b> Começar o protocolo de ligação (duas vezes
                                                por
                                                dia)</li>
                                            <li><b>Após de 01 semana</b> tentando ligar e não conseguindo,
                                                passar o
                                                caso para mim.</li>

                                        </ol>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-10">
                                        <div class="form-floating mb-3">
                                            <input type="text" id="assuntoEmail" style="width: 350px;"
                                                class="form-control" id="assunto" name="assunto_email" required>
                                            <label for="assuntoEmail"><strong>Assunto</strong></label>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-8">
                                        <select
                                            class="form-select titulo_script_gmail{{cliente.cliente_dados_cliente.id}}"
                                            aria-label="Seleciona Script"
                                            onchange="seleciona_texto_gmail({{cliente.cliente_dados_cliente.id}})">

                                        </select>
                                    </div>
                                </div>

                                <div class="form-floating">
                                    <textarea
                                        class="form-control script_pronto_gmail{{cliente.cliente_dados_cliente.id}}"
                                        name="texto_mensagem" rows="3"></textarea>
                                    <label for="floatingSelect">Digite sua mensagem</label>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary"
                                        data-bs-dismiss="modal">Sair</button>
                                    <button type="submit" id="envia" data-bs-toggle="modal" data-bs-target="#loading"
                                        class="btn btn-success"><i class="bi bi-envelope-arrow-up-fill"></i> Enviar
                                        Email</button>
                                </div>
                            </form>
                        </div>

                    </div>
                </div>
            </div>
            <!--FIM MODAL EMAIL-->

            <!-- Modal Messenger -->
            <div class="modal fade modal_msg" id="modalMessenger{{cliente.cliente_dados_cliente.id}}" tabindex="-1"
                aria-labelledby="modalMensagem" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="modalMensagem"><i class="bi bi-whatsapp"></i><strong>
                                    Enviar
                                    Mensagem - WhatsApp</strong></h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>

                        <div class="modal-body row g-3">
                            <form
                                action="{{url_for('salva_mensagem', cliente_id= cliente.cliente_dados_cliente.id, boleto_id = cliente.cliente_dados_boleto.id)}}"
                                method="post">
                                <div class="row">
                                    <div class="col-md-8">
                                        <div class="form-floating mb-3">
                                            <input type="text" readonly class="form-control" id="floatingName"
                                                name="nome" placeholder="Nome" style="text-transform: uppercase;"
                                                required value="{{cliente.cliente_dados_cliente.nome}}">
                                            <label for="floatingName"><strong>Nome</strong></label>
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <div class="form-floating mb-3">
                                            <input type="tel" readonly id="floatingTelefone" style="width: 200px;"
                                                class="form-control" id="tel" name="telefone"
                                                placeholder="Somente Números" required
                                                value="+55{{cliente.cliente_dados_cliente.telefone}}">
                                            <label for="floatingTelefone"><strong>Tel. de
                                                    Contato</strong></label>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-10">
                                        <h6 class="fw-bold">Regras:</h6>
                                        <ol>
                                            <li><b>Nunca</b> cobrar no grupo;</li>
                                            <li>Atualizar a planilha sempre que enviar ou receber contato;</li>
                                            <li>Sempre poderá tirar a multa para pagamento imediato;</li>
                                            <li class="fw-bold">Sempre pegar comprovante do pagamento;</li>
                                            <li><b>Após 07 dias:</b> Começar o protocolo de ligação (duas vezes
                                                por
                                                dia)</li>
                                            <li><b>Após de 01 semana</b> tentando ligar e não conseguindo,
                                                passar o
                                                caso para mim.</li>

                                        </ol>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="form-floating mb-3">
                                            <input type="text" class="form-control" id="assuntoMensagem"
                                                name="assuntoMensagem" placeholder="Assunto"
                                                style="text-transform: uppercase;" required>
                                            <label for="assuntoMensagem">Digite o assunto</label>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-8">
                                        <select
                                            class="form-select titulo_script_whatsapp{{cliente.cliente_dados_cliente.id}}"
                                            aria-label="Seleciona Script"
                                            onchange="seleciona_texto_whatsapp({{cliente.cliente_dados_cliente.id}})">
                                        </select>
                                    </div>
                                </div>

                                <div class="form-floating">
                                    <textarea
                                        class="form-control script_pronto_whatsapp{{cliente.cliente_dados_cliente.id}}"
                                        required name="texto_mensagem" rows="3"></textarea>
                                    <label for="floatingSelect">Digite sua mensagem</label>
                                </div>

                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary"
                                        data-bs-dismiss="modal">Sair</button>
                                    <button type="submit" id="envia"
                                        onclick="envia_zap({{cliente.cliente_dados_cliente.telefone}},{{cliente.cliente_dados_cliente.id}})"
                                        class="btn btn-success"><i class="bi bi-whatsapp"></i> Enviar
                                        WhatsApp</button>
                                </div>

                            </form>
                        </div>

                    </div>
                </div>
            </div>
            <!--FIM MODAL-->

            <!-- MODAL HISTÓRICO DE MENSAGENS -->
            <div class="modal fade" id="modalHistorico{{cliente.cliente_dados_boleto.id}}" tabindex="-1"
                aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered">
                    <div class="modal-content" style="color:black!important">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5" id="exampleModalLabel">Histórico de
                                Mensagens - {{cliente.cliente_dados_cliente.nome}} </h1>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>

                        <div class="modal-body" style="color:black!important">
                            <div class="row">
                                <div class="col-auto"><button title="Enviar mensagem via WhatsApp"
                                        data-bs-toggle="modal"
                                        data-bs-target="#modalMessenger{{cliente.cliente_dados_cliente.id}}" style="background: rgb(61,240,73);
                    background: radial-gradient(circle, rgba(61,240,73,1) 26%, rgba(33,101,19,1) 100%);"
                                        onclick="dados_scripts_whatsapp({{cliente.cliente_dados_cliente.id}})"
                                        class="btn card_deal text-white"><i class="bi bi-whatsapp"></i>
                                        Enviar WhatsApp</button></div>

                                <div class="col-auto"><button href="/sendemail/{{cliente.cliente_dados_cliente.id}}"
                                        data-bs-toggle="modal"
                                        data-bs-target="#modalEmail{{cliente.cliente_dados_cliente.id}}"
                                        onclick="dados_scripts_email({{cliente.cliente_dados_cliente.id}})" style="background: rgb(61,92,240);
                    background: radial-gradient(circle, rgba(61,92,240,1) 26%, rgba(3,20,163,1) 100%);"
                                        title="Enviar Email para o Cliente {{cliente.cliente_dados_cliente.nome}}"
                                        class="btn card_deal text-white"><i class="bi bi-envelope-arrow-up-fill"></i>
                                        Enviar
                                        Email</button></div>
                            </div>
                            <br>
                            <!--INÍCIO HISTÓRICO DE MENSAGENS/EMAIL-->
                            {%for mensagens in cliente.cliente_dados_mensagem%}
                            <div class="row m-1">
                                <div class="card_deal">
                                    <div class="col-auto">
                                        <span class="text-capitalize"><b>Enviado Via:</b>
                                            {{mensagens.origem}}</span>
                                    </div>
                                    <div class="col-auto">
                                        <span><b>Tel. Contato:
                                            </b>{{cliente.cliente_dados_cliente.telefone}}</span>
                                    </div>
                                    <div class="col-auto">
                                        <span><b>E-mail: </b>{{cliente.cliente_dados_cliente.email}}</span>
                                    </div>
                                    <div class="col-auto">
                                        <span><b>Data de envio:</b>
                                            {{mensagens.data_envio}}</span>
                                    </div>
                                    <p class="text-capitalize"><b>Assunto:</b>
                                        {{mensagens.assunto}}</p>
                                    <p class="text-capitalize"><b>Texto:</b>
                                        {{mensagens.texto}}</p>
                                </div>
                            </div>
                            <br>
                            {%endfor%}
                            <!--FINAL  HISTÓRICO DE MENSAGENS/EMAIL-->
                        </div>
                    </div>
                </div>
            </div>
            <!--FINAL MODAL HISTÓRICO DE MENSAGENS-->

            <!-- Modal confirma exclusão -->
            <div class="modal fade" id="modalConfirma{{cliente.cliente_dados_boleto.id}}" tabindex="-1"
                aria-labelledby="confirma" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="confirma">Excluir Registro</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            Deseja realmente excluir o registro referente ao(a) Sr.(a) <b
                                style="text-transform: capitalize;">{{cliente.cliente_dados_cliente.nome}}</b>?
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"><i
                                    class="bi bi-x"></i>
                                Não</button>
                            <form
                                action="{{url_for('delete', cliente_id =cliente.cliente_dados_cliente.id, boleto_id = cliente.cliente_dados_boleto.id)}}"
                                method="post">
                                <button type="submit" data-bs-toggle="modal"
                                    data-bs-target="#modalAguardaExclusaoCliente{{cliente.cliente_dados_cliente.id}}"
                                    class="btn btn-success"><i class="bi bi-check2"></i> Sim</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <!--FIM MODAL CONFIRMA EXCLUSÃO-->




            <!-- Modal AGUARDA exclusão Cliente -->
            <div class="modal fade" id="modalAguardaExclusaoCliente{{cliente.cliente_dados_cliente.id}}"
                data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel"
                aria-hidden="true">
                <div class="modal-dialog modal-sm modal-dialog-centered">
                    <div class="modal-content bg-danger">
                        <div class="modal-body">
                            <span class="spinner-border spinner-border-sm text-light" aria-hidden="true"></span>
                            <span role="status" class="text-white">Aguarde! Excluindo registro do cliente
                                {{cliente.cliente_dados_cliente.nome}}...</span>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Fim Modal AGUARDA exclusão Cliente -->

            <!-- MODAL EDITA CLIENTE -->
            <div class="modal fade" id="modalEditar{{cliente.cliente_dados_cliente.id}}" tabindex="-1"
                aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5" id="exampleModalLabel">Editar
                                Cadastro Cliente - {{cliente.cliente_dados_cliente.nome}} </h1>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>

                        <div class="modal-body">
                            <!--INÍCIO FORM EDITA CLIENTE-->
                            <form action="{{url_for('update_cliente', id= cliente.cliente_dados_cliente.id)}}"
                                method="post">
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="form-floating mb-3">
                                            <input type="text" class="form-control primeiro_contato_editado"
                                                iname="primeiro_contato_editado" readonly
                                                value="{{cliente.cliente_dados_contato.primeiro_contato}}"
                                                id="primeiro_contato" placeholder="Data Cadastro">
                                            <label for="primeiro_contato">Data Cadastro</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="form-floating mb-3">
                                        <input type="text" class="form-control text-uppercase" id="nome"
                                            name="nome_editado" value="{{cliente.cliente_dados_cliente.nome}}"
                                            placeholder="Nome">
                                        <label for="nome">Nome</label>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="form-floating mb-3">
                                            <input type="text" class="form-control" id="telefone"
                                                value="{{cliente.cliente_dados_cliente.telefone}}"
                                                name="telefone_editado" placeholder="Telefone">
                                            <label for="telefone">Telefone</label>
                                        </div>
                                    </div>

                                    <div class="col-md-8">
                                        <div class="form-floating mb-3">
                                            <input type="email" class="form-control" id="email"
                                                value="{{cliente.cliente_dados_cliente.email}}" name="email_editado"
                                                placeholder="Email">
                                            <label for="floatingInput">Email</label>
                                        </div>
                                    </div>
                                </div>

                                <div class="modal-footer">
                                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Sair</button>
                                    <button type="submit" class="btn btn-success">Salvar</button>
                                </div>
                            </form>
                            <!--FINAL FORM EDITA CLIENTE-->
                        </div>
                    </div>
                </div>
            </div>
            <!--FINAL MODAL EDITA CLIENTE-->




            <!-- Modal AGUARDA ATUALIZAÇÃO CLIENTE -->
            <div class="modal fade" id="modalAguardaAtualiza{{cliente.cliente_dados_cliente.id}}"
                data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel"
                aria-hidden="true">
                <div class="modal-dialog modal-sm modal-dialog-centered">
                    <div class="modal-content bg-primary">
                        <div class="modal-body">
                            <span class="spinner-border spinner-border-sm text-light" aria-hidden="true"></span>
                            <span role="status" class="text-white">Aguarde! Atualizando registro...</span>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Fim Modal AGUARDA ATUALIZAÇÃO CLIENTE -->
            </td>
            </tr>
            {%endfor%}
            </tbody>
            </table>

            <h6 hidden class="text-center text-white fw-bold  titulo">Pagamento Confirmado</h6>
            <div hidden class="row colunas-dados" style="border-top-color: #38b000;"></div>

            {%for cliente in clientes_adimplentes_mensal%}
            <div hidden class="row text-white  linha-dados card_deal text-start"
                onclick="converte_data_adimplente({{cliente.cliente_dados_boleto.id}})">
                <a href="{{cliente.cliente_dados_cliente.id}}" data-bs-toggle="modal"
                    data-bs-target="#modalPagamentoConfirmado{{cliente.cliente_dados_boleto.id}}"
                    class="texto-dados">Cliente:
                    {{cliente.cliente_dados_cliente.nome|upper}}</a>
                {%if cliente.cliente_dados_mensagem == []%}
                <div class="col-md-4">
                    <a href="{{cliente.cliente_dados_cliente.id}}" class="texto-dados" data-bs-toggle="modal"
                        data-bs-target="#modalPagamentoConfirmado{{cliente.cliente_dados_boleto.id}}">Primeiro
                        Contato: <span
                            class="data_ultimo_contato_leads_editado">{{cliente.cliente_dados_contato.primeiro_contato}}</span></a>
                </div>
                <div class="col-md-4">
                    <a href="{{cliente.cliente_dados_cliente.id}}" class="texto-dados" data-bs-toggle="modal"
                        data-bs-target="#modalPagamentoConfirmado{{cliente.cliente_dados_boleto.id}}">Último
                        Contato: <span
                            class="data_ultimo_contato_leads_editado">{{cliente.cliente_dados_contato.ultimo_contato}}</span></a>
                </div>
                <div class="col-md-4">
                    <a href="{{cliente.cliente_dados_cliente.id}}" class="texto-dados" data-bs-toggle="modal"
                        data-bs-target="#modalPagamentoConfirmado{{cliente.cliente_dados_boleto.id}}">Próximo
                        Contato: <span
                            class="data_primeiro_contato_editado">{{cliente.cliente_dados_contato.proximo_contato}}</span></a>
                </div>
                <div class="col-md-auto">
                    <a href="{{cliente.cliente_dados_cliente.id}}" class="texto-dados" data-bs-toggle="modal"
                        data-bs-target="#modalPagamentoConfirmado{{cliente.cliente_dados_boleto.id}}">Boleto
                        N.:
                        {{cliente.cliente_dados_boleto.numero_boleto}}
                    </a>
                </div>
                <div class="col-md-auto">
                    <a href="{{cliente.cliente_dados_cliente.id}}" class="texto-dados" data-bs-toggle="modal"
                        data-bs-target="#modalPagamentoConfirmado{{cliente.cliente_dados_boleto.id}}">Valor
                        Boleto: R$
                        {{cliente.cliente_dados_boleto.valor}}
                    </a>
                    <input type="text" class="valor_boleto{{cliente.cliente_dados_boleto.id}}" hidden
                        value="{{cliente.cliente_dados_boleto.valor}}">
                </div>
                <div class="col-md-auto">
                    <a href="{{cliente.cliente_dados_cliente.id}}" class="texto-dados" data-bs-toggle="modal"
                        data-bs-target="#modalPagamentoConfirmado{{cliente.cliente_dados_boleto.id}}">Valor
                        Multa Diária: R$
                        {{cliente.cliente_dados_boleto.valor_multa}}
                    </a>
                    <input type="text" class="valor_multa{{cliente.cliente_dados_boleto.id}}" hidden
                        value="{{cliente.cliente_dados_boleto.valor_multa}}">
                </div>

                <a href="{{cliente.cliente_dados_cliente.id}}" class="texto-dados" data-bs-toggle="modal"
                    data-bs-target="#modalPagamentoConfirmado{{cliente.cliente_dados_boleto.id}}">Meio de
                    Contato: Não houve
                    troca de mensagens</a>

                {%else%}

                <div class="col-md-4">
                    <a href="{{cliente.cliente_dados_cliente.id}}" class="texto-dados" data-bs-toggle="modal"
                        data-bs-target="#modalPagamentoConfirmado{{cliente.cliente_dados_boleto.id}}">Primeiro
                        Contato: <span
                            class="data_ultimo_contato_leads_editado">{{cliente.cliente_dados_contato.primeiro_contato}}</span></a>
                </div>
                <div class="col-md-4">
                    <a href="{{cliente.cliente_dados_cliente.id}}" class="texto-dados" data-bs-toggle="modal"
                        data-bs-target="#modalPagamentoConfirmado{{cliente.cliente_dados_boleto.id}}">Último
                        Contato: <span
                            class="data_ultimo_contato_leads_editado">{{cliente.cliente_dados_mensagem[-1].data_envio}}</span></a>
                </div>
                <div class="col-md-4">
                    <a href="{{cliente.cliente_dados_cliente.id}}" class="texto-dados" data-bs-toggle="modal"
                        data-bs-target="#modalPagamentoConfirmado{{cliente.cliente_dados_boleto.id}}">Próximo
                        Contato: <span
                            class="data_primeiro_contato_editado">{{cliente.cliente_dados_contato.proximo_contato}}</span></a>
                </div>
                <div class="col-md-auto">
                    <a href="{{cliente.cliente_dados_cliente.id}}" class="texto-dados" data-bs-toggle="modal"
                        data-bs-target="#modalPagamentoConfirmado{{cliente.cliente_dados_boleto.id}}">Boleto
                        N.:
                        {{cliente.cliente_dados_boleto.numero_boleto}}
                    </a>
                </div>
                <div class="col-md-auto">
                    <a href="{{cliente.cliente_dados_cliente.id}}" class="texto-dados" data-bs-toggle="modal"
                        data-bs-target="#modalPagamentoConfirmado{{cliente.cliente_dados_boleto.id}}">Valor
                        Boleto: R$
                        {{cliente.cliente_dados_boleto.valor}}
                    </a>
                    <input type="text" class="valor_boleto{{cliente.cliente_dados_boleto.id}}" hidden
                        value="{{cliente.cliente_dados_boleto.valor}}">
                </div>
                <div class="col-md-auto">
                    <a href="{{cliente.cliente_dados_cliente.id}}" class="texto-dados" data-bs-toggle="modal"
                        data-bs-target="#modalPagamentoConfirmado{{cliente.cliente_dados_boleto.id}}">Valor
                        Multa Diária: R$
                        {{cliente.cliente_dados_boleto.valor_multa}}
                    </a>
                    <input type="text" class="valor_multa{{cliente.cliente_dados_boleto.id}}" hidden
                        value="{{cliente.cliente_dados_boleto.valor_multa}}">
                </div>

                <a href="{{cliente.cliente_dados_cliente.id}}" class="texto-dados" data-bs-toggle="modal"
                    data-bs-target="#modalPagamentoConfirmado{{cliente.cliente_dados_boleto.id}}">Meio de
                    Contato:
                    {{cliente.cliente_dados_mensagem[-1].origem}}</a>

                {%endif%}

                <div class="col-md-auto">
                    <a href="{{cliente.cliente_dados_cliente.id}}" class="fw-bold texto-dados" data-bs-toggle="modal"
                        data-bs-target="#modalPagamentoConfirmado{{cliente.cliente_dados_boleto.id}}">Data
                        Vencimento: {{cliente.cliente_dados_boleto.data_vencimento}}</a>

                    <input type="text" hidden class="data_vencimento{{cliente.cliente_dados_boleto.id}}"
                        value="{{cliente.cliente_dados_boleto.data_vencimento}}">
                </div>

                <div class="col-md-auto">
                    <a href="{{cliente.cliente_dados_cliente.id}}" class="fw-bold" style="color: #38b000;"
                        data-bs-toggle="modal"
                        data-bs-target="#modalPagamentoConfirmado{{cliente.cliente_dados_boleto.id}}">Data
                        Pagamento: {{cliente.cliente_dados_boleto.data_pagamento}}</a>

                    <input type="text" hidden class="data_pagamento{{cliente.cliente_dados_boleto.id}}"
                        value="{{cliente.cliente_dados_boleto.data_pagamento}}">
                    <input type="text" hidden class="juros_diarios{{cliente.cliente_dados_boleto.id}}"
                        value="{{cliente.cliente_dados_boleto.juros_diarios}}">
                </div>

                {%if cliente.cliente_dados_boleto.valor_pago != None %}
                <div class="col-md-auto">
                    <a href="{{cliente.cliente_dados_cliente.id}}" class="fw-bold" style="color: #38b000;"
                        data-bs-toggle="modal"
                        data-bs-target="#modalPagamentoConfirmado{{cliente.cliente_dados_boleto.id}}">Valor
                        Pago: R$
                        {{cliente.cliente_dados_boleto.valor_pago}}</a>
                </div>
                {%endif%}

            </div>
            {%endfor%}
        </div>

        {%for cliente in clientes_adimplentes_mensal%}
        <!-- Modal Pagamento Confirmado-->
        <div class="modal fade" id="modalPagamentoConfirmado{{cliente.cliente_dados_boleto.id}}" tabindex="-1"
            aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-xl">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5 fw-bold text-success" id="exampleModalLabel">Pagamento
                            Confirmado <i class="bi bi-cash-stack"></i></h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <!--INÍCIO CARD CLIENTE-->
                        <div class=" card_dados m-1" id="dados_card{{cliente.cliente_dados_cliente.id}}">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-8">
                                        <h5 class="card-title nome_cliente" id="nome_cliente">
                                            Cliente: <span
                                                style="text-transform: capitalize;">{{cliente.cliente_dados_cliente.nome}}</span>
                                        </h5>
                                    </div>


                                    <div class="col-auto">
                                        <a type="button" href="/home/historico/{{cliente.cliente_dados_cliente.id}}"
                                            data-bs-toggle="modal"
                                            data-bs-target="#modalHistorico{{cliente.cliente_dados_boleto.id}}"
                                            style="cursor: pointer; background: rgb(217,82,42);
                                background: linear-gradient(0deg, rgba(217,82,42,1) 35%, rgba(235,117,38,1) 65%); color: white;" class="btn card_deal tooltip-test"
                                            title="Histórico de Mensagens"><i class="bi bi-clock-history"></i></a>

                                    </div>
                                    <div class="col-auto">
                                        <a type="button"
                                            href="/home/edita_registro/{{cliente.cliente_dados_cliente.id}}"
                                            data-bs-toggle="modal"
                                            data-bs-target="#modalEditar{{cliente.cliente_dados_cliente.id}}"
                                            style="cursor: pointer; rgb(61,92,240);
                                background: radial-gradient(circle, rgba(61,92,240,1) 26%, rgba(3,20,163,1) 100%); color:white;" class="btn card_deal tooltip-test"
                                            title="Editar registro"><i class="bi bi-pencil-square"></i></a>

                                    </div>
                                    <div class="col-auto">
                                        <a type="button"
                                            href="/home/apaga_registro/{{cliente.cliente_dados_cliente.id}}"
                                            data-bs-toggle="modal"
                                            data-bs-target="#modalConfirma{{cliente.cliente_dados_boleto.id}}"
                                            style="cursor: pointer;rgb(214,50,70);
                                background: radial-gradient(circle, rgba(214,50,70,1) 26%, rgba(163,3,3,1) 100%); color: white;" class="btn card_deal tooltip-test"
                                            title="Excluir registro"><i class="bi bi-trash3-fill"></i></a>

                                    </div>
                                </div>

                                <div class="row float-start">
                                    <input type="number" value="{{cliente.cliente_dados_cliente.id}}" hidden
                                        class="cliente_id">

                                </div>

                                <div class='row'>
                                    <div class="col-md-3">Tel.: <span
                                            class="tooltip-test">{{cliente.cliente_dados_cliente.telefone}}</span>
                                    </div>

                                    <div class="col-md-6">Email: <span
                                            class="tooltip-test">{{cliente.cliente_dados_cliente.email}}</a>
                                    </div>
                                </div>

                                <div class='row'>
                                    <div class="col-md-6">
                                        <div class="form-floating mb-3">
                                            <input type="text" readonly class="form-control primeiro_contato "
                                                id="primeiro_contato" placeholder="Primeiro Contato"
                                                value='{{cliente.cliente_dados_contato.primeiro_contato}}'>
                                            <label for="primeiro_contato">Primeiro Contato</label>
                                        </div>
                                    </div>

                                    {%if cliente.cliente_dados_contato.proximo_contato != null %}
                                    <div class='col-md-6'>

                                        <div id="mais_cinco_dias{{cliente.cliente_dados_cliente.id}}" class="row">
                                            <form
                                                action="{{url_for('update_proximocontato', cliente_id= cliente.cliente_dados_cliente.id, boleto_id = cliente.cliente_dados_boleto.id)}}"
                                                method='post'>
                                                <div class="input-group form-floating mb-3">
                                                    <input type="text" readonly
                                                        class="form-control cliente_proximocontato "
                                                        id="proximo_contato" placeholder="Próximo
                                                                Contato" name="adiciona_cinco_dias" readonly
                                                        class="form-control cliente_proximocontato"
                                                        value='{{cliente.cliente_dados_contato.proximo_contato}}'>
                                                    <button type='submit' class='btn_salva btn btn-success'
                                                        data-dias="5"
                                                        onclick="contato_cinco_dias({{cliente.cliente_dados_cliente.id}})"
                                                        title='Adicionar Cinco Dias'>
                                                        +5
                                                    </button>
                                                    <label for="proximo_contato">Próximo
                                                        Contato</label>

                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                    {%endif%}
                                </div>

                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-floating mb-3">
                                            <input type="text" class="form-control data_final data_ultimo_contato_leads"
                                                readonly placeholder="Último Contato"
                                                value='{{cliente.cliente_dados_contato.ultimo_contato}}'>
                                            <label for="ultimo_contato">Último
                                                Contato</label>
                                        </div>
                                    </div>

                                    <div id="input_date{{cliente.cliente_dados_cliente.id}}" class="col-md-6">
                                        <form
                                            action="{{url_for('update_ultimocontato', cliente_id = cliente.cliente_dados_cliente.id, boleto_id = cliente.cliente_dados_boleto.id)}}"
                                            method='post'>

                                            <div class="input-group form-floating mb-3">
                                                <input type='date' placeholder="Alterar Último Contato"
                                                    class='form-control data_modificada div_data' name='ultimo_contato'>
                                                <button type='submit' class='btn_salva btn btn-success'
                                                    title='Alterar Data'>
                                                    <i class='bi bi-check-square'></i>
                                                </button>

                                                <label for="ultimo_contato">Alterar
                                                    Último
                                                    Contato</label>

                                            </div>
                                        </form>
                                    </div>
                                </div>

                                <div class='row btn_dias'>

                                </div>

                                <br>

                                <div class='prox_contato'> </div>

                                <div class="row">
                                    <div class="col-md-3">
                                        <h6>Número Boleto: {{cliente.cliente_dados_boleto.numero_boleto}}
                                        </h6>
                                    </div>

                                    <div class="col-md-3">
                                        <h6>Data Vencimento: <span
                                                class="data_vencimento{{cliente.cliente_dados_cliente.id}}">{{cliente.cliente_dados_boleto.data_vencimento}}</span>
                                        </h6>
                                    </div>

                                    <div class="col-md-3">
                                        <h6>Valor Boleto: R$ {{cliente.cliente_dados_boleto.valor}}</h6>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-3">
                                        <h6>Valor Multa: R$
                                            {{cliente.cliente_dados_boleto.valor_multa}}</h6>
                                    </div>

                                    <div class="col-md-3">
                                        <h6>Valor Juros 1%: R$
                                            {{cliente.cliente_dados_boleto.juros_diarios}}</h6>
                                    </div>
                                </div>

                                <div class="row">

                                    <div class="col-md-4 dados_dias_vencido{{cliente.cliente_dados_boleto.id}}">

                                    </div>

                                    <div class="col-md-4 valor_multa_atualizada{{cliente.cliente_dados_boleto.id}}">

                                    </div>

                                    <div class="col-md-4 valor_atualizado{{cliente.cliente_dados_boleto.id}}">

                                    </div>
                                </div>

                                <div class="row">

                                    <div class="col-md-4">
                                        <h6 class="fw-bold" style="color: #38b000;">Data de Pagamento:
                                            {{cliente.cliente_dados_boleto.data_pagamento}}</h6>
                                    </div>

                                    <div class="col-md-4">
                                        <h6 class="fw-bold" style="color: #38b000;">Valor Pago: R$
                                            {{cliente.cliente_dados_boleto.valor_pago}}</h6>
                                    </div>
                                </div>

                                <br>

                                <div class='row justificativa'>
                                    <div class="col-md-auto">
                                        <h6>Motivo do não pagamento: <span
                                                class="fw-bold">{{cliente.cliente_dados_topico.topico}}</span>
                                        </h6>
                                    </div>
                                </div>
                                <div class="row">
                                    {%if cliente.cliente_dados_status.status == "Pagamento Confirmado"%}
                                    <div class="row">
                                        <div class="col-auto">
                                            <h6 class="card-text status_cliente{{cliente.cliente_dados_cliente.id}}"
                                                style="color: green;">Status:
                                                {{cliente.cliente_dados_status.status}} </h6>
                                        </div>
                                        <div class="col-auto">
                                            <h6 class="blob green"></h6>
                                        </div>
                                    </div>
                                    {%endif%}

                                </div>

                            </div>

                        </div>
                        <!--FIM CARD CLIENTE-->
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Sair</button>
                    </div>
                </div>

            </div>
        </div>
    </div>



    <!-- MODAL HISTÓRICO DE TEXTOS -->
    <div class="modal fade" id="modalHistoricoTextos{{cliente.cliente_dados_cliente.id}}" tabindex="-1"
        aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Histórico de
                        Textos - <span class="text-capitalize">{{cliente.cliente_dados_topico.topico}}</span>
                    </h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <div class="modal-body">
                    <!--INÍCIO FORM EDITA CLIENTE-->
                    {%for texto in textos%}
                    <div class="row m-1">
                        <div class="card_deal">

                            <br>
                            <div class="row">
                                {%if texto.texto_topico.topico ==
                                cliente.cliente_dados_topico.topico%}
                                <p class="text-capitalize lh-base"><b>Texto:</b>
                                    {{texto.texto}}</p>
                                {%endif%}
                            </div>

                        </div>
                    </div>
                    <br>
                    {%endfor%}
                    <!--FINAL FORM EDITA CLIENTE-->
                </div>
            </div>
        </div>
    </div>
    <!--FINAL MODAL HISTÓRICO DE MENSAGENS-->

    <!-- Modal EMAIL -->
    <div class="modal fade modal_msg" id="modalEmail{{cliente.cliente_dados_cliente.id}}" tabindex="-1"
        aria-labelledby="modalMensagem" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalMensagem"><i class="bi bi-envelope-arrow-up-fill"></i><strong>
                            Enviar
                            Email</strong></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body row g-3">

                    <form
                        action="{{url_for('envia_email',cliente_id=cliente.cliente_dados_cliente.id, boleto_id = cliente.cliente_dados_boleto.id)}}"
                        method="POST">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    {%if current_user.is_authenticated %}
                                    <input type="text" hidden name="email_usuario_logado"
                                        value="{{current_user.email}}">
                                    {%endif%}
                                    <input type="text" readonly class="form-control" id="floatingName" name="nome"
                                        placeholder="Nome" style="text-transform: uppercase;" required
                                        value="{{cliente.cliente_dados_cliente.nome}}">
                                    <label for="floatingName"><strong>Nome</strong></label>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-floating mb-3">
                                    <input type="text" readonly id="enderecoEmail" style="width: 300px;"
                                        class="form-control" id="email" name="email" required
                                        value="{{cliente.cliente_dados_cliente.email}}">
                                    <label for="enderecoEmail"><strong>Email</strong></label>
                                </div>
                            </div>

                        </div>

                        <div class="row">
                            <div class="col-md-10">
                                <h6 class="fw-bold">Regras:</h6>
                                <ol>
                                    <li><b>Nunca</b> cobrar no grupo;</li>
                                    <li>Atualizar a planilha sempre que enviar ou receber contato;</li>
                                    <li>Sempre poderá tirar a multa para pagamento imediato;</li>
                                    <li class="fw-bold">Sempre pegar comprovante do pagamento;</li>
                                    <li><b>Após 07 dias:</b> Começar o protocolo de ligação (duas vezes
                                        por
                                        dia)</li>
                                    <li><b>Após de 01 semana</b> tentando ligar e não conseguindo,
                                        passar o
                                        caso para mim.</li>

                                </ol>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-10">
                                <div class="form-floating mb-3">
                                    <input type="text" id="assuntoEmail" style="width: 350px;" class="form-control"
                                        id="assunto" name="assunto_email" required>
                                    <label for="assuntoEmail"><strong>Assunto</strong></label>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-8">
                                <select class="form-select titulo_script_gmail{{cliente.cliente_dados_cliente.id}}"
                                    aria-label="Seleciona Script"
                                    onchange="seleciona_texto_gmail({{cliente.cliente_dados_cliente.id}})">

                                </select>
                            </div>
                        </div>

                        <div class="form-floating">
                            <textarea class="form-control script_pronto_gmail{{cliente.cliente_dados_cliente.id}}"
                                name="texto_mensagem" rows="3"></textarea>
                            <label for="floatingSelect">Digite sua mensagem</label>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Sair</button>
                            <button type="submit" id="envia" data-bs-toggle="modal" data-bs-target="#loading"
                                class="btn btn-success"><i class="bi bi-envelope-arrow-up-fill"></i> Enviar
                                Email</button>
                        </div>
                    </form>
                </div>

            </div>
        </div>
    </div>
    <!--FIM MODAL EMAIL-->

    <!-- Modal Messenger -->
    <div class="modal fade modal_msg" id="modalMessenger{{cliente.cliente_dados_cliente.id}}" tabindex="-1"
        aria-labelledby="modalMensagem" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalMensagem"><i class="bi bi-whatsapp"></i><strong>
                            Enviar
                            Mensagem - WhatsApp</strong></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <div class="modal-body row g-3">
                    <form
                        action="{{url_for('salva_mensagem', cliente_id= cliente.cliente_dados_cliente.id, boleto_id = cliente.cliente_dados_boleto.id)}}"
                        method="post">
                        <div class="row">
                            <div class="col-md-8">
                                <div class="form-floating mb-3">
                                    <input type="text" readonly class="form-control" id="floatingName" name="nome"
                                        placeholder="Nome" style="text-transform: uppercase;" required
                                        value="{{cliente.cliente_dados_cliente.nome}}">
                                    <label for="floatingName"><strong>Nome</strong></label>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-floating mb-3">
                                    <input type="tel" readonly id="floatingTelefone" style="width: 200px;"
                                        class="form-control" id="tel" name="telefone" placeholder="Somente Números"
                                        required value="+55{{cliente.cliente_dados_cliente.telefone}}">
                                    <label for="floatingTelefone"><strong>Tel. de
                                            Contato</strong></label>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-10">
                                <h6 class="fw-bold">Regras:</h6>
                                <ol>
                                    <li><b>Nunca</b> cobrar no grupo;</li>
                                    <li>Atualizar a planilha sempre que enviar ou receber contato;</li>
                                    <li>Sempre poderá tirar a multa para pagamento imediato;</li>
                                    <li class="fw-bold">Sempre pegar comprovante do pagamento;</li>
                                    <li><b>Após 07 dias:</b> Começar o protocolo de ligação (duas vezes
                                        por
                                        dia)</li>
                                    <li><b>Após de 01 semana</b> tentando ligar e não conseguindo,
                                        passar o
                                        caso para mim.</li>

                                </ol>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control" id="assuntoMensagem" name="assuntoMensagem"
                                        placeholder="Assunto" style="text-transform: uppercase;" required>
                                    <label for="assuntoMensagem">Digite o assunto</label>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-8">
                                <select class="form-select titulo_script_whatsapp{{cliente.cliente_dados_cliente.id}}"
                                    aria-label="Seleciona Script"
                                    onchange="seleciona_texto_whatsapp({{cliente.cliente_dados_cliente.id}})">
                                </select>
                            </div>
                        </div>

                        <div class="form-floating">
                            <textarea class="form-control script_pronto_whatsapp{{cliente.cliente_dados_cliente.id}}"
                                required name="texto_mensagem" rows="3"></textarea>
                            <label for="floatingSelect">Digite sua mensagem</label>
                        </div>

                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Sair</button>
                            <button type="submit" id="envia"
                                onclick="envia_zap({{cliente.cliente_dados_cliente.telefone}},{{cliente.cliente_dados_cliente.id}})"
                                class="btn btn-success"><i class="bi bi-whatsapp"></i> Enviar
                                WhatsApp</button>
                        </div>

                    </form>
                </div>

            </div>
        </div>
    </div>
    <!--FIM MODAL-->

    <!-- MODAL HISTÓRICO DE MENSAGENS -->
    <div class="modal fade" id="modalHistorico{{cliente.cliente_dados_boleto.id}}" tabindex="-1"
        aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Histórico de
                        Mensagens - {{cliente.cliente_dados_cliente.nome}} </h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <div class="modal-body">
                    <div class="row">
                        <div class="col-auto"><button title="Enviar mensagem via WhatsApp" data-bs-toggle="modal"
                                data-bs-target="#modalMessenger{{cliente.cliente_dados_cliente.id}}" style="background: rgb(61,240,73);
                    background: radial-gradient(circle, rgba(61,240,73,1) 26%, rgba(33,101,19,1) 100%);"
                                onclick="dados_scripts_whatsapp({{cliente.cliente_dados_cliente.id}})"
                                class="btn card_deal text-white"><i class="bi bi-whatsapp"></i>
                                Enviar WhatsApp</button></div>

                        <div class="col-auto"><button href="/sendemail/{{cliente.cliente_dados_cliente.id}}"
                                data-bs-toggle="modal" data-bs-target="#modalEmail{{cliente.cliente_dados_cliente.id}}"
                                onclick="dados_scripts_email({{cliente.cliente_dados_cliente.id}})" style="background: rgb(61,92,240);
                    background: radial-gradient(circle, rgba(61,92,240,1) 26%, rgba(3,20,163,1) 100%);"
                                title="Enviar Email para o Cliente {{cliente.cliente_dados_cliente.nome}}"
                                class="btn card_deal text-white"><i class="bi bi-envelope-arrow-up-fill"></i>
                                Enviar
                                Email</button></div>
                    </div>
                    <br>
                    <!--INÍCIO HISTÓRICO DE MENSAGENS/EMAIL-->
                    {%for mensagens in cliente.cliente_dados_mensagem%}
                    <div class="row m-1">
                        <div class="card_deal">
                            <div class="col-auto">
                                <span class="text-capitalize"><b>Enviado Via:</b>
                                    {{mensagens.origem}}</span>
                            </div>
                            <div class="col-auto">
                                <span><b>Tel. Contato:
                                    </b>{{cliente.cliente_dados_cliente.telefone}}</span>
                            </div>
                            <div class="col-auto">
                                <span><b>E-mail: </b>{{cliente.cliente_dados_cliente.email}}</span>
                            </div>
                            <div class="col-auto">
                                <span><b>Data de envio:</b>
                                    {{mensagens.data_envio}}</span>
                            </div>
                            <p class="text-capitalize"><b>Assunto:</b>
                                {{mensagens.assunto}}</p>
                            <p class="text-capitalize"><b>Texto:</b>
                                {{mensagens.texto}}</p>
                        </div>
                    </div>
                    <br>
                    {%endfor%}
                    <!--FINAL  HISTÓRICO DE MENSAGENS/EMAIL-->
                </div>
            </div>
        </div>
    </div>
    <!--FINAL MODAL HISTÓRICO DE MENSAGENS-->

    <!-- Modal confirma exclusão -->
    <div class="modal fade" id="modalConfirma{{cliente.cliente_dados_boleto.id}}" tabindex="-1"
        aria-labelledby="confirma" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="confirma">Excluir Registro</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    Deseja realmente excluir o registro referente ao(a) Sr.(a) <b
                        style="text-transform: capitalize;">{{cliente.cliente_dados_cliente.nome}}</b>?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"><i class="bi bi-x"></i>
                        Não</button>
                    <form
                        action="{{url_for('delete', cliente_id =cliente.cliente_dados_cliente.id, boleto_id = cliente.cliente_dados_boleto.id)}}"
                        method="post">
                        <button type="submit" data-bs-toggle="modal"
                            data-bs-target="#modalAguardaExclusaoCliente{{cliente.cliente_dados_cliente.id}}"
                            class="btn btn-success"><i class="bi bi-check2"></i> Sim</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!--FIM MODAL CONFIRMA EXCLUSÃO-->




    <!-- Modal AGUARDA exclusão Cliente -->
    <div class="modal fade" id="modalAguardaExclusaoCliente{{cliente.cliente_dados_cliente.id}}"
        data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-sm modal-dialog-centered">
            <div class="modal-content bg-danger">
                <div class="modal-body">
                    <span class="spinner-border spinner-border-sm text-light" aria-hidden="true"></span>
                    <span role="status" class="text-white">Aguarde! Excluindo registro do cliente
                        {{cliente.cliente_dados_cliente.nome}}...</span>
                </div>
            </div>
        </div>
    </div>
    <!-- Fim Modal AGUARDA exclusão Cliente -->

    <!-- MODAL EDITA CLIENTE -->
    <div class="modal fade" id="modalEditar{{cliente.cliente_dados_cliente.id}}" tabindex="-1"
        aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Editar
                        Cadastro Cliente - {{cliente.cliente_dados_cliente.nome}} </h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <div class="modal-body">
                    <!--INÍCIO FORM EDITA CLIENTE-->
                    <form action="{{url_for('update_cliente', id= cliente.cliente_dados_cliente.id)}}" method="post">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control primeiro_contato_editado"
                                        iname="primeiro_contato_editado" readonly
                                        value="{{cliente.cliente_dados_contato.primeiro_contato}}" id="primeiro_contato"
                                        placeholder="Data Cadastro">
                                    <label for="primeiro_contato">Data Cadastro</label>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control text-uppercase" id="nome" name="nome_editado"
                                    value="{{cliente.cliente_dados_cliente.nome}}" placeholder="Nome">
                                <label for="nome">Nome</label>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control" id="telefone"
                                        value="{{cliente.cliente_dados_cliente.telefone}}" name="telefone_editado"
                                        placeholder="Telefone">
                                    <label for="telefone">Telefone</label>
                                </div>
                            </div>

                            <div class="col-md-8">
                                <div class="form-floating mb-3">
                                    <input type="email" class="form-control" id="email"
                                        value="{{cliente.cliente_dados_cliente.email}}" name="email_editado"
                                        placeholder="Email">
                                    <label for="floatingInput">Email</label>
                                </div>
                            </div>
                        </div>

                        <div class="modal-footer">
                            <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Sair</button>
                            <button type="submit" class="btn btn-success">Salvar</button>
                        </div>
                    </form>
                    <!--FINAL FORM EDITA CLIENTE-->
                </div>
            </div>
        </div>
    </div>
    <!--FINAL MODAL EDITA CLIENTE-->




    <!-- Modal AGUARDA ATUALIZAÇÃO CLIENTE -->
    <div class="modal fade" id="modalAguardaAtualiza{{cliente.cliente_dados_cliente.id}}" data-bs-backdrop="static"
        data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-sm modal-dialog-centered">
            <div class="modal-content bg-primary">
                <div class="modal-body">
                    <span class="spinner-border spinner-border-sm text-light" aria-hidden="true"></span>
                    <span role="status" class="text-white">Aguarde! Atualizando registro...</span>
                </div>
            </div>
        </div>
    </div>
    <!-- Fim Modal AGUARDA ATUALIZAÇÃO CLIENTE -->
    {%endfor%}
    </div>
    </div>


    <!-- MODAL CADASTRA -->
    <div class="modal fade" id="modalAdicionaCadastro" tabindex="-1" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Dados do Cliente</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <div class="modal-body">
                    <!--INÍCIO FORM CADASTRA CLIENTE-->
                    <form action="{{url_for('cadastra_cliente')}}" method="post">
                        {%if current_user.is_authenticated%}
                        <input type="text" value="{{current_user.id}}" name="usuario_id" hidden>
                        {%endif%}
                        <div class="row">
                            <div class="col-md-2">
                                <div class="form-floating mb-3" id="data_atual">

                                </div>
                            </div>

                            <div class="col-md-8">
                                <div class="form-floating mb-3 ui-widget">
                                    <input type="text" class="form-control text-uppercase nome_cliente"
                                        id="nome_cliente" name="nome" required placeholder="Nome"
                                        onkeyup="buscar_cliente_antigo()" onmouseover="buscar_cliente_antigo()">
                                    <label for="nome_cliente">Nome</label>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-floating mb-3">
                                    <input type="tel" class="form-control telefone_cliente" required id="telefone"
                                        name="telefone" placeholder="Telefone">
                                    <label for="telefone">Telefone</label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-floating mb-3 emailCliente">
                                    <input type="text" class="form-control email_cliente" name="email" required
                                        id="email" placeholder="name@example.com">
                                    <label for="email">Email</label>
                                </div>
                            </div>

                            <div class="col-md-2">
                                <div class="form-check">
                                    <input class="form-check-input" onclick="mudar_email()" name="nao_possui_email"
                                        type="checkbox" value="" id="flexCheckDefault">
                                    <label class="form-check-label" for="flexCheckDefault">
                                        Não Possui Email
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-floating mb-3" id="numeroboleto">
                                    <input type="text" class="form-control" id="numero_boleto" name="numero_boleto"
                                        placeholder="Número Boleto" required>
                                    <label for="numero_boleto">Número Boleto</label>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-floating mb-3" id="data_vencimento">
                                    <input type="date" onclick="contato_tres_dias(this)"
                                        class="form-control data_vencimento" id="data_vencimento" name="data_vencimento"
                                        placeholder="Data de Vencimento" required>
                                    <label for="data_vencimento">Data de Vencimento</label>
                                </div>
                            </div>

                            <div class="col-md-4 prox_contato_modal">
                                <div class="form-floating mb-3">
                                    <input class="form-control" name='data_proximo_contato'
                                        placeholder="Próximo Contato" type="text" readonly> <label
                                        for="titulo_vencimento">Próximo Contato</label>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-floating mb-3" id="valor">
                                    <input type="text" class="form-control" name="valor_boleto"
                                        onkeyup="calcular_multa()" placeholder="Valor Boleto" id="valor_boleto"
                                        required>
                                    <label for="valor_boleto">Valor Boleto</label>
                                    <div class="form-text" id="basic-addon4">Digitar somente números.
                                        Ex.: 6000.00</div>
                                </div>
                            </div>

                            <div class="col-md-4 valormulta">
                                <div class="form-floating mb-3" id="valorMulta">
                                    <input type="text" class="form-control" name="valor_multa" readonly
                                        placeholder="Valor Multa Diária" id="valor_multa">
                                    <label for="valor_multa">Valor Multa </label>
                                    <div class="form-text" id="basic-addon4">Valor de 10% sobre o valor total do boleto
                                    </div>

                                </div>
                            </div>

                            <div class="col-md-4 jurosdiarios">
                                <div class="form-floating mb-3" id="jurosdiarios">
                                    <input type="text" class="form-control" name="juros_diarios" readonly
                                        placeholder="Juros Diários" id="juros_diarios">
                                    <label for="juros_diarios">Juros Diários </label>
                                    <div class="form-text" id="basic-addon4">Juros de 1% ao mês</div>
                                </div>
                            </div>
                        </div>
                        <br>

                        <!--BTN DIAS PARA EXTENDER O PRAZO-->
                        <div class='row btn_dias'>
                            <div class="col-md-4">
                                <div class="form-floating mb-3 ui-widget">
                                    <input type="text" class="form-control motivo_autocomplete" name="select_topicos"
                                        id="select_topico" placeholder="Motivo do Não Pagamento">
                                    <label for="select_topico">Motivo do Não Pagamento</label>
                                </div>
                            </div>

                            <div class="col-md-8">
                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control" name="observacoes" id="observacoes"
                                        placeholder="Observações">
                                    <label for="observacoes">Observações</label>
                                </div>
                            </div>


                        </div>
                        <!--FINAL BTN DIAS-->

                        <br>
                        <!--INSERE SELECT MOTIVOS E JUSTIFICATIVAS-->
                        <div class="row">


                            <div class="col-4 insert_botao"> </div>

                        </div>
                        <!--FIM SELECT MOTIVOS E JUSTIFICATIVAS-->

                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Sair</button>
                            <button class="btn btn-danger" type="reset">Limpar Campos</button>
                            <button type="submit" data-bs-toggle="modal" data-bs-target="#staticBackdrop"
                                class="btn btn-success">Salvar</button>
                        </div>
                    </form>
                    <!--FINAL FORM CADASTRA CLIENTE-->
                </div>
            </div>
        </div>
    </div>
    <!--FINAL MODAL CADASTRA-->

    <!-- Modal Adicionando Cadstro -->
    <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-sm modal-dialog-centered">
            <div class="modal-content bg-success">
                <div class="modal-body">
                    <span class="spinner-border spinner-border-sm text-light" aria-hidden="true"></span>
                    <span role="status" class="text-white">Aguarde! Adicionando cadastro...</span>
                </div>
            </div>
        </div>
    </div>


    </div>


    {%for cliente in ano_atual.ano_clientes%}
    <!-- Modal -->
    <div class="modal fade" id="modalSearchData{{cliente.id}}" tabindex="-1" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Cliente - {{cliente.nome}} </h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <!--TABELA BOLETOS PENDENTES-->
                        <div class="col-md-10">
                            <table
                                class="table table-responsive display table-hover table-striped table-bordered tabelaClientePagamentoPendente">
                                <thead class="table-dark">
                                    <tr>
                                        <th class="text-center" scope="col">Num. Boleto</th>
                                        <th class="text-center" scope="col">Valor Boleto</th>
                                        <th class="text-center" scope="col">Data Vencimento</th>
                                        <th class="text-center" scope="col">Data Pagamento</th>
                                        <th class="text-center" scope="col">Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {%for boleto in cliente.clientes_boleto%}
                                    {%if boleto.status_id==1%}
                                    <tr style="cursor: pointer;" data-bs-toggle="modal"
                                        data-bs-target="#modalPagamentoPendente{{boleto.id}}"
                                        onclick="converte_data({{boleto.id}})">
                                        <td class="text-center text-danger fw-bold">
                                            {{boleto.numero_boleto}}
                                        </td>
                                        <td class="text-center text-danger fw-bold">
                                            R$ {{boleto.valor}}
                                        </td>
                                        <td class="text-center text-danger fw-bold">
                                            {{boleto.data_vencimento}}
                                        </td>
                                        {%if boleto.data_pagamento == None%}
                                        <td class="text-center text-danger fw-bold">Aguardando Pagamento</td>
                                        {%else%}
                                        <td class="text-center">
                                            {{boleto.data_pagamento}}
                                        </td>
                                        {%endif%}
                                        <td class="text-center text-danger fw-bold">
                                            {{boleto.boleto_status.status}}
                                            <input type="text" class="valor_multa{{boleto.id}}" hidden
                                                value="{{boleto.valor_multa}}">
                                        </td>
                                    </tr>

                                    {%else%}

                                    <tr style="cursor: pointer;" onclick="converte_data_adimplente({{boleto.id}})"
                                        class="text-center" style="cursor: pointer;" data-bs-toggle="modal"
                                        data-bs-target="#modalPagamentoConfirmado{{boleto.id}}">
                                        <td class="text-center fw-bold text-success">
                                            {{boleto.numero_boleto}}
                                        </td>
                                        <td class="text-center fw-bold text-success">
                                            R$ {{boleto.valor}}
                                        </td>
                                        <td class="text-center fw-bold text-success">
                                            {{boleto.data_vencimento}}
                                            <input type="text" class="valor_multa{{boleto.id}}" hidden
                                                value="{{boleto.valor_multa}}">
                                        </td>
                                        {%if boleto.data_pagamento == None%}
                                        <td class="text-center">Aguardando Pagamento</td>
                                        {%else%}
                                        <td class="text-center fw-bold text-success">
                                            {{boleto.data_pagamento}}
                                        </td>
                                        {%endif%}
                                        <td class="text-center fw-bold text-success">
                                            {{boleto.boleto_status.status}}
                                        </td>
                                    </tr>
                                    {%endif%}
                                    {%endfor%}
                                </tbody>
                            </table>
                        </div>
                        <!--FIM TABELA BOLETOS PENDENTES-->

                        <!--TABELA BOLETOS PAGOS-->
                        <div class="col-md-10">

                        </div>
                        <!--FIM TABELA BOLETOS PAGOS-->
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Sair</button>\
                </div>
            </div>
        </div>
    </div>
    {%endfor%}


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
    <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.2/js/dataTables.buttons.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.print.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.colVis.min.js"></script>

    <style>
        .ui-autocomplete {
            max-height: 100px;
            overflow-y: auto;
            z-index: 3000 !important;
            /* prevent horizontal scrollbar */
            overflow-x: hidden;
        }

        /* IE 6 doesn't support max-height
   * we use height instead, but this forces the menu to always be this tall
   */
        * html .ui-autocomplete {
            height: 100px;
        }

        .select_motivo {
            display: none;
        }


        .blob {
            background: black;
            border-radius: 50%;
            box-shadow: 0 0 0 0 rgba(0, 0, 0, 1);
            height: 20px;
            width: 20px;
            transform: scale(1);
            animation: pulse-black 2s infinite;
        }

        @keyframes pulse-black {
            0% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(0, 0, 0, 0.7);
            }

            70% {
                transform: scale(1);
                box-shadow: 0 0 0 10px rgba(0, 0, 0, 0);
            }

            100% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(0, 0, 0, 0);
            }
        }

        .blob.white {
            background: white;
            box-shadow: 0 0 0 0 rgba(255, 255, 255, 1);
            animation: pulse-white 2s infinite;
        }

        @keyframes pulse-white {
            0% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.7);
            }

            70% {
                transform: scale(1);
                box-shadow: 0 0 0 10px rgba(255, 255, 255, 0);
            }

            100% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(255, 255, 255, 0);
            }
        }

        .blob.red {
            background: rgb(245, 1, 1);
            box-shadow: 0 0 0 0 rgba(255, 82, 82, 1);
            animation: pulse-red 2s infinite;
        }

        @keyframes pulse-red {
            0% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(255, 82, 82, 0.7);
            }

            70% {
                transform: scale(1);
                box-shadow: 0 0 0 10px rgba(255, 82, 82, 0);
            }

            100% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(255, 82, 82, 0);
            }
        }

        .blob.orange {
            background: rgba(255, 121, 63, 1);
            box-shadow: 0 0 0 0 rgba(255, 121, 63, 1);
            animation: pulse-orange 2s infinite;
        }

        @keyframes pulse-orange {
            0% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(255, 121, 63, 0.7);
            }

            70% {
                transform: scale(1);
                box-shadow: 0 0 0 10px rgba(255, 121, 63, 0);
            }

            100% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(255, 121, 63, 0);
            }
        }

        .blob.yellow {
            background: #f77f00;
            box-shadow: 0 0 0 0 rgba(255, 177, 66, 1);
            animation: pulse-yellow 2s infinite;
        }

        @keyframes pulse-yellow {
            0% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(255, 177, 66, 0.7);
            }

            70% {
                transform: scale(1);
                box-shadow: 0 0 0 10px rgba(255, 177, 66, 0);
            }

            100% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(255, 177, 66, 0);
            }
        }

        .blob.blue {
            background: #003049;
            box-shadow: 0 0 0 0 rgb(34, 152, 202);
            animation: pulse-blue 2s infinite;
        }

        @keyframes pulse-blue {
            0% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(52, 172, 224, 0.7);
            }

            70% {
                transform: scale(1);
                box-shadow: 0 0 0 10px rgba(52, 172, 224, 0);
            }

            100% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(52, 172, 224, 0);
            }
        }

        .blob.green {
            background: rgb(38, 196, 7);
            box-shadow: 0 0 0 0 rgb(101, 226, 52);
            animation: pulse-green 2s infinite;
        }

        @keyframes pulse-green {
            0% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(51, 217, 178, 0.7);
            }

            70% {
                transform: scale(1);
                box-shadow: 0 0 0 10px rgba(51, 217, 178, 0);
            }

            100% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(51, 217, 178, 0);
            }
        }

        .blob.purple {
            background: rgba(142, 68, 173, 1);
            box-shadow: 0 0 0 0 rgba(142, 68, 173, 1);
            animation: pulse-purple 2s infinite;
        }

        @keyframes pulse-purple {
            0% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(142, 68, 173, 0.7);
            }

            70% {
                transform: scale(1);
                box-shadow: 0 0 0 10px rgba(142, 68, 173, 0);
            }

            100% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(142, 68, 173, 0);
            }
        }

        .linha-dados {
            border-left: transparent;
            border-right: transparent;
            border-top: transparent;
            margin-top: 5px;
        }

        .colunas-dados {
            border-style: solid;
            border-top-width: 15px;
            border-bottom: transparent;
            border-left: transparent;
            border-right: transparent;
        }
    </style>

    <script>
        new DataTable("#tabela_pagamentos_pendentes");
        new DataTable("#tabela_pagamento_confirmado");

        function alterar_data_vencimento(boleto_id) {
            $(`#modalPagamentoPendente${boleto_id}`).find(`.div_data_vencimento${boleto_id}`).remove(`.data_vencimento_boleto${boleto_id}`);
            $(`#modalPagamentoPendente${boleto_id}`).find(`.div_data_vencimento${boleto_id}`).html(`<div class='input-group mb-3'>\
                <input type = 'date' class= 'form-control nova_data${boleto_id}' aria-label='Recipient's username' aria - describedby='button-addon2'>\
            <button class='btn btn-success' onclick="update_data_vencimento(${boleto_id})"  type='submit' id='button-addon2'>Salvar</button>\
            </div >`);
        }

        function mudar_email() {
            if ($("#modalAdicionaCadastro").find('input[name="nao_possui_email"]').is(':checked')) {

                $("#modalAdicionaCadastro").find('.emailCliente').remove('.email_cliente');
                $("#modalAdicionaCadastro").find('.emailCliente').html('<div class="form-floating mb-3 emailCliente">\
                                    <input type="text" readonly class="form-control email_cliente" name="email" \
                                        id="email" value="Cliente não possui e-mail" >\
                                    <label for="email">Email</label>\
                                </div>');
            } else {
                $("#modalAdicionaCadastro").find('.emailCliente').remove('.email_cliente');
                $("#modalAdicionaCadastro").find('.emailCliente').html('<div class="form-floating mb-3 emailCliente">\
                                    <input type="email" class="form-control email_cliente" name="email" required\
                                        id="email" placeholder="name@example.com">\
                                    <label for="email">Email</label>\
                                </div>');
            }
        }



        var contador = 0;
        function criarIDUnico() {
            return contador++;
        }
        //FUNÇÃO PARA MUDAR O VALOR DO PROCEDIMENTO O ESCOLHER UM PROCEDIMENTO
        $('#select_procedimentos').change(function (event) {
            var valor = event.currentTarget.value;
            $("#valor").html("R$ " + valor);
            console.log(valor);
        });

        function get_data_atual() {
            let data_atual = new Date();
            $("#data_atual").html(`<input type="text" id="calendario" name="data_atual" value='${data_atual.toLocaleDateString()}' readonly
                                    class="form-control text-uppercase">
                                    <label for="calendario">Data Cadastro</label>`)
            console.log(data_atual.toLocaleDateString());
        }

        get_data_atual();

        function esconde_input(id) {
            $(`#flip${id}`).click(function () {
                $(`#input_date${id}`).toggle();
                // $(`#input_date${id}`).show();
            });
        }


        function libera_botao(id) {
            if ($('input[name=checkContratou]:checked').val() === 'checkContratou') {
                $(`#cliente${id}`).find('.insere_formulario').find('.formulario_cadastro').html('<div class="row linha_inputs">\
                <div class="col-md-auto">\
                <div class= "form-floating mb-3" >\
                <input type="date" class="form-control" name="data_vencimento"\
                id="data_vencimento" placeholder="Data Vencimento">\
                <label for="data_vencimento">Data Vencimento</label>\
                </div>\
                </div >\
                <div class="col-md-auto">\
                <button type="submit" class= "btn btn-primary card_deal\
                btn-cadastra" > Contratou</button >\
                </div >\
                </div > ');
            } else {
                $(`#cliente${id}`).find('.insere_formulario').find('.formulario_cadastro').find('.linha_inputs').remove();
            }
        }

        function altera_data(selectElement) {
            const selectValue = selectElement.value;
            const data_final = $(selectElement).closest(".data_final");
            const cliente_id = $(selectElement).closest("#dados_card").find(".cliente_id").val();

            data_final.dblclick(function () {
                data_final.replaceWith("<<div class='div_data'>\
                            <input type='date' class='form-control data_modificada' name='ultimo_contato'>\
                            <button type='submit' class='btn_salva btn btn-success' title='Alterar Data' >\
                                <i class='bi bi-check-square'></i>\
                                </button>\
                                </div>");
            });
        }

        function salva_data(selectElement) {
            const selectValue = selectElement.value;
            const ultimo_contato = $(selectElement).closest(".ultimo_contato");
            const data_modificada = $(selectElement).closest(".div_data");
            const btn_salva = $(selectElement).closest(".btn_salva");

            btn_salva.dblclick(function () {
                data = new Date($(".data_modificada").val());
                dataFormatada = data.toLocaleDateString('pt-BR', { timeZone: 'UTC' });
                data_modificada.replaceWith(`<input type="text" class="form-control data_final" readonly value='${dataFormatada}' onclick="altera_data(this)">`);
            });
        }

        function limpa_campos() {
            $('.nome_cliente').val('');
            $('.telefone_cliente').val('');
            $('.email_cliente').val('');
            $('#numero_boleto').val('');
            $('.data_vencimento').val('');
            $('#valor_boleto').val('');
            $('#valor_multa').val('');
            $('#juros_diarios').val('');
            $('#titulo_vencimento').val('');
            $('#select_topico').val('');
        }


        function excluir_card(obj) {
            $(obj).closest(`.novo_card`).remove();
        }



        //PRORROGARÁ POR MAIS 3 DIAS O PRÓXIMO CONTATO, COM BASE NA DATA DE CASTRO DO CLIENTE
        function contato_tres_dias(button) {
            const modal_data = $(button).closest("#modalAdicionaCadastro").find("#data_atual").find("#calendario").val();
            //console.log("data: " + modal_data);
            const dataFormatada = moment(modal_data, "DD/MM/YYYY");
            const dias = parseInt($(button).data("dias"));
            var minhaData = dataFormatada.clone().add(3, 'days').format('DD/MM/YYYY');
            console.log(minhaData);
            $(button).closest("#modalAdicionaCadastro").find(".prox_contato_modal").find('input[name="data_proximo_contato"]').val(minhaData);
        }

        //PRORROGARÁ POR MAIS 5 DIAS O PRÓXIMO CONTATO, COM BASE NO ÚLTIMO CONTATO COM O CLIENTE
        function contato_cinco_dias(id) {
            const data_final = $(`#dados_card${id}`).find(".data_final").val();
            console.log(data_final);

            moment.locale('pt-br');
            const dataFormatada = moment(data_final, "DD/MM/YYYY");
            //const dias = parseInt($(id).data("dias"));
            var minhaData = dataFormatada.clone().add(5, 'days').format('DD/MM/YYYY');
            console.log(minhaData);
            //card.find(".proximo_contato").html(minhaData);
            $(`#dados_card${id}`).find(".cliente_proximocontato").replaceWith(`<input type="text" name="adiciona_cinco_dias" readonly
                                        class="form-control cliente_proximocontato"
                                        value='${minhaData}'>`);
        }


        //PRORROGARÁ POR MAIS 3 DIAS O PRÓXIMO CONTATO -> MODAL EDITA CADASTRO
        function contato_tres_dias_edita(button, id) {
            const modal_data = $(button).closest(`#modalEditar${id}`).find(".primeiro_contato_editado").val();
            console.log(modal_data);
            data = new Date(modal_data);
            const dtFormatada = data.toLocaleDateString('pt-BR', { timeZone: 'UTC' });
            console.log(dtFormatada);
            moment.locale('pt-br');
            const dataFormatada = moment(dtFormatada, "DD/MM/YYYY");
            const dias = parseInt($(button).data("dias"));
            var minhaData = dataFormatada.clone().add(dias, 'days').format('DD/MM/YYYY');
            console.log(minhaData);
            $(button).closest(`#modalEditar${id}`).find(".edita_prox_contato_modal").html(`<p class='text'>Próximo Contato: <input type='text' readonly class='proximo_contato' value='${minhaData}' name='edita_prox_contato_modal'></p>`);
        }


        async function dados_scripts_whatsapp(id) {
            fetch("../static/js/script_cobranca.json")
                .then(function (resp) {
                    return resp.json();
                })
                .then(function (data) {
                    titulos_scripts = '';
                    scripts = '';
                    escolha = `<option selected>Escolha um tópico</option>`;
                    for (i = 0; i < data.length; i++) {
                        titulos = `<option value="${data[i].textos.map(texto => texto.texto)}">${data[i].tipo}</option>`;
                        script = data[i].textos.map(texto => texto.texto);
                        titulos_scripts += titulos;
                        scripts += script;
                        console.log(data[i].tipo);
                        console.log("Texto: " + data[i].textos.map(texto => texto.texto));

                        let container = document.querySelector(`.titulo_script_whatsapp${id}`);
                        container.innerHTML = escolha + titulos_scripts;
                    }
                });
        }


        function seleciona_texto_whatsapp(obj) {
            const titulo = $(".modal_msg").find(`.titulo_script_whatsapp${obj}`).val();
            $(".modal_msg").find(`.script_pronto_whatsapp${obj}`).html(titulo);
        }

        async function dados_scripts_email(id) {
            fetch("../static/js/script_cobranca.json")
                .then(function (resp) {
                    return resp.json();
                })
                .then(function (data) {
                    titulos_scripts = '';
                    scripts = '';
                    escolha = `<option selected>Escolha um tópico</option>`;
                    for (i = 0; i < data.length; i++) {
                        titulos = `<option value="${data[i].textos.map(texto => texto.texto)}">${data[i].tipo}</option>`;
                        script = data[i].textos.map(texto => texto.texto);
                        titulos_scripts += titulos;
                        scripts += script;
                        console.log(data[i].tipo);
                        console.log("Texto: " + data[i].textos.map(texto => texto.texto));

                        let container = document.querySelector(`.titulo_script_gmail${id}`);
                        container.innerHTML = escolha + titulos_scripts;
                    }
                });
        }


        function envia_zap(numero, id) {
            const text = $(`.modal_msg`).find(`.script_pronto_whatsapp${id}`).val();
            console.log(text);

            if (text === "") {
                alert('Escreva uma mensagem para o destinatário');
            } else {
                var url = `https://wa.me//55${numero}?text=${encodeURI(text)}`;
                window.open(url);

            }

        }

        function seleciona_texto_gmail(obj) {
            const titulo = $(".modal_msg").find(`.titulo_script_gmail${obj}`).val();
            $(".modal_msg").find(`.script_pronto_gmail${obj}`).html(titulo);
        }

        function insere_select_edita(id) {
            //const name = $().attr('name');
            const prox_contato_id = $(`#dados_card${id}`).find(`.cliente_proximocontato`).val();
            console.log(prox_contato_id);
            if ($(`input[name='radio_select_${id}']:checked`).val() === "Comprou") {
                $(`#modalEditar${id}`).find(`.insert_select_${id}`).html(`<select class="selectpicker form-control border-0  rounded shadow status" name='seleciona_status_edita'>\
                                    <option value="Selecione um status" selected>Status da operação</option>\
                                    {%for status in status%}
                                        <option value="{{status.id}}">{{status.status}}</option>
                                    {%endfor%}
                                </select>`);
                $(`#modalEditar${id}`).find(`.procedimento${id}`).html(`<select class="selectpicker form-control border-0 select_procedimentos_edita  rounded shadow" required
                                        name="select_procedimentos_edita" id="select_procedimentos_edita">
                                        <option selected>Escolha um procedimento</option>
                                        {%for procedimento in procedimentos%}
                                            <option value="{{procedimento.id}}">{{procedimento.nome}}</option>
                                        {%endfor%}
                                    </select>`);
                $(`#modalEditar${id}`).find(`.btn_dias_${id}`).find(".col_tres_dias").remove();
                $(`#modalEditar${id}`).find(`.btn_dias_${id}`).find(".col_cinco_dias").remove();
                $(`#modalEditar${id}`).find(`motivo_select_${id}`).remove();

            } else {
                $(`#modalEditar${id}`).find(`.insert_select_${id}`).html(`<select name='seleciona_status_edita' class="selectpicker form-control border-0  rounded shadow status" onclick="edita_select_procedimentos(this)">\
                                    <option value="Selecione um status" selected>Status da operação</option>\
                                    {%for status in status%}
                                        <option value="{{status.id}}">{{status.status}}</option>
                                    {%endfor%}
                                </select>`);

                $(`#modalEditar${id}`).find(`.btn_dias_${id}`).html(`<div class='col-auto col_tres_dias'><button type='button' class='tres_dias btn btn-primary' onclick='contato_tres_dias_edita(this,${id})' data-dias="3">+ 3 dias</button></div>
                                <div class='col-auto col_cinco_dias'><button type='button' class='cinco_dias btn btn-primary' onclick='contato_cinco_dias(this)' data-dias="5">+ 5 dias</button></div>`);

                $(`#modalEditar${id}`).find(`.select_motivo_${id}`).html(`<select class="selectpicker form-control border-0 motivo_select_${id} rounded shadow motivo" onclick='motivo_resposta(this)' name='seleciona_topico'>\
                                    <option value="Selecione um motivo" selected>Selecione um motivo</option>\
                                    {%for topico in topicos%}
                                        <option value="{{topico.id}}">{{topico.topico}}</option>
                                    {%endfor%}
                                </select>`);

                $(`#modalEditar${id}`).find(`.edita_prox_contato_modal`).html(`<div class="input-group mb-3">
                        <span class="input-group-text" id="basic-addon1">Próximo Contato</span>
                        <input type="text" class="form-control data_final" readonly name='edita_prox_contato_modal'
                            value='${prox_contato_id}'>
                    </div>`);

                $(`#modalEditar${id}`).find(`.procedimento${id}`).html(`<select class="selectpicker form-control border-0 select_procedimentos_edita  rounded shadow" required
                                        name="select_procedimentos_edita" id="select_procedimentos_edita">
                                        <option selected>Escolha um procedimento</option>
                                        {%for procedimento in procedimentos%}
                                            <option value="{{procedimento.id}}">{{procedimento.nome}}</option>
                                        {%endfor%}
                                    </select>`);

            }
        }

        function insere_select(x) {
            //const name = $().attr('name');
            if ($(`input[name='radio_select']:checked`).val() === "Sim") {
                $(x).closest("#modalAdicionaCadastro").find(".numero_titulo_vencimento").css({ 'display': 'block' });

            } else {
                $(x).closest("#modalAdicionaCadastro").find(".numero_titulo_vencimento").css({ 'display': 'none' });

            }
        }

        function aplicar_multa(x) {
            if ($(`input[name='radio_multa']:checked`).val() === "Não") {
                $(x).closest("#modalAdicionaCadastro").find(".valormulta").css({ 'display': 'block' });

            } else {
                $(x).closest("#modalAdicionaCadastro").find(".valormulta").css({ 'display': 'none' });
            }
        }



        function inserir_novo_topico(x) {

            $(x).closest("#modalAdicionaCadastro").find(".select_motivo").html('<br><div class="input-group mb-3 novo_topico">\
                                        <input type="text" style="text-transform: uppercase;" class="form-control"  \
                                        id="novo_topico" placeholder="Novo Tópico" aria-label="nome"\
                                        aria-describedby="basic-addon1"><button type="button" class="btn btn-success" onclick="post_topico()">Salvar</button>\
                                </div>');
            $(x).closest("#modalAdicionaCadastro").find(".insert_botao").html('<button class="btn btn-success btn-novo-topico" onclick="insere_select(this)" type="button">Selecionar tópico</button>');
        }


        function insere_select_procedimentos(x) {
            if ($(`select[name='seleciona_status']`).val() === '6') {
                $(x).closest("#modalAdicionaCadastro").find(".insere_select_procedimentos").html(`<select class="selectpicker form-control border-0 select_procedimentos  rounded shadow" required
                                        name="select_procedimentos" id="select_procedimentos">
                                        <option selected>Escolha um procedimento</option>
                                        {%for procedimento in procedimentos%}
                                            <option value="{{procedimento.id}}">{{procedimento.nome}}</option>
                                        {%endfor%}
                                    </select>`);
            } else {
                $(x).closest("#modalAdicionaCadastro").find(".insere_select_procedimentos").find('.select_procedimentos').remove();
            }
        }



        function calcular_multa() {
            var valor_boleto = $("#valor_boleto").val();
            var total = (10 * valor_boleto) / 100;
            var juros_diarios = (1 * valor_boleto) / 100;

            $("#modalAdicionaCadastro").find("#valor_multa").val(total.toFixed(2));
            $("#modalAdicionaCadastro").find("#juros_diarios").val(juros_diarios.toFixed(2));

        }



        //PESQUISA CLIENTE
        $(function () {
            var availableTags = [{%for cliente in clientes %} 
            {%if cliente.empresa_id == usuario.empresa_id %}
        '{{cliente.nome}}',
            {% endif %}
        {% endfor %}     ];
        $("#tags").autocomplete({
            source: availableTags
        });
        });


        //VERIFICA CLIENTE EXISTENTE
        $(function () {
            var nome_cliente = [{%for cliente in clientes %} 
        '{{cliente.nome}}',
        {% endfor %}     ];
        $("#modalAdicionaCadastro").find("#nome_cliente").autocomplete({
            source: nome_cliente
        });
        });


        //AUTOCOMPLETE TÓPICOS
        $(function () {
            var motivos = [{%for motivo in motivos %} 
                '{{motivo.topico}}',
            {% endfor %}];
        $("#modalAdicionaCadastro").find("#select_topico").autocomplete({
            source: motivos
        });
            });



        function confirmar_pagamento(id, boleto_id, valor_boleto) {
            $(`.div-btn${id}`).replaceWith(`<div class="col-md-6">
                <div class="input-group mb-3">
                <input type="date" class="form-control" id="data_pagamento${id}" placeholder="Data Pagamento" aria-label="Recipient's username" aria-describedby="button-save">
                <input type="text" class="form-control" id="valor_pago${id}" value="${valor_boleto}" placeholder="Valor Pago" aria-label="Recipient's username" aria-describedby="button-save">
                <button class="btn btn-success card_deal" data-bs-toggle="modal"
                    data-bs-target="#modalConfirmaPagamento${id}" onclick="pagamento_confirmado(${id}, ${boleto_id})" type="submit" id="button-save">Salvar</button>
                </div>
                </div>`);
        }

        function pagamento_confirmado(cliente_id, boleto_id) {
            const data_pagamento = $(`#data_pagamento${cliente_id}`).val();
            const date = new Date(data_pagamento).toLocaleDateString('pt-BR', { timeZone: 'UTC' });
            const status = 'Pagamento Confirmado';
            const valor_boleto = $(`#valor_pago${cliente_id}`).val();

            var procedimento_dict = [{
                "status": status, "data_pagamento": date, "valor_boleto": valor_boleto
            }];
            console.log(procedimento_dict);

            $.ajax({
                type: "POST",
                url: "/pagamento_confirmado/" + cliente_id + "_" + boleto_id,
                data: JSON.stringify(procedimento_dict),
                contentType: "application/json",
                dataType: 'json',
                success: function (result) {
                    numRows.innerHTML = result.rows;
                }
            });

            window.location.reload();
        }

        //EXIBIR INPUT PARA INSERIR MOTIVO OU NOVO MOTIVO
        function exibir_input(boleto_id) {
            $(`#modalPagamentoPendente${boleto_id}`).find(`.muda_motivo${boleto_id}`).replaceWith(`<div class="input-group">
                                                                                <input type="text"
                                                                                    placeholder="Digite o motivo do não pagamento..."
                                                                                    onkeyup="get_motivos(${boleto_id})"
                                                                                    class="form-control seleciona_motivo${boleto_id}">

                                                                                <button
                                                                                    onclick="atualizar_motivo(${boleto_id})"
                                                                                    class="btn btn-success"
                                                                                    type="submit">Salvar</button>
                                                                            </div>`);
        }

        //AUTOCOMPLETE TÓPICOS
        function get_motivos(boleto_id) {
            var motivo_atualizado = [{%for motivo in motivo %}
        '{{motivo.topico}}',
            {% endfor %}];
        $(`#modalPagamentoPendente${boleto_id}`).find(`.seleciona_motivo${boleto_id}`).autocomplete({
            source: motivo_atualizado
        });
        }

        function atualizar_motivo(boleto_id) {
            const motivo = $(`#modalPagamentoPendente${boleto_id}`).find(`.seleciona_motivo${boleto_id}`).val();

            var procedimento_dict = [{ "motivo": motivo }];
            console.log(procedimento_dict);

            $.ajax({
                type: "POST",
                url: "/inserir_motivo/" + boleto_id,
                data: JSON.stringify(procedimento_dict),
                contentType: "application/json",
                dataType: 'json',
                success: function (result) {
                    numRows.innerHTML = result.rows;
                }
            });
            $(`#modalPagamentoPendente${boleto_id}`).find(`.div_justificativa${boleto_id}`).html(`<h6>Motivo do não pagamento:
                                                        <span ondblclick="exibir_input(${boleto_id})" class="fw-bold">${motivo}</span>
                                                    </h6>`);
        }

        //EXIBIR INPUT PARA INSERIR UMA OBSERVAÇÃO
        function inserir_observacao(boleto_id) {
            $(`#modalPagamentoPendente${boleto_id}`).find(`.insere_obs${boleto_id}`).replaceWith(`<div class="input-group">
                                                                                <input type="text"
                                                                                    placeholder="Digite uma observação..."
                                                                                    class="form-control update_obs${boleto_id}">
                                                                                <button
                                                                                    onclick="atualizar_observacao(${boleto_id})"
                                                                                    class="btn btn-success card_deal"
                                                                                    type="submit">Salvar</button>
                                                                            </div>`);
        }

        //EXIBIR INPUT PARA INSERIR UMA OBSERVAÇÃO
        function inserir_observacao_paga(boleto_id) {
            $(`#modalPagamentoConfirmado${boleto_id}`).find(`.insere_obs${boleto_id}`).replaceWith(`<div class="input-group">
                                                                                <input type="text"
                                                                                    placeholder="Digite uma observação..."
                                                                                    class="form-control update_obs${boleto_id}">
                                                                                <button
                                                                                    onclick="atualizar_observacao_pagamento_confirmado(${boleto_id})"
                                                                                    class="btn btn-success card_deal"
                                                                                    type="submit">Salvar</button>
                                                                            </div>`);
        }

        function atualizar_observacao(boleto_id) {
            const observacao = $(`#modalPagamentoPendente${boleto_id}`).find(`.update_obs${boleto_id}`).val();

            var procedimento_dict = [{ "observacao": observacao }];
            //console.log(procedimento_dict);

            $.ajax({
                type: "POST",
                url: "/inserir_observacao/" + boleto_id,
                data: JSON.stringify(procedimento_dict),
                contentType: "application/json",
                dataType: 'json',
                success: function (result) {
                    numRows.innerHTML = result.rows;
                }
            });
            $(`#modalPagamentoPendente${boleto_id}`).find(`.div_observacao${boleto_id}`).html(`<h6>Observações:
                                                        <span ondblclick="inserir_observacao(${boleto_id})" class="fw-bold">${observacao}</span>
                                                    </h6>`);
        }

        function atualizar_observacao_pagamento_confirmado(boleto_id) {
            const observacao = $(`#modalPagamentoConfirmado${boleto_id}`).find(`.update_obs${boleto_id}`).val();

            var procedimento_dict = [{ "observacao": observacao }];
            //console.log(procedimento_dict);

            $.ajax({
                type: "POST",
                url: "/inserir_observacao/" + boleto_id,
                data: JSON.stringify(procedimento_dict),
                contentType: "application/json",
                dataType: 'json',
                success: function (result) {
                    numRows.innerHTML = result.rows;
                }
            });
            $(`#modalPagamentoConfirmado${boleto_id}`).find(`.div_observacao${boleto_id}`).html(`<h6>Observações:
                                                        <span ondblclick="inserir_observacao_paga(${boleto_id})" class="fw-bold">${observacao}</span>
                                                    </h6>`);
        }


        function update_data_vencimento(boleto_id) {
            const data_vencimento = $(`#modalPagamentoPendente${boleto_id}`).find(`.div_data_vencimento${boleto_id}`).find(`.nova_data${boleto_id}`).val();
            const date = new Date(data_vencimento).toLocaleDateString('pt-BR', { timeZone: 'UTC' });

            var procedimento_dict = [{ "data_vencimento": date }];
            console.log(procedimento_dict);

            $.ajax({
                type: "POST",
                url: "/alterar_data_vencimento/" + boleto_id,
                data: JSON.stringify(procedimento_dict),
                contentType: "application/json",
                dataType: 'json',
                success: function (result) {
                    numRows.innerHTML = result.rows;
                }
            });

            $(`#modalPagamentoPendente${boleto_id}`).find(`.div_data_vencimento${boleto_id}`).html(`<h6  style="cursor: pointer;" title="Alterar Data de Vencimento" onclick="alterar_data_vencimento(${boleto_id})"
                                                        class="data_vencimento_boleto${boleto_id}">
                                                        Data Vencimento:
                                                        <span>${date}</span>
                                                    </h6>`);

            window.location.reload();
        }


        function pagamento_pendente(id) {
            const contratou_servico = '1';
            const status = '3';

            var procedimento_dict = [{
                "contratou_servico": contratou_servico, "status": status
            }];
            console.log(procedimento_dict);

            $.ajax({
                type: "POST",
                url: "/pagamento_pendente/" + id,
                data: JSON.stringify(procedimento_dict),
                contentType: "application/json",
                dataType: 'json',
                success: function (result) {
                    numRows.innerHTML = result.rows;
                }
            });

            window.location.reload();
        }


        function post_topico() {
            var novo_topico = $("#novo_topico").val();

            var novo_topico_dict = [{ "topico": novo_topico }];
            console.log(novo_topico_dict[0]['topico']);
            $.ajax({
                type: "POST",
                url: "/insert_novo_topico",
                data: JSON.stringify(novo_topico_dict[0]['topico']),
                contentType: "application/json",
                dataType: 'json',
                success: function (result) {
                    numRows.innerHTML = result.rows;
                }
            });
            $("#modalAdicionaCadastro").find(".insert_botao").remove();
            $("#modalAdicionaCadastro").find(".select_motivo").replaceWith('<div class="col-8">\
                <select class="selectpicker form-control border-0  rounded shadow select_topico" required\
                    name="select_topicos"  id="select_topicos">\
                    <option selected>Escolha um motivo</option>\
                        {%for topico in topicos%}\
                            <option value="{{topico.id}}">{{topico.topico}}</option>\
                        {%endfor%}\
                </select> </div>');
        }

        function get_topicos() {
            $.ajax({
                url: "/get_topicos",
                type: "GET",
                dataType: "json",
                success: function (data) {
                    topico = '';
                    escolha = `<option selected>Escolha um Motivo</option>`;
                    for (i = 0; i < data.length; i++) {
                        topicos = `<option value="${data[i]["id"]}">${data[i]["topico"]}</option>`
                        topico += topicos;
                        let container = document.querySelector("#motivo_select");
                        container.innerHTML = escolha + topico;

                        console.log(data[i]["topico"])
                    }
                    //console.log(data)
                }

            })
        }
        get_topicos();

        function clear_input() {
            $("#tags").val("");
            $("#resultado").html('');
        }

        function pega_nome() {
            const nomes = $("#tags").val();
            event.preventDefault();
            $.ajax({
                url: "/search_data/" + nomes,
                type: "GET",
                dataType: "json",
                success: function (data) {
                    var id_num = data[0]["id"];
                    console.log(data[0]);
                    if (nomes === '') {
                        $("#resultado").html('');
                    } else {
                        console.log(data[0]);
                        $("#resultado").html('<div class="row text-center text-white">\
                                <h6>Registro encontrado</h6>\
                            </div>\
                            <div class="row linha-dados card_deal text-start text-white" data-bs-toggle="modal"\
                        data-bs-target="#modalSearchData'+ data[0]["id"] + '" >\
                        <a href="'+ data[0]["id"] + '" data-bs-toggle="modal" data-bs-target="#modalSearchData' + data[0]["id"] + '"\
                            class="text-uppercase">'+ data[0]["nome"] + '</a>\
                    </div > ');
                    }
                    console.log(data);
                },
                error: function () {
                    $("#resultado").html(``);
                    console.log("Registro inexistente");
                },
            });
        }


        //BUSCA CLIENTES ANTIGOS
        function buscar_cliente_antigo() {
            const nomes = $('#modalAdicionaCadastro').find("#nome_cliente").val();
            event.preventDefault();
            $.ajax({
                url: "/search_data/" + nomes,
                type: "GET",
                dataType: "json",
                success: function (data) {
                    var id_num = data[0]["id"];
                    console.log(data[0]);
                    if (nomes === '') {
                        $('#modalAdicionaCadastro').find("#nome_cliente").val('');
                    } else {
                        console.log(data[0]);
                        $('#modalAdicionaCadastro').find("#telefone").val(data[0]["telefone"]);
                        $('#modalAdicionaCadastro').find("#email").val(data[0]["email"]);
                    }
                    console.log(data);
                },
                error: function () {

                    console.log("Registro inexistente");
                },
            });
        }

        function cria_select(id) {
            var get_id = $(`.cliente_id${id}`).val();
            //alert(get_id);
            $(`.seleciona_procedimento${id}`).replaceWith(`<div class="row">\
                    <div class="col-md-6">\
                        <select class="selectpicker form-control border-0 select_procedimentos_${id}  rounded shadow" required\
                                        name="select_procedimentos_${id}"  id="select_procedimentos_${id}">\
                                        <option selected>Escolha um procedimento</option>\
                                        {%for procedimento in procedimentos%}\
                                            <option value="{{procedimento.id}}">{{procedimento.nome}}</option>\
                                        {%endfor%}\
                                    </select>\
                    </div>\
                    <div class="col-md-4">\
                        <button class="btn btn-success card_deal" onclick="pagamento_pendente(${id})" type="submit">Salvar</button>\
                        </div>\
                </div>`);

        }

        function opt_nao_contratou(id) {
            var get_id = $(`.cliente_id${id}`).val();
            //alert(get_id);
            $(`.seleciona_procedimento${id}`).replaceWith(`<div class="row">\
                    <div class="col-md-4">\
                        <select class="selectpicker form-control border-0 select_procedimentos${id}  rounded shadow" required\
                                        name="select_procedimentos${id}"  id="select_procedimentos${id}">\
                                        <option selected>Escolha um procedimento</option>\
                                        {%for procedimento in procedimentos%}\
                                            <option value="{{procedimento.id}}">{{procedimento.nome}}</option>\
                                        {%endfor%}\
                                    </select>\
                    </div>\
                    <div class="col-md-4">\
                        <div class='select_motivo${id}'>
                            <select class="selectpicker form-control border-0 select_topicos_${id}  rounded shadow" required\
                                        name="select_topicos_${id}"  id="select_topicos_${id}">\
                                        <option selected>Escolha um motivo</option>\
                                        {%for topico in topicos%}\
                                            <option value="{{topico.id}}">{{topico.topico}}</option>\
                                        {%endfor%}\
                                    </select>\
                        </div>\
                    </div>\
                    <div class="col-md-4">\
                        <button class="btn btn-success card_deal" onclick="pagamento_confirmado(${id})" type="submit">Salvar</button>\
                        </div>\
                </div>`);

        }



        // CRIA GRÁFICO PARA SABER QUANTOS CONTRATARAM O SERVIÇO DE PROCEDIMENTO
        const contratou_servico_procedimento = document.getElementById('compraprocedimentoChart');
        new Chart(contratou_servico_procedimento, {
            type: 'bar',
            data: {
                labels: ["Pagamento Pendente", "Pagamento Confirmado"],
                datasets: [{
                    label: '#Clientes',
                    data: ['{{clientes_inadimplentes|count}}',
                        '{{clientes_adimplentes|count}}'],
                    backgroundColor: [
                        '#d62828',
                        '#38b000'

                    ],
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });


        function theme_change() {
            const light_dark = $("#light_dark").val()
            if (light_dark === 'light') {
                $('body').css({ 'background-color': 'white' });
                $('.card_deal').find('.titulo').css({ 'color': 'black' });
                $('.card_deal').find('.texto-dados').css({ 'color': 'black' });
            } else if (light_dark === 'dark') {
                $('body').css({ 'background-color': '#0d1b2a' });
                $('.titulo').css({ 'color': 'white' });
                $('.card_deal').find('.texto-dados').css({ 'color': 'white' });
            }
        }

        function acende_apaga() {
            if ($('input[name=acende_apaga]:checked')) {
                $('body').css({ 'background-color': '#0d1b2a' });
                $('.titulo').css({ 'color': 'white' });
                $('.card_deal').find('.texto-dados').css({ 'color': 'white' });
            } else {
                $('body').css({ 'background-color': 'white' });
                $('.card_deal').find('.titulo').css({ 'color': 'black' });
                $('.card_deal').find('.texto-dados').css({ 'color': 'black' });
            }
        }

        function converte_data(cliente_id) {
            var data_atual = moment();
            var data_vencimento = $(`#modalPagamentoPendente${cliente_id}`).find(`.data_vencimento${cliente_id}`).val();
            // Convertendo a string para um objeto Moment.js
            var dataDoBancoDeDados = moment(data_vencimento, 'DD/MM/YYYY');
            var total = data_atual.diff(dataDoBancoDeDados, 'months');

            var juros_diarios = $('.pagamentos_pendentes').find(`.juros_diarios${cliente_id}`).val();
            var valor_multa = $('.pagamentos_pendentes').find(`.valor_multa${cliente_id}`).val();
            //VALOR DE 1% DE JUROS AO DIA
            var valor_atualizado = juros_diarios * total;

            var valor_boleto = $(`#modalPagamentoPendente${cliente_id}`).find(`.valor_boleto${cliente_id}`).val();
            var valor_atualizado_boleto = parseFloat(valor_boleto) + parseFloat(valor_multa) + valor_atualizado;

            $(`#modalPagamentoPendente${cliente_id}`).find(`.dados_dias_vencido${cliente_id}`).html(`<h6 href="${cliente_id}"> O boleto está vencido há ${total} mês(es).
                            </h6>`);

            $(`#modalPagamentoPendente${cliente_id}`).find(`.valor_multa_atualizada${cliente_id}`).html(`<h6 href="${cliente_id}"> Valor atualizado de juros de 1% ao mês: R$ ${parseFloat(valor_atualizado.toFixed(2))}
                            </h6>`);

            $(`#modalPagamentoPendente${cliente_id}`).find(`.valor_atualizado${cliente_id}`).html(`<h6 class="fw-bold text-danger" href="${cliente_id}"> Valor Atualizado do Boleto:
                R$ ${parseFloat(valor_atualizado_boleto.toFixed(2))}
                            </h6>`);
        }


        function converte_data_adimplente(cliente_id) {
            var data_atual = moment();
            var data_vencimento = $(`.pagamento_confirmado`).find(`.data_vencimento${cliente_id}`).val();
            var data_pagamento = $(`.pagamento_confirmado`).find(`.data_pagamento${cliente_id}`).val();
            // Convertendo a string para um objeto Moment.js
            var dataDoBancoDeDados = moment(data_vencimento, 'DD/MM/YYYY');
            var datapagamento = moment(data_pagamento, 'DD/MM/YYYY');
            var total = datapagamento.diff(dataDoBancoDeDados, 'months');

            var valor_multa = $('.pagamento_confirmado').find(`.valor_multa${cliente_id}`).val();
            var juros_diarios = $('.pagamento_confirmado').find(`.juros_diarios${cliente_id}`).val();

            var valor_atualizado = juros_diarios * total;

            var valor_boleto = $(`.pagamento_confirmado`).find(`.valor_boleto${cliente_id}`).val();
            var valor_atualizado_boleto = parseFloat(valor_boleto) + parseFloat(valor_multa) + valor_atualizado;

            $(`#modalPagamentoConfirmado${cliente_id}`).find(`.dados_dias_vencido${cliente_id}`).html(`<h6 href="${cliente_id}"> O boleto foi pago após ${total} mês(es) de vencido.
                            </h6>`);

            $(`#modalPagamentoConfirmado${cliente_id}`).find(`.valor_multa_atualizada${cliente_id}`).html(`<h6 href="${cliente_id}"> Valor atualizado de juros de 1% ao mês: R$ ${parseFloat(valor_atualizado.toFixed(2))}
                            </h6>`);

            $(`#modalPagamentoConfirmado${cliente_id}`).find(`.valor_atualizado${cliente_id}`).html(`<h6 href="${cliente_id}"> Valor Atualizado do Boleto:
                R$ ${parseFloat(valor_atualizado_boleto.toFixed(2))}
                            </h6>`);
        }


        $(document).ready(function () {
            $('#tabelaInadimplentes').DataTable({
                dom: 'Bfrtip',
                buttons: [
                    'copyHtml5',
                    'excelHtml5',
                    'csvHtml5',
                    'pdfHtml5',
                    {
                        extend: 'print',
                        exportOptions: {
                            columns: ':visible'
                        }
                    },
                    'colvis'
                ],
                columnDefs: [{
                    targets: -1,
                    visible: true
                }]

            });
        });


        $(document).ready(function () {
            $('#tabelaAdimplentes').DataTable({
                dom: 'Bfrtip',
                buttons: [
                    'copyHtml5',
                    'excelHtml5',
                    'csvHtml5',
                    'pdfHtml5',
                    {
                        extend: 'print',
                        exportOptions: {
                            columns: ':visible'
                        }
                    },
                    'colvis'
                ],
                columnDefs: [{
                    targets: -1,
                    visible: true
                }]

            });
        });

    </script>
</body>

</html>